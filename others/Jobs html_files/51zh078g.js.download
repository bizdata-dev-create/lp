!function(){"use strict";var e,t,n;!function(e){e[e.REGEX=2]="REGEX",e[e.HEAD_MATCH=3]="HEAD_MATCH",e[e.END_MATCH=4]="END_MATCH",e[e.EXACT_MATCH=5]="EXACT_MATCH",e[e.INCLUDE=8]="INCLUDE"}(e||(e={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SMARTPHONE=1]="SMARTPHONE",e[e.PC=2]="PC",e[e.SIMULATOR=3]="SIMULATOR",e[e.TABLET=4]="TABLET"}(t||(t={})),function(e){e[e.NON=0]="NON",e[e.INEFFECTIVE=1]="INEFFECTIVE",e[e.EFFECTIVE=2]="EFFECTIVE"}(n||(n={}));var i="pt_",r="ptKit",o="_pt_popup_info",a="_pt_link",l="_s_",c=365,s=15e3,u=1e3,p=1e3,d="preview_ptx_token",f="ptengine_engage_control_group",h="ptengine_engage_editor_token",b="ptengine_editor_iframe",v="ptengine_heatmap_token",m="ptengine_heatmap_iframe",g="ptengine-event=open",y="ptengine_event_iframe",w="ptengine-event-explore=open",_="pt-async-hide",x=/(\?|&|#)_pt_link=([^&|#]*)(&|#)?/,O="pt_widget",T={PC:t.PC,SMARTPHONE:t.SMARTPHONE,UNKNOWN:t.UNKNOWN,SIMULATOR:t.SIMULATOR,TABLET:t.TABLET},P={BEFORE_ROUTER_CHANGE:"beforeRouterChange",ROUTER_CHANGE:"routerChange",SESSION_TIMEOUT:"sessionTimeout",PAGE_ON_CLICK:"pageOnClick",SHOW_POPUP:"showPopup",CLEAR_POPUP:"clearPopup",CLEAR_EXPERIENCE:"clearExperience"},E=["2dfd029f","323b0b0c","14311cf1","4ea10743","4d304c7a","46635348","31aee115","39a47d27","1568e5d4","1a8c08b0","6f1b18fd","566d12f9","51add8fa","15d58c7b","223c998c","17d1d4aa","308c8fdc","5102c629","5b85c19b","4e8daed1","7201105c","645474fb","4e63000f","5990295c","699082d1","11b7dcb8","41nxng7i","37f93wes","68fn68ca","6a67kck8"],S=["Win32","Win64","Windows","WinCE"],C="ptengine",I="v3.0.25102701.1761735039",k="_ptHeartbeatInterval",j="_pt_sp_2";function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}var D=function(e,t){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},D(e,t)};function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var L=function(){return L=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},L.apply(this,arguments)};function R(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function l(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((i=i.apply(e,t||[])).next())}))}function M(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&l[0]?i.return:l[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,l[1])).done)return r;switch(i=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,i=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){a.label=l[1];break}if(6===l[0]&&a.label<r[1]){a.label=r[1],r=l;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(l);break}r[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],i=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}function F(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function B(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var U=function(){function e(){Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.events={}}return Object.defineProperty(e.prototype,"on",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}}),Object.defineProperty(e.prototype,"off",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.events[e])if(t)for(var n=this.events[e],i=n.length;i--;)t===n[i]&&n.splice(i,1);else this.events[e]=[]}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.events[e])for(var i=0,r=this.events[e];i<r.length;i++){var o=r[i];o.call.apply(o,F([this],t,!1))}}}),Object.defineProperty(e.prototype,"once",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;this.on(e,(function i(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];t.call.apply(t,F([n],r,!1)),n.off(e,i)}))}}),e}();function H(e,t){return"number"!=typeof e||isNaN(e)?t:e}function $(e){for(var t=100*Math.random(),n=0,i=0;i<e.length;i++){var r=e[i],o=100*n,a=100*(n+r);if(n+=r,o<=t&&t<a)return i}return 0}function V(e,t){return void 0===t&&(t=!1),encodeURIComponent instanceof Function?t?encodeURI(e):encodeURIComponent(e):escape(e)}function W(e,t){void 0===t&&(t=!1);var n="";if(e=e.split("+").join(" "),decodeURIComponent instanceof Function)try{n=t?decodeURI(e):decodeURIComponent(e)}catch(t){n=unescape(e)}else n=unescape(e);return n}function q(e){return e.replace(/(^\s*)/g,"").replace(/(\s*$)/g,"")}function z(e,t){var n;return function(){var i=this,r=arguments;n&&(clearTimeout(n),n=null),n=setTimeout((function(){e.apply(i,r)}),t)}}function G(e){for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];if(Object(r)!==r)throw new TypeError("iterable for fromEntries should yield objects");var o=r[0],a=r[1];Object.defineProperty(t,o,{configurable:!0,enumerable:!0,writable:!0,value:a})}return t}!function(){if(void 0!==window.Reflect&&void 0!==window.customElements&&!window.customElements.polyfillWrapFlushCallback){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}}();var Y="pt-experience";function J(e){return void 0===e&&(e=window),e.document.querySelector(Y)||function(e){void 0===e&&(e=window);var t,n=document.createElement(Y);return customElements.get(Y)||customElements.define(Y,(t=function(e){function t(){var t=e.call(this)||this;return t.attachShadow({mode:"open"}),t}return N(t,e),Object.defineProperty(t.prototype,"connectedCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=document.createElement("style");t.innerHTML="\n              :host {\n                all: initial;\n              }\n            ",null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}}),t}(HTMLElement),t)),e.document.body.appendChild(n),n}(e)}function X(e,t){var n;void 0===t&&(t=window),null===(n=J(t).shadowRoot)||void 0===n||n.appendChild(e)}function K(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Q(e){return null==e?void 0:e.host}function Z(){return Boolean((document.head.createShadowRoot||document.head.attachShadow)&&window.customElements)}function ee(e,t){var n;void 0===t&&(t=window);try{var i=t.document.querySelector(e);if(!i){var r=t.document.querySelector(Y);return(null===(n=null==r?void 0:r.shadowRoot)||void 0===n?void 0:n.querySelector(e))||null}return i}catch(e){return null}}function te(e,t){var n;void 0===t&&(t=window);try{var i=t.document.querySelector(Y),r=[].slice.call(t.document.querySelectorAll(e)),o=[].slice.call((null===(n=null==i?void 0:i.shadowRoot)||void 0===n?void 0:n.querySelectorAll(e))||[]);return F(F([],r,!0),o,!0)}catch(e){return[]}}function ne(e){var t;try{var n=it.document.querySelector("pt-experience");return(null===(t=null==n?void 0:n.shadowRoot)||void 0===t?void 0:t.querySelectorAll(e))||[]}catch(e){return[]}}function ie(e,t){var n=document.createElement("style");return void 0!==(null==n?void 0:n.cssText)?n.cssText=e:n.innerHTML=e,t&&n.classList.add(t),n}function re(e){var t=function(e){var t=ee(e);return(null==t?void 0:t.getRootNode())instanceof ShadowRoot?t.getRootNode():null}(e);return t||it.document.head}function oe(e,t){return t.querySelector("style.".concat(e))}function ae(e,t){var n="pt-inline-".concat(t),i=re(e);if(!oe(n,i)){var r=ie("\n            ".concat(e," {\n                opacity: 0;\n                visibility: hidden;\n                pointer-events: none;\n            }\n        "),n);i.appendChild(r)}}function le(e,t){var n=re(e),i=oe("pt-inline-".concat(t),n);null==i||i.remove()}function ce(e,t,n){try{e&&t&&e.insertBefore(t,n)}catch(e){}}function se(e){return void 0===e&&(e=window),e.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)}function ue(e,t,n,i){if(void 0===n&&(n=!0),i&&e.querySelector("#".concat(i)))return e.querySelector("#".concat(i));var r,o=e.createElement("script");if(o.type="text/javascript",o.async=!0,o.src=t,n){var a=e.getElementsByTagName("script")[0];ce(null==a?void 0:a.parentNode,o,a)}else r=o,document.body?document.body.appendChild(r):ye(document,"DOMContentLoaded",(function(){document.body.appendChild(r)}));return o}function pe(e){var t,n,i,r;return void 0===e&&(e=window),Math.max(null!==(n=null===(t=e.document.body)||void 0===t?void 0:t.scrollHeight)&&void 0!==n?n:0,null!==(r=null===(i=e.document.body)||void 0===i?void 0:i.offsetHeight)&&void 0!==r?r:0,e.document.documentElement.clientHeight,e.document.documentElement.scrollHeight,e.document.documentElement.offsetHeight)}function de(){try{var e=(new Date).getTimezoneOffset();return e||0===e?"GMT"+(e<=0?"+":"")+e/60*-1:""}catch(e){return""}}function fe(e){void 0===e&&(e=window);try{var t=e.navigator.userAgent;return t?function(e){void 0===e&&(e=window);var t=e.navigator.platform.toLowerCase();if(t.indexOf("win")>-1)return!0;for(var n=["mac68k","macppc","macintosh","macintel"],i=0;i<n.length;i++)if(t===n[i])return!0;return!1}(e)||function(e){for(var t=["AIX","Amiga","BeOS","DragonFly","FreeBSD","GNU","Haiku","HP-UX","IRIX","Joli","Java","Macintosh","Minix","MorphOS","NetBSD","OpenBSD","PClinuxOS","QNX x86pc","SunOS","Ubuntu","Mint","Red Hat","Slackware","SUSE","PCLinuxOS","Debian","Fedora","CentOS","Vine","Arch Linux","Gentoo","Kanotix","Mandriva"],n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}(t)?function(e){for(var t=["Android","AROS","Bada","BlackBerry","Chromium","CrOS","Danger Hiptop","Inferno","iPhone","iPad","iPod","Nintendo DS","Nintendo Wii","Palm OS","PLAYSTATION","Syllable","SymbOS","Symbian","Tizen","webOS","WebTV","Windows CE","Windows Mobile","Windows Phone","Xbox"],n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}(t)?t.indexOf("iPad")>-1||t.match(/.*MSIE.*Windows NT 6\.2;.*Touch\).*/)||Math.min(he(),e.screen.height)>=1e3?4:1:2:t.indexOf("iPad")>-1||Math.min(he(e),e.screen.height)>=1e3?4:1:0}catch(e){return 0}}function he(e){void 0===e&&(e=window);try{var t=e.screen.width;return t?isNaN(parseInt(t.toString(),10))?0:parseInt(t.toString(),10):0}catch(e){return 0}}function be(e){void 0===e&&(e=window);try{var t=e.screen.height;return t?isNaN(parseInt(t.toString(),10))?0:parseInt(t.toString(),10):0}catch(e){return 0}}function ve(e){var t;void 0===e&&(e=window);var n=(null===(t=null==e?void 0:e.visualViewport)||void 0===t?void 0:t.width)&&Math.ceil(e.visualViewport.width)||self.innerWidth||e.document.body.clientWidth;return isNaN(n)?0:parseInt(n.toString(),10)}function me(e){var t;void 0===e&&(e=window);try{var n=(null===(t=null==e?void 0:e.visualViewport)||void 0===t?void 0:t.height)&&Math.ceil(e.visualViewport.height)||self.innerHeight||e.document.body.clientHeight;return isNaN(n)?0:parseInt(n.toString(),10)}catch(e){return 0}}function ge(e){void 0===e&&(e=window);try{var t=e.document.getElementsByTagName("title")[0]&&e.document.getElementsByTagName("title")[0].innerHTML||e.document.title;return q(t.split("#")[0])}catch(e){return""}}function ye(e,t,n,i){void 0===i&&(i=!1),e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n)}function we(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function _e(e){return void 0===e&&(e=window),void 0===e.screen.orientation||0===e.screen.orientation.angle?1:-1}function xe(e){return void 0===e&&(e=window),/MicroMessenger/i.test(e.navigator.userAgent)}function Oe(e){var t=0;try{t=(null==e?void 0:e.scrollTop)||window.pageYOffset,t=isNaN(t)?0:t}catch(e){t=0}return parseInt(t.toString(),10)}function Te(e,t){var n=+Oe(t)+ +function(e){void 0===e&&(e=window);try{var t=e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight;return t?isNaN(parseInt(t.toString(),10))?0:parseInt(t.toString(),10):0}catch(e){return 0}}(e);return isNaN(n)?0:parseInt(n.toString(),10)}function Pe(e){return/(#[0-9]+)/.test(e)?e.replace(/(^|>)(#)([^>]+)/g,(function(e,t,n,i){return"".concat(t,'[id="').concat(i.trim(),'"]')})):e}function Ee(e){var t;return{"jstest.ptmind.cn":"jp","jstest.ptengine.jp":"jp","js.ptengine.jp":"jp","jstest.ptmind.com":"en","jstest.ptengine.com":"en","js.ptengine.com":"en","devjs.ptengine.com":"en"}[(null===(t=((null==e?void 0:e.getAttribute("src"))||"").match(/(dev)?js(test)?\.(ptengine|ptmind)\.(jp|com|cn)/))||void 0===t?void 0:t[0])||""]||"en"}function Se(){return navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues}function Ce(){return R(this,void 0,void 0,(function(){var e,t,n,i;return M(this,(function(r){switch(r.label){case 0:if(!Se())return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.userAgentData.getHighEntropyValues(["platform","platformVersion"])];case 2:return e=r.sent(),t=e.platform,n=e.platformVersion,[2,{platform:t,platformVersion:n}];case 3:return i=r.sent(),console.error("fetch platformVersion error:",i),[2,null];case 4:return[3,6];case 5:return[2,null];case 6:return[2]}}))}))}function Ie(e,t){return void 0===t&&(t=window),-1!==t.location.href.indexOf(e)}function ke(e,t){var n,i,r;return void 0===t&&(t=window),-1!==(null===(i=null===(n=t.document)||void 0===n?void 0:n.referrer)||void 0===i?void 0:i.indexOf(e))&&function(e,t,n){if(void 0===n&&(n=!0),!e||!t)return!1;var i=Le(e)||{},r=i.protocol,o=i.host,a=i.port,l=i.pathname,c=i.hash,s=Le(t)||{},u=s.protocol,p=s.host,d=s.port,f=s.pathname,h=s.hash;return Fe("".concat(r,"://").concat(o).concat(null!=a?a:"").concat(l).concat(nt.watchRouterHashChange&&n&&c?c:""))===Fe("".concat(u,"://").concat(p).concat(null!=d?d:"").concat(f).concat(nt.watchRouterHashChange&&n&&h?h:""))}(t.location.href,null===(r=t.document)||void 0===r?void 0:r.referrer)}function je(e,t){var n;return void 0===t&&(t=window),Boolean(t.frameElement&&-1!==(null===(n=t.frameElement.src)||void 0===n?void 0:n.indexOf(e)))}function Ae(e,t){return void 0===t&&(t=window),Ie(e,t)||ke(e,t)}function De(e){for(var t,n=/[?&#]([^=#&]+)(?:=([^&#]*))?/g,i={};t=n.exec(e);){var r=decodeURIComponent(t[1].replace(/\+/g," ")),o=t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"";i[r]=o}return i}function Ne(e,t){return void 0===e&&(e=window),void 0===t&&(t=!0),Fe(e.location.protocol+"//"+e.location.host+e.location.pathname+(t?e.location.search:""))}function Le(e){var t=document.createElement("a");return t.href=e,t}function Re(e){for(var t={},n=("?"===e[0]?e.substr(1):e).split("&"),i=0;i<n.length;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return t}function Me(e,t){var n=Le(e),i=Le(t),r=n.search?Re(n.search):{},o=i.search?Re(i.search):{};for(var a in r)o.hasOwnProperty(a)||(o[a]=r[a]);!i.hash&&n.hash&&(i.hash=n.hash);var l=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var i=encodeURIComponent(e[n]);t.push(encodeURIComponent(n)+(i?"="+i:""))}return t.join("&")}(o),c=l?"?".concat(l):"";return"".concat(i.protocol,"//").concat(i.host).concat(i.pathname).concat(c).concat(i.hash)}function Fe(e){for(var t=W(e),n=0;t!==e&&n<10;)t=W(e=t),n++;return t}function Be(e){return(e=(e=(e=e.replace(/www\./,"")).replace(/\/\?/,"?")).replace(/\/\#/,"#")).replace(/\/$/,"")}function Ue(e){var t=new RegExp("[#|?|&]".concat(a,"=[^#|^&]*"),"g"),n=e.match(t),i=e;return n&&n.forEach((function(e){var t=i.split(e);i=t[0]+(t[1]?t[1]:"")})),i||e}function He(e,t){try{var n=e.toLowerCase().split("."),i=t.toLowerCase().split(".");if(n.length!==i.length)return!1;for(var r=n.length-1;r>=0;r--)if(n[r]!==i[r])return!1}catch(e){return!1}return!0}function $e(e,t){try{var n=e.toLowerCase().split("."),i=t.toLowerCase().split(".");if(n.length<i.length)return!1;for(var r=i.length-1;r>=0;r--)if(n[r+(n.length-i.length)]!==i[r])return!1}catch(e){return!1}return!0}function Ve(e){if(e){var t=new URL(e);return t.hostname+t.pathname}}function We(e){var t=qe(e);return t&&function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/",n="",i=0;i<e.length/6-1;)n+=t.charAt(Number(parseInt(e.slice(6*i,6*(i+1)),2).toString(10))),i++;var r=e.slice(6*i,6*(i+1));if(r){var o=r.length;for(i=0;i<6-o;i++)r+="0";n+=t.charAt(Number(parseInt(r,2).toString(10)))}return n}(function(e){for(var t="",n="",i=0,r=e.length,o=0;o<r;o++){i=(n=parseInt(e.charAt(o),16).toString(2)).length;for(var a=0;a<4-i;a++)n="0"+n;t+=n}return t}(t))}function qe(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n=2147483648&e,i=2147483648&t,r=1073741824&e,o=1073741824&t,a=(1073741823&e)+(1073741823&t);return r&o?2147483648^a^n^i:r|o?1073741824&a?3221225472^a^n^i:1073741824^a^n^i:a^n^i}function i(e,i,r,o,a,l,c){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(i,r,o),a),c)),n(t(e,l),i)}function r(e,i,r,o,a,l,c){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(i,r,o),a),c)),n(t(e,l),i)}function o(e,i,r,o,a,l,c){return e=n(e,n(n(function(e,t,n){return e^t^n}(i,r,o),a),c)),n(t(e,l),i)}function a(e,i,r,o,a,l,c){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(i,r,o),a),c)),n(t(e,l),i)}function l(e){var t,n="",i="";for(t=0;t<=3;t++)n+=(i="0"+(e>>>8*t&255).toString(16)).substr(i.length-2,2);return n}var c,s,u,p,d,f,h,b,v,m;for(c=function(e){for(var t,n=e.length,i=n+8,r=16*((i-i%64)/64+1),o=Array(r-1),a=0,l=0;l<n;)a=l%4*8,o[t=(l-l%4)/4]=o[t]|e.charCodeAt(l)<<a,l++;return a=l%4*8,o[t=(l-l%4)/4]=o[t]|128<<a,o[r-2]=n<<3,o[r-1]=n>>>29,o}(e),h=1732584193,b=4023233417,v=2562383102,m=271733878,s=0;s<c.length;s+=16)u=h,p=b,d=v,f=m,h=i(h,b,v,m,c[s+0],7,3614090360),m=i(m,h,b,v,c[s+1],12,3905402710),v=i(v,m,h,b,c[s+2],17,606105819),b=i(b,v,m,h,c[s+3],22,3250441966),h=i(h,b,v,m,c[s+4],7,4118548399),m=i(m,h,b,v,c[s+5],12,1200080426),v=i(v,m,h,b,c[s+6],17,2821735955),b=i(b,v,m,h,c[s+7],22,4249261313),h=i(h,b,v,m,c[s+8],7,1770035416),m=i(m,h,b,v,c[s+9],12,2336552879),v=i(v,m,h,b,c[s+10],17,4294925233),b=i(b,v,m,h,c[s+11],22,2304563134),h=i(h,b,v,m,c[s+12],7,1804603682),m=i(m,h,b,v,c[s+13],12,4254626195),v=i(v,m,h,b,c[s+14],17,2792965006),h=r(h,b=i(b,v,m,h,c[s+15],22,1236535329),v,m,c[s+1],5,4129170786),m=r(m,h,b,v,c[s+6],9,3225465664),v=r(v,m,h,b,c[s+11],14,643717713),b=r(b,v,m,h,c[s+0],20,3921069994),h=r(h,b,v,m,c[s+5],5,3593408605),m=r(m,h,b,v,c[s+10],9,38016083),v=r(v,m,h,b,c[s+15],14,3634488961),b=r(b,v,m,h,c[s+4],20,3889429448),h=r(h,b,v,m,c[s+9],5,568446438),m=r(m,h,b,v,c[s+14],9,3275163606),v=r(v,m,h,b,c[s+3],14,4107603335),b=r(b,v,m,h,c[s+8],20,1163531501),h=r(h,b,v,m,c[s+13],5,2850285829),m=r(m,h,b,v,c[s+2],9,4243563512),v=r(v,m,h,b,c[s+7],14,1735328473),h=o(h,b=r(b,v,m,h,c[s+12],20,2368359562),v,m,c[s+5],4,4294588738),m=o(m,h,b,v,c[s+8],11,2272392833),v=o(v,m,h,b,c[s+11],16,1839030562),b=o(b,v,m,h,c[s+14],23,4259657740),h=o(h,b,v,m,c[s+1],4,2763975236),m=o(m,h,b,v,c[s+4],11,1272893353),v=o(v,m,h,b,c[s+7],16,4139469664),b=o(b,v,m,h,c[s+10],23,3200236656),h=o(h,b,v,m,c[s+13],4,681279174),m=o(m,h,b,v,c[s+0],11,3936430074),v=o(v,m,h,b,c[s+3],16,3572445317),b=o(b,v,m,h,c[s+6],23,76029189),h=o(h,b,v,m,c[s+9],4,3654602809),m=o(m,h,b,v,c[s+12],11,3873151461),v=o(v,m,h,b,c[s+15],16,530742520),h=a(h,b=o(b,v,m,h,c[s+2],23,3299628645),v,m,c[s+0],6,4096336452),m=a(m,h,b,v,c[s+7],10,1126891415),v=a(v,m,h,b,c[s+14],15,2878612391),b=a(b,v,m,h,c[s+5],21,4237533241),h=a(h,b,v,m,c[s+12],6,1700485571),m=a(m,h,b,v,c[s+3],10,2399980690),v=a(v,m,h,b,c[s+10],15,4293915773),b=a(b,v,m,h,c[s+1],21,2240044497),h=a(h,b,v,m,c[s+8],6,1873313359),m=a(m,h,b,v,c[s+15],10,4264355552),v=a(v,m,h,b,c[s+6],15,2734768916),b=a(b,v,m,h,c[s+13],21,1309151649),h=a(h,b,v,m,c[s+4],6,4149444226),m=a(m,h,b,v,c[s+11],10,3174756917),v=a(v,m,h,b,c[s+2],15,718787259),b=a(b,v,m,h,c[s+9],21,3951481745),h=n(h,u),b=n(b,p),v=n(v,d),m=n(m,f);return l(h)+l(b)+l(v)+l(m)}function ze(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*function(){if("function"==typeof Uint32Array){var e="";if("undefined"!=typeof crypto?e=crypto:void 0!==window.msCrypto&&(e=window.msCrypto),"object"==typeof e&&(null==e?void 0:e.getRandomValues)){var t=new Uint32Array(1);return e.getRandomValues(t)[0]/Math.pow(2,32)}}return n=(new Date).getTime(),Math.ceil(1e19*function(e){return(e=(9301*e+49297)%233280)/233280}(n))/1e19;var n}())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function Ge(){return"xxxxxxxx".replace(/[x]/g,(function(){return Math.floor(16*Math.random()).toString(16)}))}function Ye(e){var t,n;void 0===e&&(e=window.event);var i=((null==e?void 0:e.composed)?e.composedPath()[0]:null==e?void 0:e.target)||(null===(t=window.event)||void 0===t?void 0:t.srcElement);try{if((null==i?void 0:i.shadowRoot)&&("touchend"===(null==e?void 0:e.type)||"touchstart"===(null==e?void 0:e.type))){var r="touchend"===e.type?e.changedTouches:e.touches;(null==r?void 0:r[0])&&(i=null===(n=i.shadowRoot)||void 0===n?void 0:n.elementFromPoint(r[0].clientX,r[0].clientY))}}catch(e){}return i}function Je(e,t){void 0===t&&(t=window);var n={top:0,left:0};if(void 0!==e.getBoundingClientRect){var i=t.document.documentElement,r=e.getBoundingClientRect();n={top:r.top+(t.pageYOffset||i.scrollTop)-(i.clientTop||0),left:r.left+(t.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}}else{if(n.top+=e.offsetTop,n.left+=e.offsetLeft,e.offsetParent){var o=Je(e.offsetParent);n.top+=o.top,n.left+=o.left}n.top<0&&(n.top=0),n.left<0&&(n.left=0),n.top=isNaN(n.top)?0:parseInt(n.top.toString(),10),n.left=isNaN(n.left)?0:parseInt(n.left.toString(),10)}return n.top=Math.round(n.top),n.left=Math.round(n.left),n}function Xe(e){var t={x:0,y:0};try{t.x=e.touches[0].pageX?e.touches[0].pageX:e.clientX,t.y=e.touches[0].pageY?e.touches[0].pageY:e.clientY,t.x||(t.x=0),t.y||(t.y=0)}catch(e){}return t.x=isNaN(t.x)?0:parseInt(t.x.toString(),10),t.y=isNaN(t.y)?0:parseInt(t.y.toString(),10),t}function Ke(e,t){var n;if(void 0===t&&(t=!1),!e)return"";var i=e.nodeName.toLowerCase();if("body"===i||"html"===i)return"body";var r=e.parentNode;if(K(e))return Ke(Q(e),t)+">shadowRoot";if(!r)return"";var o=!t&&(null===(n=e.getAttribute)||void 0===n?void 0:n.call(e,"id")),a=Array.from(r.children).some((function(t){var n;if(e!==t)return!!o&&(null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,"id"))===o}));if(r&&o&&!a)return Ke(r,t)+">#"+o.replace(/([^a-zA-Z0-9_-])/g,"\\$1").replace(/^([0-9])/,"\\3$1 ").replace(/^(-[0-9-])/,"\\$1");if(-1!==["input","select","textarea","button"].indexOf(i)&&e.getAttribute("name")){var l=r.querySelectorAll(i+"[name='"+e.getAttribute("name")+"']");if(l.length>1){for(var c=0;c<l.length;c++)if(l[c]===e)return"".concat(Ke(r,t),">").concat(i,":input[name='").concat(e.getAttribute("name"),"']:eq(").concat(c,")")}else if(1===l.length)return Ke(r,t)+">"+i+":input[name='"+e.getAttribute("name")+"']"}for(var s=[],u=0;u<r.children.length;u++){var p=r.children[u];p.nodeName&&p.nodeName.toLowerCase()===i&&s.push(p)}for(var d=0;d<s.length;d++)if(s[d]===e)return"".concat(Ke(r,t),">").concat(i,":eq(").concat(d,")");return""}function Qe(e,t){for(var n,i=e.getElementsByTagName(t),r=[],o=i.length-1;o>=0;o--){var a=i[o];null===(n=null==a?void 0:a.parentNode)||void 0===n||n.removeChild(a),r.push(a)}}function Ze(e,t){return e&&e instanceof HTMLElement&&"function"==typeof e.getAttribute?e.getAttribute(t):null}function et(e,t){void 0===t&&(t=!0);var n=[];try{n=(window[j]||[]).filter((function(t){return t.startsWith(e)})).map((function(e){return e.split(",")}))}catch(e){}return(t?null==n?void 0:n[0]:n)||[]}function tt(){return/lp(pager)?(dev|staging)?\.ptengine\.(jp|com)/.test(it.location.href)}var nt={"sid":"51zh078g","domain":["jobs-tokyo.com"],"crossDomainEnabled":false,"crossAnyDomain":false,"watchRouterHashChange":false,"cancelWatchSPARouterChange":false,"onlyWatchRouterPath":false,"frameworkName":"","silentTimes":{"mobile":30,"pc":30},"ptxEventList":[],"ptiEventList":[],"pageConditions":[],"hasRedirect":false,"hasInline":false,"isExcess":false,"crossDomainType":"HASH","optimizely":0,"optimizelyX":0,"experienceList":[],"allowCrossSiteCookie":false,"partAntiFlicker":false,"allowMultipleTag":false}
,it=(function(){var e;return"1"===(null===(e=et("setOuterIframeEnabled"))||void 0===e?void 0:e[1])}()||nt.enableOutIframe)&&window.top?window.top.window:window,rt=new Date,ot=new U,at={domain:"",page:"",initPage:"",multiDomainFlag:!1,silentTime:5,trackEventList:[],visualEventSelectors:[],crossDomainLink:function(){var e,t=null===(e=et("setCrossDomainLink"))||void 0===e?void 0:e[1];return"allManual"===t?"allManual":"halfManual"===t&&"halfManual"}(),domainSet:[],vUrl:"",vTitle:"",urlMark:"",camParamAry:[],ignoreCampaign:!1,isNV:!1,ref:"",terminalType:T.PC,rotationFlag:1,mouseCoo:{x:0,y:0},srcElement:null,srcElementAbsLeft:0,srcElementAbsTop:0,yMax:1,yMaxP:0,yMaxM:0,hbCount:0,visitTime:0,clickActionTime:0,multiLinkTag:"",activeFlag:!0,scrolledFlag:!1,optFlag:!1,optType:"OptimizelyX",autoEventList:{},sandboxFlag:!1,platformInfo:null,heartbeatTimeouts:[]};function lt(e,t){Array.isArray(e)?e.forEach((function(e,n){Object.prototype.hasOwnProperty.call(at,e)&&(at[e]=t[n])})):"string"==typeof e&&Object.prototype.hasOwnProperty.call(at,e)&&(at[e]=t)}function ct(){return R(this,void 0,void 0,(function(){var e;return M(this,(function(t){switch(t.label){case 0:return at.platformInfo||!Se()?[2,at.platformInfo]:[4,Ce()];case 1:return lt("platformInfo",e=t.sent()),[2,e]}}))}))}function st(e){var t=Te(it,e||it.document.documentElement);lt("rotationFlag",_e(it)),1===at.rotationFlag&&t>at.yMaxP?lt("yMaxP",t):1!==at.rotationFlag&&t>at.yMaxM&&lt("yMaxM",t)}function ut(e,t,n){var i=0;return 1===e?i=1e3:((i=t-n-at.hbCount*s)<0||i>1.5*s)&&(i=s),H(i,1e3)}function pt(){var t=[],n=nt.ptiEventList;return nt.ptxEventList.forEach((function(e){e.events.forEach((function(n){var i=Pe(W(n.selector)),r=t.find((function(e){return e.selector===i})),o={eventName:Fe(e.eventName),isOnly:!1,properties:n.properties||{},source:"ptx"};r?r.events.push(o):t.push({selector:i,events:[o]})}))})),n.forEach((function(n){if(n.urlRegex)if(n.urlRuleType===e.REGEX){if(!it.location.href.replace(/\/$/,"").match(new RegExp(n.urlRegex.replace(/^\//,"").replace(/[\\]?[\\]?\/[\.]?[\*]?[\$]?$/,""))))return}else if(i=it.location.href,r=n.urlRegex,!i.replace(/https?:\/\/(www\.)?/,"").replace(/\/$/,"").match(new RegExp(r.replace(/https?(\?)?\:(\/\/)?(\\\/\\\/)?(www\\.)?/,"").replace(/^\//,"").replace(/[\\]?[\\]?\/[\.]?[\*]?[\$]?$/,""))))return;var i,r,o=Pe(W(n.isOnly?n.selfSelector:n.sameSelector)),a=t.find((function(e){return e.selector===o})),l={isOnly:n.isOnly,eventName:Fe(n.eventName),source:"pti"};a?a.events.push(l):t.push({selector:o,events:[l]})})),t}function dt(e){return[w,m,v,y,g,b,h,d,f].some((function(t){return-1!==e.indexOf(t)}))}function ft(){var e,t,n,i=(e=it.location.href,t=new RegExp(x),(n=e.match(t))&&(e="&"===(null==n?void 0:n[3])?e.replace(t,"$1"):e.replace(t,"$3")),e);return i=i.replace(/\?_randomTest=\S*/,""),at.vUrl&&(i=at.vUrl),at.urlMark&&(i+="#"+at.urlMark),i}function ht(e){return"string"!=typeof e||["?","^","$","*","+","(",")","|"].map((function(t){var n=new RegExp("(\\"+t+")","g");e=e.replace(n,"\\$1")})),e}function bt(e){void 0===e&&(e=!1);var t,n,i=!Ae("hasAntiFlicker",it)||Ae("hasAntiFlicker=1",it),r=e?i:(nt.hasInline||nt.hasRedirect)&&function(e,t){if(!e||!t||!Array.isArray(t)||0===t.length)return!0;for(var n=!1,i=0;i<t.length;i++){var r=t[i];if(!r||!Array.isArray(r))break;if(n||(n=gt(e,r)),n)break}return n}(Fe(it.location.href),nt.pageConditions)&&!nt.isExcess,o={startTime:(new Date).getTime(),endTime:null,timeout:4e3};return r&&(t=_,(n=it.document.createElement("style")).appendChild(it.document.createTextNode(".".concat(t," { opacity: 0 !important}"))),it.document.getElementsByTagName("head")[0].appendChild(n),it.document.documentElement.classList.add(t),setTimeout((function(){mt()}),4e3)),o}function vt(){return-1!==it.document.documentElement.className.indexOf(_)}function mt(){var e,t=(new Date).getTime();it.document.documentElement.className=it.document.documentElement.className.replace(RegExp(" ?"+_),""),(null===(e=window[C])||void 0===e?void 0:e.__antiFlicker)&&!window[C].__antiFlicker.endTime&&(window[C].__antiFlicker.endTime=t),we(it.document,"DOMContentLoaded",mt),we(it.document,"readystatechange",mt)}function gt(e,t,n){var i;void 0===n&&(n=!1);for(var r=[],o=function(o){var a=t[o]||{},l=a||{},c=l.type,s=l.condition,u=a.value;if("ALL"===c.toLocaleUpperCase())r.push(!0);else{var p=n?(null===(i=Le(e))||void 0===i?void 0:i.protocol)+"//"+Le(e).host+Le(e).pathname:it.location.protocol+"//"+it.location.host+it.location.pathname,d="COMBINEDPAGE"===c.toLocaleUpperCase()?p:e,f=Be(Fe(d)),h=[];"string"==typeof u&&(u=[u]),Array.isArray(u)&&(h=u.map((function(e){var t=Be(Fe(e));switch(s){case"==":e=f===t;break;case"[()]":e=-1!==f.indexOf(t);break;case"![()]":e=-1===f.indexOf(t);break;case"[(":e=new RegExp("^"+ht(t)).test(f);break;case")]":e=new RegExp(ht(t)+"$").test(f);break;case"Rex":try{e=new RegExp(e).test(d)}catch(t){e=!1}break;default:e=!1}return e}))),r.push("![()]"===s?h.every((function(e){return e})):h.some((function(e){return e})))}},a=0;a<t.length;a++)o(a);return r.every((function(e){return e}))}function yt(e){return it.navigator.cookieEnabled?decodeURIComponent(it.document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:""}function wt(e,t,n,i,r,o){if(!it.navigator.cookieEnabled)return!1;if(!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;var a=r?"; domain="+r:"",l=i?"; path="+i:"",c=nt.allowCrossSiteCookie?"; samesite=None":"",s=o||nt.allowCrossSiteCookie?"; secure":"",u="";if(n)switch(n.constructor){case Number:if(n===1/0)u="; expires=Fri, 31 Dec 9999 23:59:59 GMT";else{var p=new Date;p.setTime(p.getTime()+24*n*60*60*1e3),u="; expires="+p.toUTCString()}break;case String:u="; expires="+n;break;case Date:u="; expires="+n.toUTCString()}return it.document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+u+a+l+c+s,!0}function _t(e,t,n){return!(!it.navigator.cookieEnabled||!e||!function(e){return!!it.navigator.cookieEnabled&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=").test(it.document.cookie)}(e)||(it.document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),0))}function xt(){var e="_ptTestCookie";return wt(e,"1",1),yt(e)?(wt(e,"2",1),"2"!==yt(e)?(_t(e),0):(_t(e),1)):-1}function Ot(e,t){if(!it.navigator.cookieEnabled)return!1;localStorage.setItem(e,t)}function Tt(e){return it.navigator.cookieEnabled&&localStorage.getItem(e)||""}function Pt(e){var t,n,i=e.method,r=e.data,o=e.url,a=e.callback,l=e.rejectCallback,c=e.contentType,s=e.async,u=e.traceId,p=e.extraPlatformInfo,d=function(e,t,n){void 0===n&&(n=!1);var i=new window.XMLHttpRequest;return"withCredentials"in i?i.open(e,t,!0):void 0!==window.XDomainRequest?null==(i=new window.XDomainRequest)||i.open(e,t,n):i=null,i}(i||"GET",o,s);d&&(c&&(null===(t=null==d?void 0:d.setRequestHeader)||void 0===t||t.call(d,"Content-Type",c)),p&&(null===(n=null==d?void 0:d.setRequestHeader)||void 0===n||n.call(d,"extra-platform-info",p)),d.onreadystatechange=function(){4===d.readyState&&(-1!==[200,201,204].indexOf(null==d?void 0:d.status)?"function"==typeof a&&a(d.responseText):"function"==typeof l&&l(d.status,d.statusText,u))},d.send(r))}function Et(e){navigator.sendBeacon?(navigator.sendBeacon(e.url,e.data),"function"==typeof e.callback&&e.callback("")):Pt(e)}function St(){var e,t,n,i,r,o=it.navigator.userAgent,a=(new Date).getTime(),l=Math.random(),c=null!==(t=null!==(e=it.document.documentElement.clientWidth)&&void 0!==e?e:it.document.body.clientWidth)&&void 0!==t?t:0,s=0;try{s=null!==(r=null!==(i=null!==(n=it.innerHeight)&&void 0!==n?n:it.document.documentElement.clientHeight)&&void 0!==i?i:it.document.body.clientHeight)&&void 0!==r?r:0}catch(e){}var u=function(e){void 0===e&&(e=window);var t="",n=e.navigator.plugins;if(0!==n.length){for(var i=[],r=0;r<n.length;r++){i[r]=n[r].name+";"+n[r].description+";"+n[r].filename+";";for(var o=0;o<n[r].length;o++)i[r]+="("+n[r][o].description+";"+n[r][o].type+";"+n[r][o].suffixes+")";i[r]+="."}t=i.sort().join("")}return t}();return qe("ua=".concat(o,"&ts=").concat(a,"&random=").concat(l,"&bw=").concat(c,"&bh=").concat(s,"&plugins=").concat(u))}function Ct(e){e.meta={level:"error"},e.userAgent=navigator.userAgent,e.cookieEnable=navigator.cookieEnabled,function(e){var t=[{product:"pt-sdk-v3",sdkVer:I,env:"production",url:it.location.href,profileId:Nt(),sessionId:Ut(),meta:{level:"info"}}||{},e||{}].reduce((function(e,t){return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),{});Et({url:"https://exceptcollect.ptengine.com/post",method:"POST",data:JSON.stringify(t)})}(e)}it.location.protocol;var It=it.navigator.cookieEnabled&&1===xt(),kt=!1,jt={packageId:"",profileId:nt.sid,pageId:"",pageViewId:"",deviceId:"",sessionId:"",sessionIdLastSendTime:0,accountId:"",vn:0,pvn:0,lastActionTime:rt.getTime(),lastUpdateTime:rt.getTime(),nid:0,toFlag:0,pageList:"",visitRef:"",preSessionId:"",preSessionLastSendTime:0};function At(){return jt.deviceId=Jt("deviceId"),jt.sessionId=Jt("sessionId"),jt.accountId=Jt("accountId"),jt.visitRef=Jt("visitRef"),jt.vn=Vt(),jt.pvn=Wt(),jt.lastActionTime=qt(),jt.nid=Rt(),jt.toFlag=Mt(),jt}function Dt(e,t){At(),Array.isArray(e)&&Array.isArray(t)&&e.forEach((function(e,n){Object.prototype.hasOwnProperty.call(jt,e)&&(jt[e]=t[n])})),"string"==typeof e&&Object.prototype.hasOwnProperty.call(jt,e)&&(jt[e]=t),Kt()}function Nt(){return jt.profileId}function Lt(){return jt.lastUpdateTime}function Rt(){var e=Number(Jt("nid","number"));return jt.nid=H(e,0),jt.nid}function Mt(){var e=Number(Jt("toFlag","number"));return jt.toFlag=H(e,0),jt.toFlag}function Ft(){return jt.pageList=Jt("pageList"),jt.pageList}function Bt(e){return void 0===e&&(e=!1),!e&&jt.pageViewId||(kt?Dt("pageViewId",ze()):jt.pageViewId=ze()),jt.pageViewId}function Ut(e){return void 0===e&&(e=!1),e||(jt.sessionId=Jt("sessionId")),!e&&jt.sessionId||(jt.sessionId&&(jt.preSessionId=jt.sessionId,jt.preSessionLastSendTime=jt.sessionIdLastSendTime),kt?Dt("sessionId",ze()):jt.sessionId=ze()),jt.sessionId}function Ht(){return jt.accountId=Jt("accountId"),jt.accountId}function $t(){var e;return jt.deviceId=Jt("deviceId"),jt.deviceId||(kt?Dt("deviceId",ze()):jt.deviceId=ze()),(null===(e=null==jt?void 0:jt.deviceId)||void 0===e?void 0:e.toString().length)<10&&Ct({module:"api",message:"deviceId length exceptions: "+jt.deviceId}),jt.deviceId}function Vt(){var e=H(Number(Jt("vn","number")),0);return jt.vn=13===e.toString().length?0:e,13===e.toString().length&&Ct({module:"api",message:"vn length exceptions: "+e}),jt.vn}function Wt(){var e=Number(Jt("pvn","number"));return jt.pvn=H(e,0),jt.pvn}function qt(){var e=Number(Jt("lastActionTime","number"));return jt.lastActionTime=H(e,rt.getTime()),jt.lastActionTime}function zt(e){return void 0===e&&(e=""),e?kt?Dt("pageId",We(e)):jt.pageId=We(e):jt.pageId=We(at.page),jt.pageId}function Gt(){return Jt("visitRef")}function Yt(){return zt()+"*pt*"+Lt()}function Jt(e,t){var n;if(void 0===t&&(t="string"),It){var i=Xt();return"string"===t?i[e]||jt[e]:null!==(n=i[e])&&void 0!==n?n:jt[e]}return jt[e]}function Xt(e){var t=e||jt.profileId,n=Tt("".concat(i).concat(t))||"",r=(yt("".concat(i).concat(t))||"")+n,o=yt("ptx_".concat(t));o&&(_t("ptx_".concat(t),"/",at.domain),r||(r=o));var a=r.split("&").reduce((function(e,t){var n=t.split("="),i=n[0],r=n[1];if(i)switch(i){case"uid":e.deviceId=r;break;case"pl":e.pageList=r;break;case"vid":e.sessionId=r;break;case"to_flag":e.toFlag=r;break;case"sact":e.lastActionTime=r;break;case"pageviewId":e.pageViewId=r;break;default:e[i]=r}return e}),{});return a}function Kt(){var e=["deviceId","sessionId","accountId","vn","pvn","lastActionTime"],t=jt.profileId,n=jt.lastActionTime,i=jt.lastUpdateTime;if(t){var r=e.map((function(e){var t=jt[e];return void 0===t?"":"".concat(e,"=").concat(t,"&")}));!n&&r.push("lastActionTime=".concat(i)),wt("pt_".concat(t),r.join(""),c,"/",at.domain);var o=Object.keys(jt).filter((function(t){return-1===e.indexOf(t)})).map((function(e){var t=jt[e];return"".concat(e,"=").concat(t,"&")}));Ot("pt_".concat(t),o.join(""))}}function Qt(){var e=at.multiLinkTag.split("_s_"),t=e[1]&&e[1].split("."),n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],l=t[6];Dt(["deviceId","sessionId","vn","pvn","lastActionTime","nid","accountId","visitRef"],[n,i,r,o,t[7],a,l,V(e[0]?e[0].replace(/\*_\*/g,".").replace(/\*_wh_\*/g,"?"):"",!1)]),lt("isNV",!1)}function Zt(){var e,t,n=document.body&&document.body.innerHTML;(nt.crossDomainEnabled||at.crossDomainLink||!n||-1!==n.indexOf("data-pt-crossDomain")||-1!==n.indexOf("pt_domain"))&&(e="halfManual"===at.crossDomainLink||nt.crossDomainEnabled,(t=document.getElementsByTagName("a")).length>0&&[].map.call(t,(function(t){var n=t.getAttribute("href")||"",i=t.getAttribute("onclick"),r=t.getAttribute("data-pt-crossDomain"),o=en(n);(o&&e||o&&(i&&-1!==i.indexOf("pt_domain")||null!==r))&&t.setAttribute("href",tn(n))})))}function en(e){var t;if(!e)return!1;var n=e&&function(e){var t=document.createElement("a");t.href=e||"";var n={source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,path:Fe(t.pathname).replace(/^([^/])/,"/$1")},i=n.protocol+"://"+n.host+(n.port?":"+n.port:"")+n.path;return Fe(e).indexOf(i)<0&&(n.path=n.path.replace(/^\//,"")),n}(e);return e&&e.match(/^https?:\/\//)&&e.length<900&&n&&!He(n.host,location.hostname)&&!$e(n.host,at.domain)&&(null===(t=nt.domain)||void 0===t?void 0:t.some((function(e){return!!He(t=e,i=n.host)||!!$e(t,i)||!!$e(i,t);var t,i})))}function tn(e){return function(e,t,n){if(void 0===n&&(n="HASH"),!e)return"";var i=e.split("#");if(1===i.length&&"HASH"===(n+"").toLocaleUpperCase())e+="#".concat(a,"=").concat(t);else{var r=i[1]?"#".concat(i[1]):"";e="".concat(i[0]).concat(-1===i[0].indexOf("?")?"?":"&").concat(a,"=").concat(t).concat(r)}return e}(Ue(e),function(){var e=Gt(),t=Nt()+"."+$t()+"."+Ut()+"."+Vt()+"."+Wt()+"."+Rt()+"."+Ht()+"."+qt();return"".concat(dt(e)?"":e).concat(l).concat(t)}(),nt.crossDomainType)}function nn(e,t){var n=en(e);return t&&(e=Me(Fe(it.location.href),Fe(e))),nt.crossDomainEnabled&&n?tn(e):e}var rn,on,an,ln,cn,sn,un,pn,dn,fn,hn,bn=new(function(){function e(){Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache={}}return Object.defineProperty(e.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.cache[e]}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.cache[e]=t}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.cache={}}}),e}()),vn="CONTROL_GROUP_ID",mn="ptxEngage",gn="position",yn="experienceRenderedVersion",wn="experienceRenderedPopup",_n="pt-inline-action",xn="pt-insert-element",On="PTX_SID",Tn={DATA_BLOCK:"data-engage-block",DATA_WIDGET_ID:"data-engage-widget-id",DATA_SHOW_ENGAGE:"data-show-engage",DATA_GOTO_WIDGET:"data-goto-widget",DATA_BUTTON_TYPE:"data-button-type",BUTTON_FORM_SUBMIT:"button-submit-success",DATA_ACTION_CLICK:"data-engage-action-click",DATA_ACTION_CLOSE:"data-engage-action-close",DATA_ACTION_CONFIG:"data-engage-action",DATA_NO_PACKAGE:"data-engage-no-package",DATA_URL_CLOSE_POPUP:"data-engage-url-close-popup",DATA_COUNTDOWN:"insert.count_down",BUTTON_URL:"button-url",BUTTON_TEL:"button-tel",BUTTON_CLOSE:"button-close",BUTTON_GOTO_WIDGET:"button-goto-widget",ICON_CLOSE:"icon-close",POSITION:"position",CENTER_POSITION:"pos-center",LAYOUT_MODE:"layoutMode",DATA_TRACK_EVENTS:"data-track-events",DATA_MENU_ACTION:"data-menu-action",POPUP:"insert.popup",CLOSE_BUTTON:"insert.close",FORM:"form-element",DOM_TYPE:"data-silex-type",TEMP_A:"pt-temp-a"},Pn={SELECT:[1,'<select multiple="multiple">',"</select>"],FIELDSET:[1,"<fieldset>","</fieldset>"],MAP:[1,"<map>","</map>"],OBJECT:[1,"<object>","</object>"],TABLE:[1,"<table>","</table>"],TBODY:[2,"<table><tbody>","</tbody></table>"],COLGROUP:[2,"<table><colgroup>","</colgroup></table>"],TR:[3,"<table><tbody><tr>","</tr></tbody></table>"]};function En(e,t){var n=bn.get(gn)||[],i=n.indexOf(t);"add"===e&&-1===i&&n.push(t),"delete"===e&&-1!==i&&n.splice(i,1),bn.set(gn,n)}function Sn(e){var t=e&&bn.get(yn)||[];e&&t.push(e),bn.set(yn,t)}function Cn(e){var t=ee(".engage-layer",it);if(t){var n="".concat("pt_mask_").concat(e),i=["engage-layer-open",n],r=it.document.getElementsByTagName("html")[0],o=it.document.body;Array.prototype.slice.call(it.document.body.classList).filter((function(e){return"engage-layer-open"===e||/^pt_mask_/.test(e)})).reverse().join("")===i.reverse().join("")?(o.removeChild(t),i.forEach((function(e){r.classList.remove(e),o.classList.remove(e)}))):(r.classList.remove(n),o.classList.remove(n))}}function In(e,t){var n=bn.get(wn)||[],i=n.indexOf(t);"add"===e&&-1===i&&n.push(t),"delete"===e&&-1!==i&&n.splice(i,1),bn.set(wn,n)}function kn(e,t,n){var i,r;void 0===t&&(t="seenTimes");var o=At(),a=Mn(e),l=n?Mn(n):"";if(a||l)try{var c=JSON.parse(a||l);c[t]=Number(c[t]||0)+1,"seenTimes"===t&&(c.session&&c.session[o.sessionId]||(c.session=((i={})[o.sessionId]={frequencySessionTimes:0},i)),c.session[o.sessionId].frequencySessionTimes=Number(c.session[o.sessionId].frequencySessionTimes||0)+1),!a&&l&&n&&function(e){if(e){var t=Ln();delete t[e],Ot(Nn(),JSON.stringify(t))}}(n),Rn(e,JSON.stringify(c))}catch(e){}else{var s={seenTimes:1,hasClosed:0,hasClicked:0,formSubmitted:0,previewFormContent:null,session:(r={},r[o.sessionId]={frequencySessionTimes:1},r)};Rn(e,JSON.stringify(s))}}function jn(e,t,n){void 0===n&&(n=it);var i=new Function("window",r,o,e);try{i(n,Fr,t)}catch(e){}}function An(e,t){var n=t.position,i=t.toEnter,r=t.toLeave,o=t.enterDuration,a=void 0===o?"300ms":o,l=t.leaveDuration,c=void 0===l?"300ms":l,s=t.timeFunction,u=void 0===s?"ease":s;return"@keyframes animate-".concat(n,"-enter {").concat(i,"} \n\n            @keyframes animate-").concat(n,"-leave {").concat(r,"}\n            .animate-enter { animation: animate-").concat(n,"-enter ").concat(a," ").concat(u," }\n            .animate-leave { animation: animate-").concat(n,"-leave ").concat(c," ").concat(u," }")}function Dn(e,t){var n=new RegExp("([^\r\n,{}]+)(,(?=[^}]*{)|s*{)","g");return e.replace(n,(function(e,n,i){return n.match(/^\s*(@media|@.*keyframes|to|from|@font-face|1?[0-9]?[0-9])/)?n+i:(n.match(/:scope/)&&(n=n.replace(/([^\s]*):scope/,(function(e,t){return""===t?"> *":"> "+t}))),(n=n.replace(/^(\s*)/,"$1"+t+" "))+i)}))}function Nn(){return window.PTX_PREVIEW_ID?"ptx_preview_"+window.PTX_PREVIEW_ID:window.PT_ENGAGE_IN_DEBUG?"ptx_engager_debug":"ptx_engager"}function Ln(){var e={};try{var t=Nn();e=JSON.parse(Tt(t)||"{}")}catch(e){}return e}function Rn(e,t){if(e){var n=Ln();n[e]=t,Ot(Nn(),JSON.stringify(n))}}function Mn(e,t){var n;if(e){var i=Ln();t&&Object.prototype.hasOwnProperty.call(i,t)?n=i[t]:Object.prototype.hasOwnProperty.call(i,e)&&(n=i[e])}return n}function Fn(e){return void 0===e&&(e=window),fe(e)===T.SMARTPHONE?T.SMARTPHONE:T.PC}function Bn(e,t,n){var i=-1!==["POPUP","STICKY_BAR"].indexOf(e.engageType)?e.engageId:e.engageId+"--"+(null==t?void 0:t.versionId)+"--"+(null==n?void 0:n.popupId);return e.engageType+"_"+qe(i)}function Un(e){var t=[];try{var n=Tt("".concat(On,"_").concat(e,":exp:versions"));n&&(t=JSON.parse(n))}catch(e){}return Array.isArray(t)?t.map((function(e){return e.id})):[]}function Hn(e,t){void 0===t&&(t=[]);var n="".concat(On,"_").concat(e,":exp:versions");try{var i=Tt(n),r=i?JSON.parse(i):[];t.forEach((function(e){var t=r.filter((function(t){return t.id===e}));t.length>0?t.forEach((function(e){return e.ts=Date.now()})):r.push({id:e,ts:Date.now()})})),r.length>256&&(r=r.sort((function(e,t){return e.ts-t.ts})).slice(r.length-256)),Ot(n,JSON.stringify(r))}catch(e){Ct({module:"popup",message:e.toString()})}}function $n(e,t,n){var i=t&&ee("#link_"+t,it);i&&i.remove();var r=it.document.createElement("style");r.type="text/css",r.id="link_"+t,r.appendChild(it.document.createTextNode(e)),r.appendChild(document.createTextNode(".data-focus:focus { outline: 5px auto -webkit-focus-ring-color !important}")),Z()&&"body"!==n?X(r,it):it.document.getElementsByTagName("head")[0].appendChild(r)}function Vn(){var e=Tt("PT_REDIRECT_TARGET_URL");return e&&("PT_REDIRECT_TARGET_URL",it.navigator.cookieEnabled&&localStorage.removeItem("PT_REDIRECT_TARGET_URL")),it.location.href===e&&it.location.href.match(/(utm_campaign|utm_source|utm_medium|utm_term|utm_content)/)}function Wn(e){it.location.href=e}function qn(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),zn(),Gn(e,t),lt("hbCount",0)}function zn(){var e=window[k];clearInterval(e),Array.isArray(at.heartbeatTimeouts)&&at.heartbeatTimeouts.length>0&&(at.heartbeatTimeouts.forEach((function(e){return clearTimeout(e)})),at.heartbeatTimeouts=[])}function Gn(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),e){var n=Date.now(),i=setTimeout((function(){if(t)ai.heartBeat(u);else{var e=Date.now(),i=!at.scrolledFlag,r=e-(qt()||n)>=u;i&&r&&ai.heartBeat(u)}}),u);at.heartbeatTimeouts=[i]}window[k]=setInterval((function(){ai.heartBeat()}),s)}function Yn(e){return e-qt()>at.silentTime+ +s}function Jn(){ot.emit(P.SESSION_TIMEOUT),at.multiDomainFlag&&function(){for(var e=document.getElementsByTagName("a"),t=0;t<e.length;t++){var n=e[t].getAttribute("href");if(n){var i=Ue(n);i&&e[t].setAttribute("href",i)}}}(),zn(),Dt("toFlag",1)}function Xn(e){ai.page(e),ai.performance(),qn(!0,!0),at.multiDomainFlag&&Zt()}function Kn(e){if(1===Mt()||Ft()!==Yt()){var t=function(e,t){var n=Ut()!==e,i=+t>=qt();return n&&i}(jt.sessionId,e);if(1===Mt())return Xn("pn"),!0;if(t)return Xn("pv"),!0;lt("activeFlag",!0)}return!1}function Qn(){var e="";if("object"==typeof window.optimizely&&"function"==typeof window.optimizely.get){var t=window.optimizely.get("state");if(t)for(var n=t.getActiveExperimentIds(),i=0;i<n.length;i++){var r=n[i],o=t.getExperimentStates({isActive:!0})[r].experimentName||"",a=t.getVariationMap()[r],l=a.id,c=a.name||"";e+=0===i?"":"|o|",e+=r+"|p|"+o.substr(0,100)+"|p|"+l+"|p|"+c.substr(0,100),e+="|p|"+at.optType}}return e}function Zn(){var e="";if("object"==typeof window.optimizely){var t=window.optimizely.activeExperiments;if(t&&t.length>0)for(var n=0;n<t.length;n++)e+=0===n?"":"|o|",e+=t[n]+"|p|"+window.optimizely.data.experiments[t[n]].name.substr(0,100)+"|p|"+window.optimizely.variationIdsMap[t[n]][0]+"|p|"+window.optimizely.variationNamesMap[t[n]].substr(0,100),e+="|p|"+at.optType}return e}function ei(){var e=nt.optimizely,t=nt.optimizelyX,n="";if(1===e&&(n=Zn()),1===t&&(n=Qn()),at.optFlag)switch(at.optType){case"GoogleOptimize":n+=function(){var e="";return window.gaData&&window.gaData.expId&&window.gaData.expVar&&(e+=window.gaData.expId+"|p||p|"+window.gaData.expVar+"|p||p|"+at.optType),e}();break;case"OptimizelyX":n=Qn();break;case"Optimizely":n=Zn()}return n?V(n,!1):""}function ti(){return Ae(m)||je(m)}function ni(){var e;try{var t=null===(e=it.frameElement)||void 0===e?void 0:e.src,n=Ve(t)===Ve(it.location.href);return!(!ti()||!n||Ie(m)||(lt("vUrl",t),0))}catch(e){}return!1}function ii(){return Ae("ptengine=")}var ri,oi=function(){function e(){var e=this;Object.defineProperty(this,"collectUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formSubmitUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"experienceInstance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendPageFlag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ajaxList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbackList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastTraceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.collectUrl="1dbdg8m7"===nt.sid?"https://collect.ptengine.jp/collect":"https://stats.ptengine.jp/collect",this.formSubmitUrl="https://xbackend.ptengine.jp/formVerification",this.experienceInstance=null,this.sendPageFlag=!1,this.ajaxList=[],this.callbackList=[],this.lastTraceId="",ot.on(P.BEFORE_ROUTER_CHANGE,(function(){e.sendPageFlag=!1,e.ajaxList=[],e.callbackList=[]})),ot.on(P.ROUTER_CHANGE,(function(){ni()||lt("vUrl",""),lt("page",ft()),lt("initPage",ft()),Yn((new Date).getTime())?Xn("pn"):(e.page("vpv"),e.performance(),at.multiDomainFlag&&Zt())}))}return Object.defineProperty(e.prototype,"_handlePageSend",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sendPageFlag=!0;for(var e=this.ajaxList.length-1;e>=0;e--)this._sendPackage(this.ajaxList[e]),this.ajaxList.pop();for(e=this.callbackList.length-1;e>=0;e--)"function"==typeof this.callbackList[e]&&this.callbackList[e](),this.callbackList.pop()}}),Object.defineProperty(e.prototype,"_getBaseData",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{timestamp:(new Date).getTime(),packageId:St(),profileId:Nt(),pageViewId:Bt(),deviceId:$t(),sessionId:Ut(),accountId:Ht()}}}),Object.defineProperty(e.prototype,"_getDefaultData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=at.page;return{timezone:de(),screen:"".concat(he(it),"*").concat(be(it)),referrer:V(at.ref.replace(/&/g,"*&*").replace(/\+/g,"*+*"),!1),title:V(at.vTitle||ge(it),!1),url:e||at.page,visibilityState:"visible"===it.document.visibilityState?"visible":"hidden"}}}),Object.defineProperty(e.prototype,"_getAttentionBaseData",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return{readLineStart:this._getReadlineStart(),readLineEnd:this._getReadlineEnd(),stayTime:e}}}),Object.defineProperty(e.prototype,"_getReadlineStart",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 1===at.rotationFlag?Oe():(Oe()+1)*at.rotationFlag}}),Object.defineProperty(e.prototype,"_getReadlineEnd",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 1===at.rotationFlag?at.yMaxP:at.yMaxM*at.rotationFlag}}),Object.defineProperty(e.prototype,"_getRelativePosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e*at.rotationFlag}}),Object.defineProperty(e.prototype,"_getDeviceHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Math.min(me(it),1500)}}),Object.defineProperty(e.prototype,"_getOldSession",{enumerable:!1,configurable:!0,writable:!0,value:function(){return jt.preSessionId&&jt.preSessionId!==Ut()&&0!==jt.preSessionLastSendTime&&Date.now()-jt.preSessionLastSendTime<at.silentTime&&Vt()>1?{oldSession:{sessionId:jt.preSessionId,timestamp:jt.preSessionLastSendTime}}:{}}}),Object.defineProperty(e.prototype,"_sendPackage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return R(this,void 0,void 0,(function(){var t,n,i,r,o,a;return M(this,(function(l){switch(l.label){case 0:return!e.afterThePage||this.sendPageFlag||at.sandboxFlag?(e.data&&!e.data.sdkVer&&(e.data.sdkVer=I),it.__pt_inspectorMode&&(e.data.inspectorMode=!0),"566d12f9"===nt.sid&&this.lastTraceId&&(e.data.lastTraceId=this.lastTraceId),t=St(),this.lastTraceId=t,n=("form"===e.type?this.formSubmitUrl:this.collectUrl)+"?traceId=".concat(t)+"&deviceId=".concat($t())+(It?"":"&cookieEnabled=0"),i={url:n,traceId:t,method:"POST",data:JSON.stringify(e.data),callback:function(t){"function"==typeof e.callback&&e.callback(t)},rejectCallback:function(t,n,i){"function"==typeof e.rejectCallback&&e.rejectCallback(t,n,i)}},"form"===e.type&&(i.contentType="application/json"),[4,ct()]):(this.ajaxList.push(e),[2]);case 1:return r=l.sent()||{},o=r.platform,a=r.platformVersion,o&&S.includes(o)&&(i.extraPlatformInfo="".concat(o,";").concat(a)),"beacon"===e.transport?Et(i):Pt(i),"page"===e.type&&this._handlePageSend(),Dt("sessionIdLastSendTime",(new Date).getTime()),[2]}}))}))}}),Object.defineProperty(e.prototype,"_getExperienceListForResponse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=[];try{var n=e?JSON.parse(e):{};"success"===n.status&&Array.isArray(n.content)&&(t=n.content)}catch(e){}return t}}),Object.defineProperty(e.prototype,"_sendHeartbeatPackage",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._getDefaultData(),i=n.title,r=n.visibilityState,o=this._getDeviceHeight(),a=L(L(L({},this._getBaseData()),this._getAttentionBaseData(e)),{visibilityState:t||r,title:i,type:"heartbeat",viewHeight:o,pageHeight:pe(it)});this._sendPackage({type:"heartbeat",data:a,transport:"beacon",afterThePage:!0})}}),Object.defineProperty(e.prototype,"setExperience",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.experienceInstance=e}}),Object.defineProperty(e.prototype,"page",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=(new Date).getTime();this.sendPageFlag=!1,Bt(!0),lt("page",ft()),lt("initPage",ft()),lt("yMax",Te(it,it.document.documentElement)),"pn"===e?(lt("isNV",!Vn()),Ut(!0),Dt(["pvn","vn","nid"],[1,+Vt()+1,1])):Dt("pvn",Wt()?+Wt()+1:1),Dt(["lastUpdateTime","lastActionTime","toFlag","pageList"],[i,i,0,Yt()]);var r=ei(),o=L(L(L(L({},this._getBaseData()),this._getDefaultData()),this._getOldSession()),{type:"page",vn:Vt(),pvn:Wt(),readLineStart:this._getReadlineStart(),readLineEnd:this._getReadlineEnd(),viewHeight:this._getDeviceHeight(),pageHeight:pe(it),renderedVersions:Un(nt.sid),visitReferrer:Gt(),matchedDomain:at.domain});r&&(o.optimize=r);var a=function(e){var i,r=n._getExperienceListForResponse(e);null===(i=n.experienceInstance)||void 0===i||i.render(r),function(e){vt()&&((null==e?void 0:e.some((function(e){var t;return null===(t=e.versions)||void 0===t?void 0:t.some((function(e){var t;return!e.controlGroup&&(null===(t=e.terminals)||void 0===t?void 0:t.some((function(e){var t;return(null===(t=null==e?void 0:e.inline)||void 0===t?void 0:t.length)||(null==e?void 0:e.redirect)})))}))})))||mt())}(r),t&&"function"==typeof t&&t(e),it.__pt_inspectorMode&&to.execResponseFromApi(e)};this._sendPackage({type:"page",data:o,afterThePage:!1,callback:a,rejectCallback:function(){n._sendPackage({type:"page",data:o,afterThePage:!1,callback:a,rejectCallback:function(e,t,n){mt(),Ct({module:"api",message:"Send package failed, type: page, traceId: ".concat(n,", status: ").concat(e,", statusText: ").concat(t,", cookieEnableStatus: ").concat(xt())})}})}})}}),Object.defineProperty(e.prototype,"heartBeat",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!(Yn((new Date).getTime())&&(Jn(),(at.hbCount+5)*+s<at.silentTime))){!e&&lt("hbCount",at.hbCount+1),st();var t="number"==typeof e?e:1===Mt()?-1*at.silentTime+1:s;this._sendHeartbeatPackage(t,e?"hidden":void 0)}}}),Object.defineProperty(e.prototype,"track",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n,i,r,o=this,a=null===(t=e.events)||void 0===t?void 0:t.map((function(e){return"string"==typeof e.eventName&&(e.eventName=q(e.eventName).substring(0,512)),e})),l=L(L(L(L({type:"track"},this._getBaseData()),this._getDefaultData()),this._getOldSession()),{visitReferrer:Gt(),events:a,renderedVersions:Un(nt.sid)});if(e.cssSelector){var c=e.stayTime,s=at.mouseCoo,u=at.srcElementAbsLeft,p=at.srcElementAbsTop;l.clickDetail=L(L({},this._getAttentionBaseData(c)),{relativeX:this._getRelativePosition(s.x),relativeY:this._getRelativePosition(s.y),absoluteX:u,absoluteY:p,viewWidth:ve(it),viewHeight:this._getDeviceHeight(),pageHeight:pe(it),selector:e.cssSelector,interactionType:null!==(n=e.interactionType)&&void 0!==n?n:0,oe:0})}(null==a?void 0:a.length)&&it.__pt_inspectorMode&&to.sendTrackEvent(a,null!==(i=e.cssSelector)&&void 0!==i?i:""),this._sendPackage({type:"track",data:l,callback:function(t){var n;at.sandboxFlag||(null===(n=o.experienceInstance)||void 0===n||n.render(o._getExperienceListForResponse(t)),e.callback&&"function"==typeof e.callback&&e.callback(t),it.__pt_inspectorMode&&to.execResponseFromApi(t))},rejectCallback:function(e,t,n){Ct({module:"api",message:"Send package failed, traceId: ".concat(n,", type: page, status: ").concat(e,", statusText: ").concat(0===e?"XMLHttpRequest blocked by CORS or other error":t)})},transport:null===(r=e.params)||void 0===r?void 0:r.transport,afterThePage:!1})}}),Object.defineProperty(e.prototype,"click",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.cssSelector,n=e.stayTime,i=e.interactionType,r=at.mouseCoo,o=at.srcElementAbsLeft,a=at.srcElementAbsTop,l=L(L(L({},this._getBaseData()),this._getAttentionBaseData(n)),{title:this._getDefaultData().title,type:"click",relativeX:this._getRelativePosition(r.x),relativeY:this._getRelativePosition(r.y),absoluteX:o,absoluteY:a,viewWidth:ve(it),viewHeight:this._getDeviceHeight(),pageHeight:pe(it),selector:t,oe:0,stayTime:n,interactionType:i});this._sendPackage({type:"click",data:l,transport:"beacon",afterThePage:!0})}}),Object.defineProperty(e.prototype,"scroll",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!1);var n=this._getDeviceHeight(),i=L(L(L({},this._getBaseData()),this._getAttentionBaseData(e)),{title:this._getDefaultData().title,end:t?1:void 0,type:"scroll",viewHeight:n,pageHeight:pe(it)});this._sendPackage({type:"scroll",data:i,transport:"beacon",afterThePage:!0})}}),Object.defineProperty(e.prototype,"engage",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i,r,o=this,a="xhr",l=L(L(L(L({type:"engage"},this._getBaseData()),this._getDefaultData()),{visitReferrer:Gt(),renderedVersions:Un(nt.sid)}),e);if((null===(n=e.config)||void 0===n?void 0:n.events)&&(null===(i=e.config)||void 0===i?void 0:i.events.length)>0){var c=L(L(L(L({type:"track"},this._getBaseData()),this._getDefaultData()),this._getOldSession()),{events:e.config.events,visitReferrer:Gt(),renderedVersions:Un(nt.sid)});if(e.config.cssSelector){var s=at.mouseCoo,u=at.srcElementAbsLeft,p=at.srcElementAbsTop;c.clickDetail={relativeX:this._getRelativePosition(s.x),relativeY:this._getRelativePosition(s.y),absoluteX:u,absoluteY:p,viewWidth:ve(it),viewHeight:me(it),pageHeight:pe(it),selector:e.config.cssSelector,interactionType:null!==(r=e.config.interactionType)&&void 0!==r?r:0,oe:0,readLineStart:this._getReadlineStart(),readLineEnd:this._getReadlineEnd(),stayTime:e.config.stayTime}}l.track=c}delete l.config,delete l.transport,e.transport&&(a=e.transport),this._sendPackage({type:"engage",data:l,transport:a,callback:function(n){var i,r,a,c;(l.track||n&&"view"===l.engageAction)&&(null===(i=o.experienceInstance)||void 0===i||i.render(o._getExperienceListForResponse(n)),it.__pt_inspectorMode&&(to.execResponseFromApi(n),"view"===l.engageAction&&to.showExperience(e.engageId,e.engageVersionId),l.track&&to.sendTrackEvent(null===(r=e.config)||void 0===r?void 0:r.events,null!==(c=null===(a=null==e?void 0:e.config)||void 0===a?void 0:a.cssSelector)&&void 0!==c?c:""))),t&&"function"==typeof t&&t(n)},afterThePage:!0})}}),Object.defineProperty(e.prototype,"identify",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this;if(void 0!==e){if("string"!=typeof e&&"number"!=typeof e){try{Ct({module:"api",message:"Identify params accountId type invalid, accountId: "+e.toString()})}catch(e){}return}if("number"==typeof e&&(e=e.toString()),e.length>512){try{Ct({module:"api",message:"Identify params accountId over length, accountId:\n                        ".concat(e.slice(0,512),"\n                         ...")})}catch(e){"Ptengine identify parameter length overflow, The maximum length is ".concat(512,".")}return}Dt("accountId",e)}var r=L(L(L(L({type:"identify"},this._getBaseData()),this._getDefaultData()),this._getOldSession()),{visitReferrer:Gt(),renderedVersions:Un(nt.sid),properties:t});n&&(r.source=n),this._sendPackage({type:"identify",data:r,afterThePage:!0,callback:function(e){var t;at.sandboxFlag||(e&&(null===(t=i.experienceInstance)||void 0===t||t.render(i._getExperienceListForResponse(e))),it.__pt_inspectorMode&&to.execResponseFromApi(e))},rejectCallback:function(e,t,n){Ct({module:"api",message:"Send package failed, traceId: ".concat(n,", type: page, status: ").concat(e,", statusText: ").concat(0===e?"XMLHttpRequest blocked by CORS or other error":t)})}})}}),Object.defineProperty(e.prototype,"performance",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;setTimeout((function(){var t=function(e){var t,n={},i=null===(t=e.performance||e.webkitPerformance)||void 0===t?void 0:t.timing;return i?(0===i.navigationStart||(n.loadPageTime=i.domInteractive-i.navigationStart,n.requestTime=i.responseEnd-i.requestStart,n.loadEventTime=i.loadEventEnd-i.loadEventStart,n.redirectTime=i.redirectEnd-i.redirectStart,n.dnsTime=i.domainLookupEnd-i.domainLookupStart,n.ttfbTime=i.responseStart-i.navigationStart,n.appcacheTime=i.domainLookupStart-i.fetchStart,n.unloadTime=i.unloadEventEnd-i.unloadEventStart,n.tcpTime=i.connectEnd-i.connectStart,n.reqTime=i.responseEnd-i.responseStart,n.domComplete=i.domComplete-i.domInteractive,n.blankTime=(i.domInteractive||i.domLoading)-i.fetchStart,n.domContentLoadedEventEnd=i.domContentLoadedEventEnd-i.fetchStart,n.loadEventStart=i.loadEventStart-i.navigationStart,n.firstRequestTime=i.responseStart-i.requestStart,n.fetchStart=i.fetchStart-i.navigationStart,n.domInteractive=i.domInteractive-i.navigationStart,n.domContentLoadedEventStart=i.domContentLoadedEventStart-i.navigationStart),n):n}(it),n=t.blankTime,i=t.loadPageTime;if(void 0!==i){var r=L(L({type:"performance"},e._getBaseData()),{loadPageTime:i});n&&(r.blankTime=n),e._sendPackage({type:"performance",data:r,transport:"beacon",afterThePage:!1})}}))}}),Object.defineProperty(e.prototype,"redirect",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=(new Date).getTime();Bt(!0),lt("yMax",Te(it,it.document.documentElement)),at.isNV&&(Ut(!0),Dt(["pvn","vn","nid"],[1,+Vt()+1,1])),Dt(["lastUpdateTime","lastActionTime","toFlag","pageList"],[n,n,0,Yt()]);var i=ei(),r=L(L(L(L({},this._getBaseData()),this._getDefaultData()),this._getOldSession()),{type:"redirect",engageId:e.engageId,engageVersionId:e.engageVersionId,pvn:Wt(),toUrl:e.toUrl,visitReferrer:Gt(),vn:Vt()});i&&(r.optimize=i),this._sendPackage({type:"redirect",data:r,transport:"beacon",afterThePage:!1,callback:t})}}),Object.defineProperty(e.prototype,"form",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r,o){var a={field:e,sid:Nt(),engageID:t,engageVersion:n,configVersion:"3.0",creativeID:i};this._sendPackage({type:"form",data:a,callback:r,rejectCallback:o,afterThePage:!0})}}),Object.defineProperty(e.prototype,"addCallbackToWaitList",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&"function"==typeof e&&(this.sendPageFlag||at.sandboxFlag?e():this.callbackList.push(e))}}),e}(),ai=new oi;var li={copySuccessfully:{zh:"",ja:"",en:"Copy successfully!"},previewExpiredTitle:{zh:"-  -",ja:"- URL -",en:"- Preview URL expired -"},previewExpiredContent:{zh:"",ja:"URL",en:"This preview URL has expired. Please generate a new URL to preview."},previewExpiredButton:{zh:"",ja:"",en:"Confirm"},form_error_tips_normal:{zh:"",ja:"",en:"Please input your answer."},form_error_tips_name_required:{zh:"",ja:"",en:"Please input a name."},form_error_tips_email_required:{zh:"",ja:"",en:"Please input an email."},form_error_tips_phone_required:{zh:"",ja:"",en:"Please input a phone number."},form_error_tips_dropdown_required:{zh:"",ja:"",en:"Please select your answer."},form_error_tips_email_invalid:{zh:"",ja:"",en:"Please input a valid email."},form_error_tips_phone_invalid:{zh:"",ja:"",en:"Please input a valid phone number."},form_error_tips_duplicate:{zh:"",ja:"",en:"This answer was already submitted. Please try another."},form_error_tips_name_duplicate:{zh:"",ja:"",en:"This name was already submitted. Please try another."},form_error_tips_email_duplicate:{zh:"",ja:"",en:"This email was already submitted. Please try another."},form_error_tips_phone_duplicate:{zh:"",ja:"",en:"This phone number was already submitted. Please try another."}},ci=null===(ri=it.navigator.userLanguage||it.navigator.language)||void 0===ri?void 0:ri.toLocaleLowerCase().substring(0,2);function si(e){var t,n;return(null===(t=li[e])||void 0===t?void 0:t[ci])||(null===(n=li[e])||void 0===n?void 0:n.en)||""}var ui={deviceType:["PC","SMARTPHONE"],enableABTest:0,engageId:"1370c05c-6930-445f-814e-02d7b8633046",engageVersion:"4.0",previewId:"60cf6a04",engageName:"",hasVariant:0,isVersionEvent:0,heatmapVersion:!1,schedule:[],timezone:"",trafficMode:"AVERAGE",triggerFlag:1,updateTime:Date.now(),versions:[{controlGroup:0,versionName:"Variation 1",versionId:"0828286a-aa4b-4d0b-aa15-6b1222258e45",rate:1,terminals:[{type:1,status:1,popup:[{type:"popup",popupId:"popup_0b50bd5b",popupName:"Popup 1",popupHasError:!1,popupHasForm:!1,widgets:[{widgetId:"pt_e59ab2b6",widgetSettings:{position:"pos-center",stickyMode:"float",height:80,hideShadow:"show",showMask:!0},widgetNodes:{html:'<div data-silex-type="container-element" data-silex-id="silex-id-1594006965020-1" data-engage-block="engage" data-engage-position="pos-center" data-engage-position-mode="float" data-engage-showmask="true" data-engage-widget-id="7814cdcc-94ac-4620-9eac-d92ccc1bafc8" data-lx-popup-name="Step 1" data-lx-popup-visible="true" data-lx-popup-mask-close-action-enabled="true" class="prevent-droppable prevent-draggable prevent-selectable prevent-resizable container-element editable-style silex-id-1594006965020-1 section-element page-page-1 popup-container-element" style="z-index: 1200; background-color: rgba(0, 22, 72, 0.6);">\n      <div data-silex-type="container-element" class="editable-style container-element silex-element-content silex-container-content website-width prevent-draggable silex-id-1593965174600-15 popup-content-element" data-silex-id="silex-id-1593965174600-15" data-menu-action="insert.popup" style="min-width: 300px; max-width: 480px; min-height: 200px; background-image: unset; background-color: rgb(255, 255, 255); height: 200px; left: 50%; top: 50%; transform: translate(-50%, -50%); position: fixed; width: 300px; max-height: 200px; border-radius: 12px; box-shadow: rgba(0, 0, 0, 0.4) 0px 12px 27px 2px; letter-spacing: 0px; visibility: visible; bottom: initial; right: initial;">\n        <div data-silex-type="text-element" class="silex-use-height-not-minheight editable-style silex-id-1598239420586-3 text-element page-page-1 paged-element" data-silex-id="silex-id-1598239420586-3" data-lx-img-width="undefined" data-lx-img-height="undefined" data-engage-block="button-close" data-engage-action-close="true" data-menu-action="insert.close" style="z-index: 99999;" data-close-style="styleB" contenteditable="false">\n          <div class="silex-element-content" style="min-height: inherit; height: 100%; width: 100%; overflow: visible;">\n              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve" style="width: 100%; fill: rgb(0, 0, 0);"><rect x="0" y="0" style="fill:none;" width="16" height="16"></rect><path d="M8.8,8l4.5-4.5c0.2-0.2,0.2-0.6,0-0.8c-0.2-0.2-0.6-0.2-0.8,0L8,7.2L3.5,2.7c-0.2-0.2-0.6-0.2-0.8,0c-0.2,0.2-0.2,0.6,0,0.8 L7.2,8l-4.5,4.5c-0.2,0.2-0.2,0.6,0,0.8s0.6,0.2,0.8,0L8,8.8l4.5,4.5c0.2,0.2,0.6,0.2,0.8,0s0.2-0.6,0-0.8L8.8,8z"></path></svg>\n          </div>\n        </div>\n    <div data-silex-type="text-element" class="editable-style silex-id-1657257765492-0 text-element page-page-1 paged-element" data-silex-id="silex-id-1657257765492-0" data-lx-img-width="undefined" data-lx-img-height="undefined" data-menu-action="insert.text" style="" contenteditable="false"><div class="silex-element-content" style="min-height: inherit; height: 100%; width: 100%; overflow: visible; z-index: 10000;"><div><p style="text-align: center; color: #001648; line-height: 1.4; margin: 0;"><span style="font-size: 20px; color: rgb(132, 132, 132);">'.concat(si("previewExpiredTitle"),'</span></p></div></div></div><div data-silex-type="text-element" class="editable-style silex-id-1657257830972-1 text-element page-page-1 paged-element" data-silex-id="silex-id-1657257830972-1" data-lx-img-width="undefined" data-lx-img-height="undefined" data-menu-action="insert.text" style="" contenteditable="false"><div class="silex-element-content" style="min-height: inherit; height: 100%; width: 100%; overflow: visible; z-index: 10000;"><div><p style="text-align: center; color: #001648; line-height: 1.4; margin: 0;"><span style="font-size: 16px; color: rgb(132, 132, 132);">').concat(si("previewExpiredContent"),'</span></p></div></div></div><div data-silex-type="text-element" class="editable-style silex-id-1657257912334-2 text-element page-page-1 paged-element" data-silex-id="silex-id-1657257912334-2" data-menu-action="insert.button" style="" contenteditable="false" data-engage-action="{&quot;enableClickAction&quot;:true,&quot;enableTrackEvent&quot;:false,&quot;clickActionType&quot;:&quot;closePopup&quot;,&quot;clickActionConfig&quot;:{}}"><div class="silex-element-content" style="min-height: inherit; height: 100%; width: 100%; overflow: visible;"><div class="lxe-sidebar-btn" style="box-sizing: border-box; align-items: center; display: flex; justify-content: center; height: 100%; width: 100%; min-height: inherit; padding-right: 8px; padding-left: 8px; background-color: rgb(0, 169, 46); color: white; border-color: transparent; font-size: 18px; text-align: center; border-radius: 3px;"><span data-lx-contenteditable="" class="" style="z-index: 10000; font-size: 16px;">').concat(si("previewExpiredButton"),"</span></div></div></div></div>\n    </div>"),css:"\n        .popup-container-element {\n            z-index: 2147483647 !important;\n        }\n     .popup-container-element .popup-content-element {\n                position: relative;\n                overflow: initial;\n            }\n            .editable-style {\n                position: absolute;\n            }\n        .ptx-group-style {\n            position: absolute;\n            box-sizing: content-box;\n        }\n        /*Shape style*/\n        [data-menu-action=\"insert.shape\"] svg,\n        [data-menu-action=\"insert.icon\"] svg{\n            width: 100% !important;\n            height: 100% !important;\n        }\n        /*Form style*/\n        .field {\n            font-size: 14px;\n        }\n        .field.is-horizontal {\n            display: flex;\n            flex-direction: row;\n            align-items: center;\n        }\n        .field.is-horizontal .label {\n            margin-bottom: 0;\n        }\n        .field .label {\n            color: #091e42;\n            display: block;\n            font-size: inherit;\n            font-weight: 700;\n            padding: 0;\n        }\n        .is-horizontal .lx-fix-width {\n            width: 100px;\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n        }\n        .label:not(:last-child) {\n            margin-bottom: 0.5em;\n        }\n        .control {\n            box-sizing: border-box;\n            clear: both;\n            font-size: 1rem;\n            position: relative;\n            text-align: left;\n            flex: 1;\n        }\n        .control .input, .textarea, .select select {\n            padding-bottom: calc(0.375em - 1px);\n            padding-left: calc(0.625em - 1px);\n            padding-right: calc(0.625em - 1px);\n            padding-top: calc(0.375em - 1px);\n            max-width: 100%;\n            width: 100%;\n            background-color: #fff;\n            border-color: #dbdbdb;\n            border-radius: 0px;\n            color: #091e42;\n            outline: 0;\n            box-sizing: border-box;\n        }\n\n        .error {\n            display: none;\n            color: #ef5350;\n            font-size: 13px;\n            font-weight: 300;\n        }\n        .control .underline {\n            border-top: none !important;\n            border-left: none !important;\n            border-right: none !important;\n            box-shadow: none;\n\n        }\n        .required, .allow-duplicate, .email_fail, .phone_fail{\n            display: block;\n        }\n        .email_fail::after {\n            content: 'Please input a valid Email.';\n            display: block;\n            color: #ef5350;\n        }\n        .phone_fail::after {\n            content: 'Please input a valid phone number.';\n            display: block;\n            color: #ef5350;\n        }\n        .required::after {\n            content: 'Please input a value';\n            display: block;\n            color: #ef5350;\n        }\n        .allow-duplicate::after {\n            content: 'This value was already submitted. Please try another.';\n            display: block;\n            color: #ef5350;\n        }\n        .control .input::placeholder,\n        .control .input::-webkit-input-placeholder,\n        .control .input::-ms-input-placeholder,\n        .control .input::-moz-placeholder,\n        .control .textarea::placeholder,\n        .control .textarea::-webkit-input-placeholder,\n        .control .textarea::-ms-input-placeholder,\n        .control .textarea::-moz-placeholder  {\n            color: var(--placeholder);\n        }\n        .control .select select:required:invalid {\n            color: var(--placeholder) !important;\n        }\n        .select select {\n            width: 100%;\n            appearance: none;\n            -webkit-appearance: none;\n            -moz-appearance: none;\n            -ms-expand: none;\n\n        }\n        .select::after {\n            content: '';\n            position: absolute;\n            border-top: 6px solid #c1c7d0;\n            border-left: 6px solid transparent;\n            border-right: 6px solid transparent;\n            right: 8px;\n            height: 8px;\n            top: 40%;\n        }\n        .select select option:disabled {\n            display: none;\n        }\n        .button, .textarea, .select select {\n            align-items: center;\n            border: 1px solid #0000;\n            border-radius: 0px;\n          /*  box-shadow: none;*/\n            display: inline-flex;\n            font-size: inherit;\n            height: 2.25em;\n            justify-content: flex-start;\n            line-height: 1.5;\n            padding-bottom: calc(0.375em - 1px);\n            padding-left: calc(0.625em - 1px);\n            padding-right: calc(0.625em - 1px);\n            padding-top: calc(0.375em - 1px);\n            position: relative;\n            vertical-align: top;\n        }\n        .select select {\n           outline: none;\n        }\n            h1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n    padding: 0;\n    margin: 0;\n    font-size: 100%;\n    font-weight: normal;\n}\ndl,\ndt,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nul,\nol,\nli,\np,\npre,\nheader,\nsection,\nfooter,\naside,\nnav,\nmenu,\narticle,\nfigure {\n    padding: 0;\n    margin: 0;\n}\nspan,\nstrong{\n    color: inherit;\n    font-weight: inherit;\n    font-size: inherit\n}\nul {\n    list-style-type: disc;\n}\na {\n    text-decoration: none;\n    overflow: initial;\n    background-color: transparent;\n}\n\na:hover {\n    text-decoration: none;\n}\n\na:focus,\ninput:focus {\n    outline: none;\n}\n            \n        .silex-id-1594006965020-1 {\n    position: absoulte; \n    left: 0px; \n    top: 0px; \n    right: 0px; \n    bottom: 0px; \n    background: #0016484d; \n}\n.silex-id-1598239420586-3 {\n    width: 20px; \n    height: 20px; \n    cursor: pointer; \n    zIndex: 999999; \n    top: 4px; \n    left: 274px; \n}\n.silex-id-1657257765492-0 {\n    width: 299.5px; \n    word-wrap: break-word; \n    top: 33px; \n    left: 0px; \n}\n.silex-id-1657257830972-1 {\n    width: 299px; \n    word-wrap: break-word; \n    top: 81px; \n    left: 0px; \n}\n.silex-id-1657257912334-2 {\n    width: 121px; \n    min-height: 37px; \n    top: 144px; \n    left: 89.5px; \n}\n"},widgetHasForm:!1,widgetHasError:!1}],trigger:{start:[],stop:[]}}],stickybar:[],inline:[],code:[]},{type:2,status:1,popup:[{type:"popup",popupId:"popup_0b50bd5b",popupName:"Popup 1",popupHasError:!1,popupHasForm:!1,widgets:[{widgetId:"pt_e59ab2b6",widgetSettings:{position:"pos-center",stickyMode:"float",height:80,hideShadow:"show",showMask:!0},widgetNodes:{html:'<div data-silex-type="container-element" data-silex-id="silex-id-1594006965020-1" data-engage-block="engage" data-engage-position="pos-center" data-engage-position-mode="float" data-engage-showmask="true" data-engage-widget-id="7814cdcc-94ac-4620-9eac-d92ccc1bafc8" data-lx-popup-name="Step 1" data-lx-popup-visible="true" data-lx-popup-mask-close-action-enabled="true" class="prevent-droppable prevent-draggable prevent-selectable prevent-resizable container-element editable-style silex-id-1594006965020-1 section-element page-page-1 popup-container-element" style="z-index: 1200; background-color: rgba(0, 22, 72, 0.6);">\n      <div data-silex-type="container-element" class="editable-style container-element silex-element-content silex-container-content website-width prevent-draggable silex-id-1593965174600-15 popup-content-element" data-silex-id="silex-id-1593965174600-15" data-menu-action="insert.popup" style="min-width: 480px; max-width: 480px; min-height: 200px; background-image: unset; background-color: rgb(255, 255, 255); height: 200px; left: 50%; top: 50%; transform: translate(-50%, -50%); position: fixed; width: 480px; max-height: 200px; border-radius: 12px; box-shadow: rgba(0, 0, 0, 0.4) 0px 12px 27px 2px; letter-spacing: 0px; visibility: visible; bottom: initial; right: initial;">\n        <div data-silex-type="text-element" class="silex-use-height-not-minheight editable-style silex-id-1598239420586-3 text-element page-page-1 paged-element" data-silex-id="silex-id-1598239420586-3" data-lx-img-width="undefined" data-lx-img-height="undefined" data-engage-block="button-close" data-engage-action-close="true" data-menu-action="insert.close" style="z-index: 99999;" data-close-style="styleB" contenteditable="false">\n          <div class="silex-element-content" style="min-height: inherit; height: 100%; width: 100%; overflow: visible;">\n              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve" style="width: 100%; fill: rgb(0, 0, 0);"><rect x="0" y="0" style="fill:none;" width="16" height="16"></rect><path d="M8.8,8l4.5-4.5c0.2-0.2,0.2-0.6,0-0.8c-0.2-0.2-0.6-0.2-0.8,0L8,7.2L3.5,2.7c-0.2-0.2-0.6-0.2-0.8,0c-0.2,0.2-0.2,0.6,0,0.8 L7.2,8l-4.5,4.5c-0.2,0.2-0.2,0.6,0,0.8s0.6,0.2,0.8,0L8,8.8l4.5,4.5c0.2,0.2,0.6,0.2,0.8,0s0.2-0.6,0-0.8L8.8,8z"></path></svg>\n          </div>\n        </div>\n    <div data-silex-type="text-element" class="editable-style silex-id-1657257765492-0 text-element page-page-1 paged-element" data-silex-id="silex-id-1657257765492-0" data-lx-img-width="undefined" data-lx-img-height="undefined" data-menu-action="insert.text" style="" contenteditable="false"><div class="silex-element-content" style="min-height: inherit; height: 100%; width: 100%; overflow: visible; z-index: 10000;"><div><p style="text-align: center; color: #001648; line-height: 1.4; margin: 0;"><span style="font-size: 20px; color: rgb(132, 132, 132);">'.concat(si("previewExpiredTitle"),'</span></p></div></div></div><div data-silex-type="text-element" class="editable-style silex-id-1657257830972-1 text-element page-page-1 paged-element" data-silex-id="silex-id-1657257830972-1" data-lx-img-width="undefined" data-lx-img-height="undefined" data-menu-action="insert.text" style="" contenteditable="false"><div class="silex-element-content" style="min-height: inherit; height: 100%; width: 100%; overflow: visible; z-index: 10000;"><div><p style="text-align: center; color: #001648; line-height: 1.4; margin: 0;"><span style="font-size: 16px; color: rgb(132, 132, 132);">').concat(si("previewExpiredContent"),'</span></p></div></div></div><div data-silex-type="text-element" class="editable-style silex-id-1657257912334-2 text-element page-page-1 paged-element" data-silex-id="silex-id-1657257912334-2" data-menu-action="insert.button" style="" contenteditable="false" data-engage-action="{&quot;enableClickAction&quot;:true,&quot;enableTrackEvent&quot;:false,&quot;clickActionType&quot;:&quot;closePopup&quot;,&quot;clickActionConfig&quot;:{}}"><div class="silex-element-content" style="min-height: inherit; height: 100%; width: 100%; overflow: visible;"><div class="lxe-sidebar-btn" style="box-sizing: border-box; align-items: center; display: flex; justify-content: center; height: 100%; width: 100%; min-height: inherit; padding-right: 8px; padding-left: 8px; background-color: rgb(0, 169, 46); color: white; border-color: transparent; font-size: 18px; text-align: center; border-radius: 3px;"><span data-lx-contenteditable="" class="" style="z-index: 10000; font-size: 16px;">').concat(si("previewExpiredButton"),"</span></div></div></div></div>\n    </div>"),css:"\n        .popup-container-element {\n            z-index: 2147483647 !important;\n        }\n     .popup-container-element .popup-content-element {\n                position: relative;\n                overflow: initial;\n            }\n            .editable-style {\n                position: absolute;\n            }\n        .ptx-group-style {\n            position: absolute;\n            box-sizing: content-box;\n        }\n        /*Shape style*/\n        [data-menu-action=\"insert.shape\"] svg,\n        [data-menu-action=\"insert.icon\"] svg{\n            width: 100% !important;\n            height: 100% !important;\n        }\n        /*Form style*/\n        .field {\n            font-size: 14px;\n        }\n        .field.is-horizontal {\n            display: flex;\n            flex-direction: row;\n            align-items: center;\n        }\n        .field.is-horizontal .label {\n            margin-bottom: 0;\n        }\n        .field .label {\n            color: #091e42;\n            display: block;\n            font-size: inherit;\n            font-weight: 700;\n            padding: 0;\n        }\n        .is-horizontal .lx-fix-width {\n            width: 100px;\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n        }\n        .label:not(:last-child) {\n            margin-bottom: 0.5em;\n        }\n        .control {\n            box-sizing: border-box;\n            clear: both;\n            font-size: 1rem;\n            position: relative;\n            text-align: left;\n            flex: 1;\n        }\n        .control .input, .textarea, .select select {\n            padding-bottom: calc(0.375em - 1px);\n            padding-left: calc(0.625em - 1px);\n            padding-right: calc(0.625em - 1px);\n            padding-top: calc(0.375em - 1px);\n            max-width: 100%;\n            width: 100%;\n            background-color: #fff;\n            border-color: #dbdbdb;\n            border-radius: 0px;\n            color: #091e42;\n            outline: 0;\n            box-sizing: border-box;\n        }\n\n        .error {\n            display: none;\n            color: #ef5350;\n            font-size: 13px;\n            font-weight: 300;\n        }\n        .control .underline {\n            border-top: none !important;\n            border-left: none !important;\n            border-right: none !important;\n            box-shadow: none;\n\n        }\n        .required, .allow-duplicate, .email_fail, .phone_fail{\n            display: block;\n        }\n        .email_fail::after {\n            content: 'Please input a valid Email.';\n            display: block;\n            color: #ef5350;\n        }\n        .phone_fail::after {\n            content: 'Please input a valid phone number.';\n            display: block;\n            color: #ef5350;\n        }\n        .required::after {\n            content: 'Please input a value';\n            display: block;\n            color: #ef5350;\n        }\n        .allow-duplicate::after {\n            content: 'This value was already submitted. Please try another.';\n            display: block;\n            color: #ef5350;\n        }\n        .control .input::placeholder,\n        .control .input::-webkit-input-placeholder,\n        .control .input::-ms-input-placeholder,\n        .control .input::-moz-placeholder,\n        .control .textarea::placeholder,\n        .control .textarea::-webkit-input-placeholder,\n        .control .textarea::-ms-input-placeholder,\n        .control .textarea::-moz-placeholder  {\n            color: var(--placeholder);\n        }\n        .control .select select:required:invalid {\n            color: var(--placeholder) !important;\n        }\n        .select select {\n            width: 100%;\n            appearance: none;\n            -webkit-appearance: none;\n            -moz-appearance: none;\n            -ms-expand: none;\n\n        }\n        .select::after {\n            content: '';\n            position: absolute;\n            border-top: 6px solid #c1c7d0;\n            border-left: 6px solid transparent;\n            border-right: 6px solid transparent;\n            right: 8px;\n            height: 8px;\n            top: 40%;\n        }\n        .select select option:disabled {\n            display: none;\n        }\n        .button, .textarea, .select select {\n            align-items: center;\n            border: 1px solid #0000;\n            border-radius: 0px;\n          /*  box-shadow: none;*/\n            display: inline-flex;\n            font-size: inherit;\n            height: 2.25em;\n            justify-content: flex-start;\n            line-height: 1.5;\n            padding-bottom: calc(0.375em - 1px);\n            padding-left: calc(0.625em - 1px);\n            padding-right: calc(0.625em - 1px);\n            padding-top: calc(0.375em - 1px);\n            position: relative;\n            vertical-align: top;\n        }\n        .select select {\n           outline: none;\n        }\n            h1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n    padding: 0;\n    margin: 0;\n    font-size: 100%;\n    font-weight: normal;\n}\ndl,\ndt,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nul,\nol,\nli,\np,\npre,\nheader,\nsection,\nfooter,\naside,\nnav,\nmenu,\narticle,\nfigure {\n    padding: 0;\n    margin: 0;\n}\nspan,\nstrong{\n    color: inherit;\n    font-weight: inherit;\n    font-size: inherit\n}\nul {\n    list-style-type: disc;\n}\na {\n    text-decoration: none;\n    overflow: initial;\n    background-color: transparent;\n}\n\na:hover {\n    text-decoration: none;\n}\n\na:focus,\ninput:focus {\n    outline: none;\n}\n            \n        .silex-id-1594006965020-1 {\n    position: absoulte; \n    left: 0px; \n    top: 0px; \n    right: 0px; \n    bottom: 0px; \n    background: #0016484d; \n}\n.silex-id-1598239420586-3 {\n    width: 20px; \n    height: 20px; \n    cursor: pointer; \n    zIndex: 999999; \n    top: 9px; \n    left: 449px; \n}\n.silex-id-1657257765492-0 {\n    width: 479.5px; \n    word-wrap: break-word; \n    top: 33px; \n    left: 0px; \n}\n.silex-id-1657257830972-1 {\n    width: 481.5px; \n    word-wrap: break-word; \n    top: 84px; \n    left: -2px; \n}\n.silex-id-1657257912334-2 {\n    width: 121px; \n    min-height: 37px; \n    top: 142px; \n    left: 179.5px; \n}\n"},widgetHasForm:!1,widgetHasError:!1}],trigger:{start:[],stop:[]}}],stickybar:[],inline:[],code:[]}]}],trigger:{start:[],stop:[],frequency:{type:"default"}},engageType:"POPUP"};function pi(e){var t=[];return e.querySelectorAll("[tabindex]").forEach((function(e){Number(e.getAttribute("tabindex"))>0&&t.push(e)})),t}function di(e){var t=[];if("all"!==e&&"normal"!==e||t.push.apply(t,pi(it.document)),"all"===e||"shadow-root"===e){var n=ne('[id^="ptxEngage_"]');n.length&&n.forEach((function(e){t.push.apply(t,pi(e))}))}return t.sort((function(e,t){return Number(e.getAttribute("tabindex"))-Number(t.getAttribute("tabindex"))})),t}function fi(e,t){var n=di("all"),i=it.document.querySelector("pt-experience");if(null==i||i.setAttribute("style","position: fixed;z-index:2147483647"),"Escape"===e){if(!n.length)return;for(var r=0;r<n.length;r++)if("insert.popup"===n[r].getAttribute("data-menu-action")){n[r].classList.add("data-focus"),n[r].focus();break}}if("Tab"===e&&"shadow-root"===t){var o=di("shadow-root");if(!o.length)return;var a=o[0];a.classList.add("data-focus"),a.focus()}"render"===e&&"shadow-root"===t&&i.focus(),setTimeout((function(){null==i||i.removeAttribute("style")}))}function hi(){var e,t=[],n=[].slice.call(it.document.querySelectorAll('[id^="ptxEngage_')),i=[].slice.call(ne('[id^="ptxEngage_'));if(F(F([],n,!0),i,!0).forEach((function(e){if(e.hasChildNodes()){var n=e.getAttribute("id"),i=n?n.includes("stickybar")?"z-index: 2147483637":"z-index: 2147483647":"",r="position: fixed; ".concat(i);e.setAttribute("tabindex","-1"),e.setAttribute("style",r),t.push(e)}})),t.length){for(var r,o=t.length,a=o-1;a>=0;a--)if(-1===(null===(e=t[a].getAttribute("id"))||void 0===e?void 0:e.indexOf("ptxEngage_stickybar_"))){r=t[a];break}(r||t[o-1]).focus(),setTimeout((function(){var e;t.forEach((function(e){e.removeAttribute("style")})),null===(e=it.document.querySelector("pt-experience"))||void 0===e||e.removeAttribute("style")}))}}function bi(e){for(var t=0,n=0,i=e;null!==i;)t+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent;var r=Math.max(it.document.body.scrollHeight,it.document.documentElement.scrollHeight);return{left:t,top:n,right:Math.max(it.document.body.scrollWidth,it.document.documentElement.scrollWidth)-t-e.offsetWidth,bottom:r-n-e.offsetHeight}}function vi(e,t){var n=Ye(t);return"keydown"===e&&("Enter"===t.key||"ArrowDown"===t.key&&"SELECT"===n.tagName)||"keyup"===e&&"Tab"===t.key&&("TEXTAREA"===n.tagName||"INPUT"===n.tagName)}function mi(e){var t,n=Ye(e);"Enter"===e.key&&"button-close"===n.getAttribute("data-engage-block")&&fi("Escape"),"Tab"===e.key&&(n.classList.remove("data-focus"),null===(t=it.document.querySelector("pt-experience"))||void 0===t||t.setAttribute("style","position: fixed;z-index:2147483647"))}function gi(e){var t,n=Ye(e);e.shiftKey||"Tab"!==e.key||"PT-EXPERIENCE"!==n.tagName||fi(e.key,"shadow-root"),"Escape"===e.key&&fi(e.key),"Tab"===e.key&&(n.classList.add("data-focus"),null===(t=it.document.querySelector("pt-experience"))||void 0===t||t.removeAttribute("style"))}function yi(){it.document.querySelectorAll(".data-focus").forEach((function(e){e.classList.remove("data-focus")})),ne(".data-focus").forEach((function(e){e.classList.remove("data-focus")}))}var wi=function(){function e(){var e;Object.defineProperty(this,"token",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Rr.setPreviewFlag(!0),this.token=null===(e=De(it.location.href))||void 0===e?void 0:e[d]}return Object.defineProperty(e.prototype,"_handlePreviewDataResponse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e&&JSON.parse(e);if(t.expired)return mt(),void this._renderExpired();this._render(t)}}),Object.defineProperty(e.prototype,"_renderExpired",{enumerable:!1,configurable:!0,writable:!0,value:function(){Rr.render([ui])}}),Object.defineProperty(e.prototype,"_handleDocumentClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Ye(e);t&&ot.emit(P.PAGE_ON_CLICK,{event:e,target:t})}}),Object.defineProperty(e.prototype,"_render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){window.PTX_PREVIEW_ID=e.cache.previewId;var t=e.cache;!t.versions&&t.version&&(t.versions=[t.version]),Rr.render([t])}}),Object.defineProperty(e.prototype,"_handleKeydownListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e){mi(e),vi("keydown",e)&&this._handleDocumentClick(e)}}),Object.defineProperty(e.prototype,"_handleKeyupListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e){gi(e),vi("keyup",e)&&this._handleDocumentClick(e)}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this;this.token?(Pt({url:"https://xbackend.ptengine.jp/preview/config?key=".concat(this.token),method:"GET",callback:function(t){return e._handlePreviewDataResponse(t)}}),ye(it.document,"click",(function(e){t._handleDocumentClick(e),yi()}),!0),ye(it.document,"keydown",(function(t){e._handleKeydownListener(t)}),!0),ye(it.document,"keyup",(function(t){e._handleKeyupListener(t)}),!0)):mt()}}),e}();var _i=Tt("ptengineDomain");function xi(){var e=it.document.referrer||it.name||"";return Ae(w)&&/^https?:\/\/(.*\.(ptengine|ptmind).(com|cn|jp)|localhost).*/gim.test(e)}function Oi(){var e,t;if(xi()){var n=it.document.referrer||it.name||"";return(_i=n&&"string"==typeof(t=n)&&/^https?:\/\/(.*\.(ptengine|ptmind).(com|cn|jp)|localhost).*/gim.test(t)&&/^http[s]?:\/\/((?!datatest|devx|x).)+\.(miapex|ptengine|ptmind)\.(com|jp|cn)/gim.test(t)&&(null===(e=null==n?void 0:n.match(/https?:\/\/([^\/]+)/i))||void 0===e?void 0:e[0])||it.name)&&Ot("ptengineDomain",_i),!0}return opener&&_i}function Ti(e,t){it.CustomEvent=it.CustomEvent||function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=it.document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return e.prototype=it.Event.prototype,e}();try{return new it.CustomEvent(e,t)}catch(e){return null}}function Pi(e,t){void 0===t&&(t=window),t.dispatchEvent&&"function"==typeof t.dispatchEvent?t.dispatchEvent(e):t.fireEvent&&"function"==typeof t.fireEvent&&t.fireEvent(e)}var Ei=function(){function e(){Object.defineProperty(this,"__sid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__ver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__doNotTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__start",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__area",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__isPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getIds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__antiFlicker",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__experience",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.__sid=nt.sid,this.__ver=I,this.__isPreview=!1,this.__experience={},this.__start=0,this.__antiFlicker=null,this.__area="jp",this.getIds=At}return Object.defineProperty(e.prototype,"__addPopupToRenderList",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.__experience[e]||(this.__experience[e]={}),this.__experience[e][t]=n,window.ptEngage||(window.ptEngage={}),window.ptEngage[e]=n,window.ptEngage[e].current=n,window.ptEngage[e].context={send:""},window.ptEngage[e]._handleClear=function(){ot.emit("".concat(P.CLEAR_POPUP,".").concat(t))}}}),Object.defineProperty(e.prototype,"__deletePopupFromTheRenderList",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i,r,o,a;null===(i=null===(n=this.__experience)||void 0===n?void 0:n[e])||void 0===i||delete i[t],0===Object.keys((null===(r=this.__experience)||void 0===r?void 0:r[e])||{}).length&&(null===(o=this.__experience)||void 0===o||delete o[e],null===(a=window.ptEngage)||void 0===a||delete a[e])}}),Object.defineProperty(e.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;this.__start=rt.getTime(),this.__area=Ee(e.scriptElement),this.__isPreview=null!==(t=e.isPreview)&&void 0!==t&&t,e.antiFlickerObj&&(this.__antiFlicker=e.antiFlickerObj),window[C]=this;var n=Ti("ptReady"),i=Ti("ptEventReady");n&&Pi(n,it.document),i&&Pi(i,it.document)}}),Object.defineProperty(e.prototype,"page",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.__isPreview||(e&&(lt("vUrl",e),lt("page",ft()),lt("initPage",ft())),ai.page("vpv"))}}),Object.defineProperty(e.prototype,"identify",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.__isPreview||ai.addCallbackToWaitList((function(){ai.identify(e,t)}))}}),Object.defineProperty(e.prototype,"track",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.__isPreview||ai.track({events:[{eventName:e,eventType:0,properties:t}],params:n})}}),Object.defineProperty(e.prototype,"showEngagement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){ot.emit("".concat(P.SHOW_POPUP,".").concat(e))}}),Object.defineProperty(e.prototype,"clearEngagement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.clearExperience(e)}}),Object.defineProperty(e.prototype,"showPopup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){ot.emit("".concat(P.SHOW_POPUP,".").concat(e))}}),Object.defineProperty(e.prototype,"clearPopup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){ot.emit("".concat(P.CLEAR_POPUP,".").concat(e))}}),Object.defineProperty(e.prototype,"clearExperience",{enumerable:!1,configurable:!0,writable:!0,value:function(e){ot.emit("".concat(P.CLEAR_EXPERIENCE,".").concat(e))}}),Object.defineProperty(e.prototype,"createCrossDomainUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return en(e)?tn(e):e}}),Object.defineProperty(e.prototype,"openWidget",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Zr.openWidget(null==e?void 0:e.position)}}),Object.defineProperty(e.prototype,"closeWidget",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===e&&(e="local"),Zr.closeWidget(e)}}),e}(),Si=new Ei,Ci=function(){function e(){Object.defineProperty(this,"ready",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interrupted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageSended",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ready=!1,this.interrupted=!1,this.pageSended=!1}return Object.defineProperty(e.prototype,"_checkUrlAndReferrer",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!xi()||(-1!==E.indexOf(nt.sid)||!(!it.location.href.match(/^https?:\/\/.*/)||/#_pt_capture/.test(it.location.href))&&!(!tt()&&/^http[s]?:\/\/((?!datatest|devx|x).)+\.(miapex|ptengine|ptmind)\.(com|jp|cn)/.test(it.document.referrer)))}}),Object.defineProperty(e.prototype,"_setInterrupted",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.text;var t=e.reason;this.interrupted=!0,t&&to.sendSdkInterruptedReason(t)}}),Object.defineProperty(e.prototype,"preInspection",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n;if("1"!==(null===(e=window.ptengine)||void 0===e?void 0:e.__doNotTrack))if((null===(t=window.ptengine)||void 0===t?void 0:t.__ver)!==I)if("1"!==(null===(n=it.navigator)||void 0===n?void 0:n.doNotTrack))if(at.domain)if(Ae(f,it))this._setInterrupted({text:"experience screenshot",reason:"usePtengineApp"});else if((i=Ie(d,it)||ke(d,it)&&-1===it.document.referrer.indexOf("hasRedirect=1"))&&(bt(!0),Si.init({isPreview:!0}),function(){var e,t,n,i,r=it.location.href,o=it.document.referrer;if(o&&-1===r.indexOf(d)&&"function"==typeof(null===(e=window.history)||void 0===e?void 0:e.replaceState)){var a=De(o),l=[];null===(t=Object.keys(a))||void 0===t||t.forEach((function(e){[d,"hasntiflicker","hasinline","hasredirect"].includes(null==e?void 0:e.toLocaleLowerCase())&&l.push("".concat(e,"=").concat(a[e]))}));var c=function(e,t){e=e.indexOf("http")>-1?e:"http://"+e;var n=new URL(e),i=n.search;return i+=i.indexOf("?")>-1?"&":"?",i+=t,n.search=i,n.toString()}(r,l.join("&"));"function"==typeof(null===(n=window.history)||void 0===n?void 0:n.replaceState)&&(null===(i=window.history)||void 0===i||i.replaceState(null,it.document.title,c))}}(),(new wi).start()),i)this._setInterrupted({text:"experience preview",reason:"usePtengineApp"});else{var i;if(!(it.document.referrer.indexOf(d)>-1))return Ae(b,it)||je(b,it)?(window[C]={__sid:nt.sid,__ver:I,__experience:{},page:function(){},identify:function(){},track:function(){},showEngagement:function(){},clearEngagement:function(){},showPopup:function(){},clearPopup:function(){},clearExperience:function(){},createCrossDomainUrl:function(){},openWidget:function(){},closeWidget:function(){}},void this._setInterrupted({text:"experience editor iframe",reason:"usePtengineApp"})):void(function(){var e,t=Ae(h,it);if(!t)try{t="ptengine_campaign_editor"===(window.name||(null===(e=null===window||void 0===window?void 0:window.parent)||void 0===e?void 0:e.name))}catch(e){}return t&&function(){if(!window._ptExperienceEditor){window._ptExperienceEditor={},Ot(On,nt.sid);var e=Ae("isdev",it)?"localhost:8082":"pteglobalstatic.ptengine.com/ptx-editor";ue(it.document,"".concat(location.protocol,"//").concat(e,"/inject.js"))}}(),t}()?this._setInterrupted({text:"experience editor",reason:"usePtengineApp"}):function(){var e=Ae(v,it),t=Ae("pt_cert",it);return!(!e||t||ti()||(function(){var e;if(!window._ptInsightHeatmap){window._ptInsightHeatmap={};var t=De(it.location.href),n="l"===(null===(e=null==t?void 0:t.ptengine_heatmap_token)||void 0===e?void 0:e.slice(0,1))||"-1"===(null==t?void 0:t.area)?"localhost:8000":"pti.ptengine.com";ue(it.document,"".concat(location.protocol,"//").concat(n,"/heatmap/inject.js?sid=").concat(nt.sid))}}(),0))}()?this._setInterrupted({text:"insight heatmap",reason:"usePtengineApp"}):this._checkUrlAndReferrer()?!function(){var e,t=null===(e=et("setSampleRate"))||void 0===e?void 0:e[1];if(t&&/^\d+$/.test(t.toString())){for(var n=$t(),i=22===n.length?n:We(n),r=[[1,2],[5,1],[8,1],[10,1],[13,1],[15,1],[19,1]].reduce((function(e,t){return e+i.substring(t[0],t[0]+t[1])}),""),o=0,a=0;o<r.length;){var l=r.charAt(7-o);a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/".indexOf(l)*Math.pow(64,o),o++}return a%Number(t)!=0}return!1}()||Oi()?this.ready=!0:this._setInterrupted({text:"insight sample",reason:"insightSample"}):this._setInterrupted({text:"url or referrer",reason:"usePtengineApp"}));this._setInterrupted({text:"experience redirect preview",reason:"usePtengineApp"})}else this._setInterrupted({text:"no match domain",reason:"domain"});else this._setInterrupted({text:"browser do not track",reason:"doNotrepeat"});else this._setInterrupted({text:"ptengine repeat",reason:"repeat"});else this._setInterrupted({text:"ptengine do not need track"})}}),e}(),Ii=new Ci,ki=function(){function e(e,t,n){Object.defineProperty(this,"codeList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vivaiProductSocialProof",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasSendCodeView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cssRollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"jsRollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.codeList=e,this.vivaiProductSocialProof=t,this.callback=n,this.cssRollBack=null,this.jsRollBack=null,this.hasSendCodeView=!1,this._init()}return Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.codeList.forEach((function(t){var n=t.code,i=t.type;if(n){var r=n;try{"javascript"===i&&e.vivaiProductSocialProof&&(r="var productSocialProof=".concat(JSON.stringify(e.vivaiProductSocialProof),"; ").concat(r))}catch(e){}e._apply(i,r),e.hasSendCodeView||(e.callback(),e.hasSendCodeView=!0)}}))}}),Object.defineProperty(e.prototype,"_getDocHead",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=it.document.getElementsByTagName("head")[0];if(!e){e=it.document.createElement("head");var t=it.document.body;ce(t.parentNode,e,t)}return e}}),Object.defineProperty(e.prototype,"_createStyleElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return ie(e)}}),Object.defineProperty(e.prototype,"_createScriptElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=null,n=null;try{t=new Function("element",e)}catch(e){n=e}return{jsJd:t,jsError:n}}}),Object.defineProperty(e.prototype,"_attachElementToHead",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._getDocHead();t.appendChild(e),this.cssRollBack=function(){t.removeChild(e)}}}),Object.defineProperty(e.prototype,"_addStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._createStyleElement(e);this._attachElementToHead(t)}}),Object.defineProperty(e.prototype,"_runScript",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._getDocHead(),n=document.createElement("script"),i="\n        try {\n            (function(){".concat(e,"})();\n        } catch (error) {\n            console.warn(error);\n        }");n.innerHTML=i,t.appendChild(n),t.removeChild(n)}}),Object.defineProperty(e.prototype,"_apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){switch(e){case"css":this._addStyle(t);break;case"javascript":jn(t)}}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;null===(e=this.cssRollBack)||void 0===e||e.call(this),null===(t=this.jsRollBack)||void 0===t||t.call(this)}}),e}(),ji=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,{exports:{}});ji.exports=function(){var e=6e4,t=36e5,n="millisecond",i="second",r="minute",o="hour",a="day",l="week",c="month",s="quarter",u="year",p="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},v=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},m={s:v,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+v(i,2,"0")+":"+v(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(i,c),o=n-r<0,a=t.clone().add(i+(o?-1:1),c);return+(-(i+(n-r)/(o?r-a:a-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:l,d:a,D:p,h:o,m:r,s:i,ms:n,Q:s}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",y={};y[g]=b;var w=function(e){return e instanceof T},_=function e(t,n,i){var r;if(!t)return g;if("string"==typeof t){var o=t.toLowerCase();y[o]&&(r=o),n&&(y[o]=n,r=o);var a=t.split("-");if(!r&&a.length>1)return e(a[0])}else{var l=t.name;y[l]=t,r=l}return!i&&r&&(g=r),r||!i&&g},x=function(e,t){if(w(e))return e.clone();var n="object"==A(t)?t:{};return n.date=e,n.args=arguments,new T(n)},O=m;O.l=_,O.i=w,O.w=function(e,t){return x(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function b(e){this.$L=_(e.locale,null,!0),this.parse(e)}var v=b.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(O.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(f);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return O},v.isValid=function(){return!(this.$d.toString()===d)},v.isSame=function(e,t){var n=x(e);return this.startOf(t)<=n&&n<=this.endOf(t)},v.isAfter=function(e,t){return x(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<x(e)},v.$g=function(e,t,n){return O.u(e)?this[t]:this.set(n,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var n=this,s=!!O.u(t)||t,d=O.p(e),f=function(e,t){var i=O.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return s?i:i.endOf(a)},h=function(e,t){return O.w(n.toDate()[e].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},b=this.$W,v=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(d){case u:return s?f(1,0):f(31,11);case c:return s?f(1,v):f(0,v+1);case l:var y=this.$locale().weekStart||0,w=(b<y?b+7:b)-y;return f(s?m-w:m+(6-w),v);case a:case p:return h(g+"Hours",0);case o:return h(g+"Minutes",1);case r:return h(g+"Seconds",2);case i:return h(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var l,s=O.p(e),d="set"+(this.$u?"UTC":""),f=(l={},l[a]=d+"Date",l[p]=d+"Date",l[c]=d+"Month",l[u]=d+"FullYear",l[o]=d+"Hours",l[r]=d+"Minutes",l[i]=d+"Seconds",l[n]=d+"Milliseconds",l)[s],h=s===a?this.$D+(t-this.$W):t;if(s===c||s===u){var b=this.clone().set(p,1);b.$d[f](h),b.init(),this.$d=b.set(p,Math.min(this.$D,b.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[O.p(e)]()},v.add=function(n,s){var p,d=this;n=Number(n);var f=O.p(s),h=function(e){var t=x(d);return O.w(t.date(t.date()+Math.round(e*n)),d)};if(f===c)return this.set(c,this.$M+n);if(f===u)return this.set(u,this.$y+n);if(f===a)return h(1);if(f===l)return h(7);var b=(p={},p[r]=e,p[o]=t,p[i]=1e3,p)[f]||1,v=this.$d.getTime()+n*b;return O.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var i=e||"YYYY-MM-DDTHH:mm:ssZ",r=O.z(this),o=this.$H,a=this.$m,l=this.$M,c=n.weekdays,s=n.months,u=function(e,n,r,o){return e&&(e[n]||e(t,i))||r[n].slice(0,o)},p=function(e){return O.s(o%12||12,e,"0")},f=n.meridiem||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i},b={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:O.s(l+1,2,"0"),MMM:u(n.monthsShort,l,s,3),MMMM:u(s,l),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,c,2),ddd:u(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:O.s(o,2,"0"),h:p(1),hh:p(2),a:f(o,a,!0),A:f(o,a,!1),m:String(a),mm:O.s(a,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:r};return i.replace(h,(function(e,t){return t||b[e]||r.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,p,d){var f,h=O.p(p),b=x(n),v=(b.utcOffset()-this.utcOffset())*e,m=this-b,g=O.m(this,b);return g=(f={},f[u]=g/12,f[c]=g,f[s]=g/3,f[l]=(m-v)/6048e5,f[a]=(m-v)/864e5,f[o]=m/t,f[r]=m/e,f[i]=m/1e3,f)[h]||m,d?g:O.a(g)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return y[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=_(e,t,!0);return i&&(n.$L=i),n},v.clone=function(){return O.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},b}(),P=T.prototype;return x.prototype=P,[["$ms",n],["$s",i],["$m",r],["$H",o],["$W",a],["$M",c],["$y",u],["$D",p]].forEach((function(e){P[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),x.extend=function(e,t){return e.$i||(e(t,T,x),e.$i=!0),x},x.locale=_,x.isDayjs=w,x.unix=function(e){return x(1e3*e)},x.en=y[g],x.Ls=y,x.p={},x}();var Ai=ji.exports,Di={exports:{}};!function(e,t){var n,i,r,o,a,l,c,s,u,p,d,f,h,b,v,m,g;e.exports=(a=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,s=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,u={years:l=31536e6,months:c=2592e6,days:o=864e5,hours:r=36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},p=function(e){return e instanceof g},d=function(e,t,n){return new g(e,n,t.$l)},f=function(e){return i.p(e)+"s"},h=function(e){return e<0},b=function(e){return h(e)?Math.ceil(e):Math.floor(e)},v=function(e){return Math.abs(e)},m=function(e,t){return e?h(e)?{negative:!0,format:""+v(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},g=function(){function e(e,t,n){var i=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return d(e*u[f(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==A(e))return Object.keys(e).forEach((function(t){i.$d[f(t)]=e[t]})),this.calMilliseconds(),this;if("string"==typeof e){var r=e.match(s);if(r){var o=r.slice(2).map((function(e){return null!=e?Number(e):0}));return this.$d.years=o[0],this.$d.months=o[1],this.$d.weeks=o[2],this.$d.days=o[3],this.$d.hours=o[4],this.$d.minutes=o[5],this.$d.seconds=o[6],this.calMilliseconds(),this}}return this}var t=e.prototype;return t.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(t,n){return t+(e.$d[n]||0)*u[n]}),0)},t.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=b(e/l),e%=l,this.$d.months=b(e/c),e%=c,this.$d.days=b(e/o),e%=o,this.$d.hours=b(e/r),e%=r,this.$d.minutes=b(e/6e4),e%=6e4,this.$d.seconds=b(e/1e3),e%=1e3,this.$d.milliseconds=e},t.toISOString=function(){var e=m(this.$d.years,"Y"),t=m(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var i=m(n,"D"),r=m(this.$d.hours,"H"),o=m(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3);var l=m(a,"S"),c=e.negative||t.negative||i.negative||r.negative||o.negative||l.negative,s=r.format||o.format||l.format?"T":"",u=(c?"-":"")+"P"+e.format+t.format+i.format+s+r.format+o.format+l.format;return"P"===u||"-P"===u?"P0D":u},t.toJSON=function(){return this.toISOString()},t.format=function(e){var t=e||"YYYY-MM-DDTHH:mm:ss",n={Y:this.$d.years,YY:i.s(this.$d.years,2,"0"),YYYY:i.s(this.$d.years,4,"0"),M:this.$d.months,MM:i.s(this.$d.months,2,"0"),D:this.$d.days,DD:i.s(this.$d.days,2,"0"),H:this.$d.hours,HH:i.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:i.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:i.s(this.$d.seconds,2,"0"),SSS:i.s(this.$d.milliseconds,3,"0")};return t.replace(a,(function(e,t){return t||String(n[e])}))},t.as=function(e){return this.$ms/u[f(e)]},t.get=function(e){var t=this.$ms,n=f(e);return"milliseconds"===n?t%=1e3:t="weeks"===n?b(t/u[n]):this.$d[n],0===t?0:t},t.add=function(e,t,n){var i;return i=t?e*u[f(t)]:p(e)?e.$ms:d(e,this).$ms,d(this.$ms+i*(n?-1:1),this)},t.subtract=function(e,t){return this.add(e,t,!0)},t.locale=function(e){var t=this.clone();return t.$l=e,t},t.clone=function(){return d(this.$ms,this)},t.humanize=function(e){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},e}(),function(e,t,r){n=r,i=r().$utils(),r.duration=function(e,t){var n=r.locale();return d(e,{$l:n},t)},r.isDuration=p;var o=t.prototype.add,a=t.prototype.subtract;t.prototype.add=function(e,t){return p(e)&&(e=e.asMilliseconds()),o.bind(this)(e,t)},t.prototype.subtract=function(e,t){return p(e)&&(e=e.asMilliseconds()),a.bind(this)(e,t)}})}(Di);var Ni=Di.exports;Ai.extend(Ni);var Li=["days","hours","minutes","seconds","milliseconds"];function Ri(e){if(e){var t,n,i=function(e){return{mode:e.dataset.CountDownMode||"CountDown",showUnit:e.dataset.CountDownShowUnit?G(Li.map((function(t){var n,i;return[t,-1!==(null===(i=null===(n=null==e?void 0:e.dataset)||void 0===n?void 0:n.CountDownShowUnit)||void 0===i?void 0:i.split("-").indexOf(t))]}))):{days:!1,hours:!0,minutes:!0,seconds:!0,milliseconds:!1},isShowLabel:"false"!==e.dataset.CountDownIsShowLabel,showLabel:e.dataset.CountDownShowLabel?G(e.dataset.CountDownShowLabel.split("-").map((function(e){return e.split(":")}))):G(Li.map((function(e){return[e,e.charAt(0).toUpperCase()+e.slice(1)]}))),behaviorAfter:e.dataset.CountDownBehaviorAfter||"keep",endDate:e.dataset.CountDownEndDate||Ai(Ai().format("YYYY-MM-DD")).add(1,"day").add(12,"hour").toString(),timeZone:"Project timezone",countDown:e.dataset.CountDownTime?Number(e.dataset.CountDownTime):0,countDownUnit:e.dataset.CountDownUnit?e.dataset.CountDownUnit:"minutes"}}(e);t="CountDown"===i.mode?e.dataset.CountDownStartTime?Ai.duration(Ai(e.dataset.CountDownStartTime).add(Number(i.countDown),i.countDownUnit).diff(Ai())):Ai.duration(Number(i.countDown),i.countDownUnit):Ai.duration(Ai(i.endDate).diff(Ai())),n="CountDown"===i.mode?e.dataset.CountDownStartTime?Ai.duration(Number(i.countDown),i.countDownUnit):t:e.dataset.CountDownStartTime?Ai.duration(Ai(i.endDate).diff(Ai(e.dataset.CountDownStartTime))):t;var r=2,o=G(Li.filter((function(e){return i.showUnit[e]})).map((function(e,i){var o=t.as(e);if(t=t.subtract(0|o,e),"milliseconds"===e&&(o=o/10|0),0===i){r=String(0|n.as(e)).length;var a=n.as(e);a%1==0&&a===Math.pow(10,r-1)&&(r-=1),r<2&&(r=2)}return[e,0|o]}))),a=Object.values(o).every((function(e){return 0===e}))||Object.values(o).some((function(e){return e<0}));if(Object.values(o).some((function(e){return e<0})))for(var l in o)o[l]&&(o[l]=0);a&&(e.dataset.CountDownEnd=a?"CountDown"===i.mode&&0===i.countDown?"false":"true":"false");var c=e.querySelector(".pt-count-down-wrapper");c&&(e.dataset.CountDownFontSize&&""!==e.dataset.CountDownFontSize&&(e.style.fontSize=e.dataset.CountDownFontSize),e.dataset.CountDownFontFamily&&""!==e.dataset.CountDownFontFamily&&(e.style.fontFamily=e.dataset.CountDownFontFamily),e.dataset.CountDownFontWeight&&""!==e.dataset.CountDownFontWeight&&(e.style.fontWeight=e.dataset.CountDownFontWeight),c.style.cssText="\n        box-sizing: border-box;\n        display: flex;\n        justify-content: space-between;\n        width: 100%;\n        height:".concat("true"===e.dataset.CountDownIsShowLabel?"100%":"fit-content",";\n        user-select: none;\n    "),c.innerHTML=Object.entries(o).map((function(t,n){var o=t[0],a=t[1];return'\n            <div contenteditable="false" class="pt-count-down-time" style="box-sizing: border-box;display: flex;flex-direction: column;align-items: center;min-width: fit-content;height: 100%;flex: '.concat(0!==n?1:r-1," 1 ").concat(0!==n?3.11:3.11+1.68*(r-2),'em;;">\n                <div contenteditable="false" class="pt-count-down-number-wrapper" style="box-sizing: border-box;display: flex;width: 100%;flex: 1 1;">\n                    ').concat(Array.from(Array.from({length:(0===n?r:2)-String(a).length},(function(){return"0"})).join("")+a).map((function(t){return'\n                            <div contenteditable="false" style="height: 1.43em;flex:0 1 4px;display:inline-block;"></div>\n                            <div\n                                contenteditable="false"\n                                class="pt-count-down-number"\n                                style="\n                                    display:inline-block;position: relative;box-sizing: border-box;display: flex;justify-content: center;align-items: center;max-width: calc(1.43em - 8px);height: 1.43em;font-size: 1em;flex: 1 1000 calc(1.43em - 8px);\n                                    color:'.concat(e.dataset.CountDownNumColor||"#fff",';\n                                "\n                            >\n                                <div style="display:inline-block;position: absolute;width: calc(100% + 8px); height: 100%;left:-4px;top: 0;background:').concat(e.dataset.CountDownNumBgColor||"#091e42",";border-radius:").concat(e.dataset.CountDownNumBorderRadius||"4",'px;"></div>\n                                <div style="z-index: 1;display:inline-block;">').concat(t,'</div>\n                            </div>\n                            <div contenteditable="false" style="height: 1.43em;flex:0 1 4px;display:inline-block;"></div>\n                        ')})).join('<div contenteditable="false" style="height: 1.43em;flex:1 100 0.25em;display:inline-block;"></div>'),"\n                </div>\n                ").concat(i.isShowLabel?'<div contenteditable="false" class="pt-count-down-label" style="box-sizing: border-box;position: relative;margin-top: 0 !important;font-size: .4em !important;flex-wrap: nowrap;color: #091e42;flex: 0 0;color:'.concat(e.dataset.CountDownLabelColor||"",';">\n                        <div contenteditable="false" style="opacity:0;display:inline-block;"></div>\n                        <div contenteditable="false" style="display:inline-block;position: absolute;left: 50%;top: 50%;transform: translate(-50%, -50%);white-space: nowrap;">').concat(i.showLabel[o],"</div>\n                    </div>"):"","\n            </div>\n        ")})).join('\n            <div\n                contenteditable="false"\n                class="pt-count-down-divide"\n                style="\n                    box-sizing: border-box;line-height: 1.43em;font-size: 1em !important;color: #091e42;margin-top: 0 !important;text-align: center;flex: 2.5 0.1 0.75em;\n                    color:'.concat(e.dataset.CountDownDivideColor||"",';\n                "\n            >\n                :\n            </div>\n        ')))}}var Mi=function(){function e(){Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.timer=null,this.onmessage=null}return Object.defineProperty(e.prototype,"postMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.timer&&clearInterval(this.timer),"stop"===e?this.timer=null:"function"==typeof this.onmessage&&(this.timer=setInterval(this.onmessage,1e3))}}),e}();function Fi(){var e=this,t=null;this.onmessage=function(n){var i=n.data;t&&clearInterval(t),"stop"===i?t=null:(e.postMessage(""),t=setInterval((function(){return e.postMessage("")}),1e3))}}var Bi=function(){function e(e){var t=this;Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"set",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closePopup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"worker",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.type=e,this.set=[],this.state="stop",this.add=this.add.bind(this),this.delete=this.delete.bind(this),this.checkSizeToRunOrStop=this.checkSizeToRunOrStop.bind(this),this.run=this.run.bind(this),this.stop=this.stop.bind(this),this.update=this.update.bind(this),this.closePopup={},"seconds"===e?(this.worker=function(){try{var e=new Blob(["(".concat(Fi.toString(),")()")],{type:"application/javascript"});return new Worker(URL.createObjectURL(e))}catch(e){return new Mi}}(),this.worker.onmessage=function(){return t.update()}):this.worker=null}return Object.defineProperty(e.prototype,"add",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&(e.dataset.CountDownEnd="false",this.set.push(e),this.checkSizeToRunOrStop())}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.set=this.set.filter((function(t){return t!==e})),this.checkSizeToRunOrStop()}}),Object.defineProperty(e.prototype,"checkSizeToRunOrStop",{enumerable:!1,configurable:!0,writable:!0,value:function(){"stop"===this.state?this.set.length>0&&this.run():0===this.set.length&&this.stop()}}),Object.defineProperty(e.prototype,"run",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.state="run","milliseconds"===this.type?this.worker=requestAnimationFrame(this.update):this.worker.postMessage("start")}}),Object.defineProperty(e.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.set=[],this.state="stop","milliseconds"===this.type?(cancelAnimationFrame(this.worker),this.worker=null):this.worker.postMessage("stop")}}),Object.defineProperty(e.prototype,"update",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.set&&(this.set.forEach((function(t){t.parentNode&&"false"===t.dataset.CountDownEnd?Ri(t,e.type):("true"===t.dataset.CountDownEnd&&"close"===t.dataset.CountDownBehaviorAfter&&"function"==typeof e.closePopup[t.dataset.popupId]&&e.closePopup[t.dataset.popupId](),e.delete(t))})),"milliseconds"===this.type&&"stop"!==this.state&&(this.worker=requestAnimationFrame(this.update)))}}),e}(),Ui=function(){function e(){this.addCountDown=this.addCountDown.bind(this),this.deleteCountDown=this.deleteCountDown.bind(this),this.clear=this.clear.bind(this),this.setClosePopup=this.setClosePopup.bind(this),this.updateSet={seconds:new Bi("seconds"),milliseconds:new Bi("milliseconds")}}return Object.defineProperty(e.prototype,"setClosePopup",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.updateSet.seconds.closePopup[e]=t,this.updateSet.milliseconds.closePopup[e]=t}}),Object.defineProperty(e.prototype,"addCountDown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;e&&e.dataset.menuAction===Tn.DATA_COUNTDOWN&&(-1!==(null===(t=e.dataset.CountDownShowUnit)||void 0===t?void 0:t.indexOf("milliseconds"))?(this.updateSet.seconds.delete(e),this.updateSet.milliseconds.add(e)):(this.updateSet.milliseconds.delete(e),this.updateSet.seconds.add(e)))}}),Object.defineProperty(e.prototype,"deleteCountDown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.updateSet.seconds.delete(e),this.updateSet.milliseconds.delete(e)}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.updateSet.seconds.stop(),this.updateSet.milliseconds.stop()}}),e}(),Hi=new Ui,$i=function(){function e(e){Object.defineProperty(this,"popup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"countDownWorker",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.popup=e,this.countDownWorker=Hi}return Object.defineProperty(e.prototype,"checkCountDownExpired",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!this.popup.popupWrap&&[].slice.call(this.popup.popupWrap.querySelectorAll('[data-menu-action="'.concat(Tn.DATA_COUNTDOWN,'"]'))).some((function(e){if("true"===e.dataset.CountDownEnd&&"close"===e.dataset.CountDownBehaviorAfter)return!0}))}}),Object.defineProperty(e.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.popup.popupWrap){var t=[].slice.call(this.popup.popupWrap.querySelectorAll('[data-menu-action="'.concat(Tn.DATA_COUNTDOWN,'"]')));t instanceof Array&&!t.length||t.forEach((function(t){"CountDown"===t.dataset.CountDownMode&&t.dataset.silexId&&(t.dataset.CountDownStartTime=Vi(e.popup.popup.popupId,t.dataset.silexId,e.popup.isPreview)),t.dataset.popupId=e.popup.popup.popupId,Ri(t)}))}}}),Object.defineProperty(e.prototype,"startCountDown",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.popup.popupWrap){var t=[].slice.call(this.popup.popupWrap.querySelectorAll('[data-menu-action="'.concat(Tn.DATA_COUNTDOWN,'"]')));t instanceof Array&&!t.length||t.forEach((function(t){("CountDown"!==t.dataset.CountDownMode||t.dataset.CountDownTime&&Number(t.dataset.CountDownTime)>0)&&("CountDown"===t.dataset.CountDownMode&&t.dataset.silexId&&(t.dataset.CountDownStartTime=Vi(e.popup.popup.popupId,t.dataset.silexId,e.popup.isPreview)),Hi.addCountDown(t))}))}}}),Object.defineProperty(e.prototype,"clearCountDownFromPop",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.popup.popupWrap){var e=[].slice.call(this.popup.popupWrap.querySelectorAll('[data-menu-action="'.concat(Tn.DATA_COUNTDOWN,'"]')));e instanceof Array&&!e.length||e.forEach((function(e){Hi.deleteCountDown(e)}))}}}),e}();function Vi(e,t,n){var i="pt_countdown_".concat(e,"_").concat(t),r=n?Mn(i):yt(i);return r||(r=new Date+"",n?Rn(i,r):wt(i,r,1e3,"/",at.domain)),r}function Wi(e){return/\S+@\S+\.\S+/.test(e)}function qi(e){return e&&/^[0-9_-]+$/.test(e)}var zi=function(){function e(e){Object.defineProperty(this,"popup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"needCheckDuplicate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formFieldDomList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fieldIdList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fieldValueList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"submitLoading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clickTarget",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"submitResoluteCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fieldNameLabel",{enumerable:!0,configurable:!0,writable:!0,value:"data-field-name"}),this.popup=e,this.hasError=!1,this.needCheckDuplicate=!1,this.formFieldDomList=[],this.fieldIdList=[],this.fieldValueList=[],this.submitLoading=!1,this.clickTarget=void 0,this.submitResoluteCallback=void 0}return Object.defineProperty(e.prototype,"_resetStates",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.hasError=!1,this.needCheckDuplicate=!1,this.formFieldDomList=[],this.fieldIdList=[],this.fieldValueList=[]}}),Object.defineProperty(e.prototype,"_setFieldDomList",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.formFieldDomList=[].slice.call(this.popup.popupWrap.querySelectorAll('[data-menu-action="insert.field"]'))}}),Object.defineProperty(e.prototype,"_checkField",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e,t,n,i=0;i<this.formFieldDomList.length;i++){var r=this.formFieldDomList[i].getAttribute("data-field-id")||"",o=this.formFieldDomList[i].querySelector(".control input, .control textarea, .control select"),a=o.value,l=null===(t=null===(e=this.formFieldDomList)||void 0===e?void 0:e[i])||void 0===t?void 0:t.querySelector(".label"),c=this.formFieldDomList[i].getAttribute("data-ptx-componentid")||"",s=JSON.parse((null==o?void 0:o.getAttribute("data-ptx-validators"))||""),u=(null==l?void 0:l.getAttribute(this.fieldNameLabel))||(null==l?void 0:l.innerText),p=o&&o.getAttribute("data-ptx-property"),d=!1,f=this.formFieldDomList[i].querySelector(".error");if(null==f||f.setAttribute("class","error"),(null==s?void 0:s.allowDuplicate)||(this.needCheckDuplicate=!0),null==s?void 0:s.required)if((n=a)&&""!==n)"email"!==c||Wi(a)||(d=si("form_error_tips_email_invalid")),"phone"!==c||qi(a)||(d=si("form_error_tips_phone_invalid"));else switch(c){case"name":d=si("form_error_tips_name_required");break;case"email":d=si("form_error_tips_email_required");break;case"phone":d=si("form_error_tips_phone_required");break;case"dropdownlist":d=si("form_error_tips_dropdown_required");break;default:d=si("form_error_tips_normal")}else a&&""!==a&&("email"!==c||Wi(a)||(d=si("form_error_tips_email_invalid")),"phone"!==c||qi(a)||(d=si("form_error_tips_phone_invalid")));d&&f?(f.innerText=d,f.style.display="block",this.hasError=!0):f.style.display="none",this.fieldValueList.push({fieldID:this.formFieldDomList[i].getAttribute("data-field-id")||"",fieldValue:a,fieldName:u,fieldType:c}),this.fieldIdList.push({fieldID:r,fieldName:u,alowDuplicate:s.allowDuplicate,allowConnect:!!s.allowConnect,connectProperty:p||"",fieldValue:a,error:d,errorDom:f})}}}),Object.defineProperty(e.prototype,"_checkPreviewFormField",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=Mn(e),i=t.reduce((function(e,t){return e[t.fieldID]=!0,e}),{});if(!n)return i;var r=(n=JSON.parse(n)).previewFormContent;return r?(t.forEach((function(e){var t=e.fieldID,n=e.fieldValue;i[e.fieldID]=!r.some((function(e){return e.fieldID===t&&e.fieldValue===n}))})),i):i}}),Object.defineProperty(e.prototype,"_checkDuplicate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i=this,r=this.fieldIdList.filter((function(e){return!e.alowDuplicate&&e.fieldValue&&""!==e.fieldValue})).map((function(e){return{fieldID:e.fieldID,fieldValue:e.fieldValue}}));if(this.popup.isPreview){var o=this._checkPreviewFormField(this.popup.popup.popupId,r);return this.fieldIdList.forEach((function(e){var t;if(void 0!==o[e.fieldID]&&!e.error&&1==!o[e.fieldID]){var n=e.fieldID,r=si("form_error_tips_duplicate");n.indexOf("name")>-1&&(r=si("form_error_tips_name_duplicate")),n.indexOf("email")>-1&&(r=si("form_error_tips_email_duplicate")),n.indexOf("phone")>-1&&(r=si("form_error_tips_phone_duplicate")),e.error=r,null===(t=e.errorDom)||void 0===t||t.setAttribute("class","error allow-duplicate"),i.hasError=!0}})),void(this.hasError?this._handleSubmitReject(t):(function(e,t){var n=Mn(e);if(n){var i=(n=JSON.parse(n)).previewFormContent;i?i.concat(t):i=t,n.previewFormContent=i,Rn(e,JSON.stringify(n))}else n={seenTimes:1,hasClosed:0,hasClicked:0,formSubmitted:0,session:{},previewFormContent:null}}(this.popup.popup.popupId,this.fieldValueList),null===(n=this.submitResoluteCallback)||void 0===n||n.call(this)))}this.submitLoading=!0,ai.form(r,this.popup.experience.engageId,this.popup.version.versionId,this.popup.popup.popupId,(function(n){setTimeout((function(){i.submitLoading=!1})),i._handleSubmitCallback(n,e,t)}),(function(){setTimeout((function(){i.submitLoading=!1}))}))}}),Object.defineProperty(e.prototype,"_handleSubmitCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i;if(e){var r=JSON.parse(e),o=this;if("success"!==(null==r?void 0:r.status))Ct({module:"form",message:"Form Submit field: Error info: ".concat(r)});else{var a=r.data;if(this.fieldIdList.forEach((function(e){if(void 0!==a[e.fieldID])if(e.error||1!=!a[e.fieldID])e.errorDom&&(e.errorDom.style.display="none");else{var t=e.fieldID,n=si("form_error_tips_duplicate");t.indexOf("name")>-1&&(n=si("form_error_tips_name_duplicate")),t.indexOf("email")>-1&&(n=si("form_error_tips_email_duplicate")),t.indexOf("phone")>-1&&(n=si("form_error_tips_phone_duplicate")),e.error=n,e.errorDom&&(e.errorDom.innerText=e.error,e.errorDom.style.display="block"),o.hasError=!0}})),this.hasError)return void this._handleSubmitReject(n);this.sendSubmitPackage({formContent:JSON.stringify(this.fieldValueList),fieldIdList:JSON.stringify(this.fieldIdList),config:n,transport:t}),null===(i=this.submitResoluteCallback)||void 0===i||i.call(this);var l=this.fieldIdList.reduce((function(e,t){return t.connectProperty&&(e[t.connectProperty]=t.fieldValue),e}),{});"{}"!==JSON.stringify(l)&&ai.identify("",l,"engage")}}else Ct({module:"form",message:"Form Submit field: Error info: ".concat(e)})}}),Object.defineProperty(e.prototype,"_handleSubmitReject",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e||{},n=t.cssSelector,i=t.stayTime,r=t.interactionType;[n,i,r].some((function(e){return void 0===e}))||ai.click({cssSelector:n,stayTime:i,interactionType:r})}}),Object.defineProperty(e.prototype,"handleFormSubmit",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r,o=this;if(!this.submitLoading)if(this._resetStates(),this._setFieldDomList(),this._checkField(),this.submitResoluteCallback=i,this.clickTarget=t,this.hasError)this._handleSubmitReject(n);else if(this.needCheckDuplicate)this._checkDuplicate(e,n);else{var a=this.fieldIdList.reduce((function(e,t){return t.connectProperty&&(e[t.connectProperty]=t.fieldValue),e}),{});"{}"!==JSON.stringify(a)&&ai.identify("",a,"engage"),this.popup.isPreview?this.popup.updateCache("previewFormContent"):this.sendSubmitPackage({formContent:JSON.stringify(this.fieldValueList),fieldIdList:JSON.stringify(this.fieldIdList),config:n,transport:e}),this.popup.updateCache("formSubmitted"),t&&this.popup.popupRender.handleGotoWidgetClick(t),null===(r=this.submitResoluteCallback)||void 0===r||r.call(this),setTimeout((function(){o.submitLoading=!1}))}}}),Object.defineProperty(e.prototype,"sendSubmitPackage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.popup.isPreview||(ai.engage({engageId:this.popup.experience.engageId,engageVersionId:this.popup.version.versionId,engageAction:"submit",properties:{creativeId:this.popup.popup.popupId,creativeType:this.popup.createType,formContent:e.formContent||"",fieldIdList:e.fieldIdList||""},config:e.config,transport:e.transport||"xhr"}),Kr.sendExperienceEventToGA("click",{experienceType:this.popup.experience.engageType,experienceId:this.popup.experience.engageId,experienceName:this.popup.experience.engageName,versionId:this.popup.version.versionId,versionName:this.popup.version.versionName,clickTarget:this.clickTarget}))}}),Object.defineProperty(e.prototype,"checkElementHasNoPackageAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return null==e?void 0:e.getAttribute("data-engage-no-package")}}),Object.defineProperty(e.prototype,"setFieldNameToAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.popup.popupWrap.querySelectorAll('[data-menu-action="insert.field"]').forEach((function(t){var n=t.querySelector(".label");n&&n.setAttribute(e.fieldNameLabel,n.innerText)}))}}),e}();function Gi(e){var t;return null===(t=null==e?void 0:e.hasAttribute)||void 0===t?void 0:t.call(e,Tn.TEMP_A)}function Yi(e,t,n){var i=document.createElement("textarea");i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="2em",i.style.height="2em",i.style.padding="0",i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.value=e,document.body.appendChild(i),i.focus(),i.select();try{document.execCommand("copy"),"function"==typeof t&&t()}catch(e){"function"==typeof n&&n()}document.body.removeChild(i)}var Ji="data-engage-action";function Xi(e){var t=e.selector,n=e.actionDom,i=e.actionConfig,r=e.clickFn;if(!n||!i||!i.enableClickAction)return null;var o=i||{},a=o.clickActionConfig,l=o.clickActionType,c=Ze(n,"href"),s=Ze(n,"target"),u="A"===n.tagName,p=u&&"link"===l,d=null;if(n.setAttribute(_n,JSON.stringify(i)),p){var f=a[l]||{},h=f.linkURL,b=f.openNewTab,v=f.carryParameter;n.setAttribute("href",nn(h,v)),n.setAttribute("target",b?"_blank":"_self")}else u&&(n.removeAttribute("href"),n.removeAttribute("target")),t?function(e,t){var n,i=it.document;if(!i.querySelector('style[data-selector="'.concat(e,'"]'))){var r=i.createElement("style");r.setAttribute("data-selector",e),r.textContent=t,null===(n=i.head)||void 0===n||n.appendChild(r)}}(t,"\n                ".concat(t," {\n                    cursor: pointer!important;\n                }\n                ")):n.style.cursor="pointer","function"==typeof r&&(d=z(r,200),n.removeEventListener("click",d,!1),n.addEventListener("click",d,!1));return function(){n.removeAttribute(_n),u&&(c&&n.setAttribute("href",c),s&&n.setAttribute("target",s)),p||(t?function(e){var t=it.document,n=t.querySelector('style[data-selector="'.concat(e,'"]'));(null==t?void 0:t.head)&&n&&t.head.removeChild(n)}(t):n.style.cursor="auto",d&&n.removeEventListener("click",d,!1))}}function Ki(e,t,n,i){var r=n.clickActionConfig,o=n.clickActionType,a=n.enableClickAction;if(a){switch(o){case"link":case"line":var l=r[o]||{},c=l.linkURL,s=l.openNewTab,u=l.carryParameter;c&&function(e,t){void 0===t&&(t=!1);var n=document.createElement("a");n.setAttribute(Tn.TEMP_A,""),n.href=e,n.target=t?"_blank":"_self",document.body.appendChild(n),n.click(),document.body.removeChild(n)}(nn(c,u),s);break;case"tel":var p=(r[o]||{}).phoneNumber;p&&function(e){var t=document.createElement("a");t.setAttribute(Tn.TEMP_A,""),t.href="tel:"+e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}(p);break;case"copiedText":var d=(r[o]||{}).text;d&&function(e,t,n){R(this,void 0,void 0,(function(){return M(this,(function(i){try{navigator.clipboard.writeText(e).then((function(){t()}),(function(i){Yi(e,t,n)}))}catch(i){return Yi(e,t,n),[2]}return[2]}))}))}(d,(function(){!function(e,t,n){if(e&&t){var i=ee('[data-insert-tooltip-text="'.concat(n,']"'),it);i&&i.remove();var r=0,o=0;if("click"===e.type&&(r=e.clientX,o=e.clientY),"touchend"===e.type||"touchstart"===e.type){var a="touchend"===e.type?e.changedTouches:e.touches;(null==a?void 0:a[0])&&(r=a[0].clientX,o=a[0].clientY)}var l=t.getBoundingClientRect(),c=l.top,s=l.left,u=l.right,p=l.height,d=document.body.clientWidth,f={top:parseInt((c-4-32).toString(),10),bottom:parseInt((c+p+4).toString(),10),left:s,right:u};0===r&&0===o?(f.left=parseInt((s+(u-s)/2-85).toString(),10),f.right=parseInt((s+(u-s)/2+85).toString(),10)):(f.left=r>parseInt(85..toString(),10)?parseInt((r-85).toString(),10):r,f.right=parseInt((r-170).toString(),10));var h=document.createElement("div");h.innerHTML='<div data-insert-tooltip="true" data-insert-tooltip-text="'.concat(n,'" style="\n          position: fixed;\n          border-radius: 3px;\n          background-color: #212121;\n          padding: 6px 16px;\n          display: flex;\n          align-items: center;\n          font-size: 13px;\n          color: #fff;\n          font-weight: 400;\n          white-space: nowrap;\n          top: ').concat(f.top>0?f.top:f.bottom,"px;\n          left: ").concat(f.left>0&&f.left<d?f.left:f.right,'px;\n          z-index: 2147483647;\n      ">\n        <svg\n          style="width: 16px; height: 16px; fill: #fff; margin-right: 8px;"\n          viewBox="0 0 1024 1024"\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg">\n          <path d="M512 0C229.696 0 0 229.696 0 512s229.696 512 512 512 512-229.696 512-512-229.696-512-512-512z m0 960c-246.976 0-448-201.024-448-448s201.024-448 448-448 448 201.024 448 448-201.024 448-448 448z"  />\n          <path d="M828.544 349.696L433.92 744.32 195.456 503.872a40.64 40.64 0 1 1 57.472-57.472l180.992 182.4 337.152-337.152a40.64 40.64 0 1 1 57.472 57.472v0.576z"  />\n        </svg>\n        <span>').concat(n,"</span>\n    </div>");var b=h.firstChild;b&&document.body.appendChild(b),setTimeout((function(){b&&b.remove()}),1500)}}(e,t,si("copySuccessfully"))}));break;case"downloadFile":var f=(r[o]||{}).fileURL;f&&function(e){var t=document.createElement("a");t.setAttribute(Tn.TEMP_A,""),t.href=e,t.download="",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(f);break;case"runCode":var h=(r[o]||{}).code;h&&jn(h)}null==i||i(t,{enableClickAction:a,clickActionType:o,clickActionConfig:r})}}function Qi(e){return!!e&&(K(e)?Qi(Q(e)):"submit"===Ze(e,"data-button-type")||!(!e.parentNode||"body"===e.nodeName.toLowerCase())&&Qi(e.parentNode))}function Zi(e){if(!e)return 0;if(K(e))return Zi(Q(e));var t=Tn.DATA_ACTION_CONFIG,n=Tn.DATA_BLOCK,i=Tn.BUTTON_CLOSE,r=Tn.ICON_CLOSE,o=Tn.BUTTON_FORM_SUBMIT,a=Ze(e,t)||Ze(e,_n),l=Ze(e,n),c=!1;try{a&&"closePopup"===JSON.parse(a).clickActionType&&(c=!0)}catch(e){}return c||l===i||l===r?1:a||l===o?2:e.parentNode&&"BODY"!==e.nodeName?Zi(e.parentNode):0}var er=function(){function e(e){Object.defineProperty(this,"popup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.popup=e}return Object.defineProperty(e.prototype,"_handleActionClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r,o,a=Qi(e),l=t||{},c=l.enableClickAction,s=l.clickActionType,u=l.clickActionConfig,p=!0;if(c){switch(s){case"link":case"line":var d=null!==(r=u[s])&&void 0!==r?r:{},f=d.linkURL,h=d.closePopup;(a||f&&h)&&(this.popup.unmounted(),p=!a);break;case"runCode":(null===(o=u.runCode)||void 0===o?void 0:o.closePopup)&&(this.popup.unmounted(),p=!a);break;case"closePopup":this.popup.unmounted(),a||this.popup.popupRender.sendClose(n,e,i),p=!1;break;case"showMessage":this.popup.popupRender.gotoNext(!0),p=!1}a&&(p=!1,this.popup.updateCache("formSubmitted"))}c&&!this.popup.isPreview&&p&&(this.popup.updateCache("hasClicked"),this.popup.sendEngagePackage({type:"click",config:n,transport:i,properties:{},clickTarget:e}))}}),Object.defineProperty(e.prototype,"applyAction",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){this._handleActionClick(e,t,n,i)}}),e}();function tr(e){if(!e)return e;var t;if([Number,String,Boolean].forEach((function(n){e instanceof n&&(t=n(e))})),void 0===t)if("[object Array]"===Object.prototype.toString.call(e))t=[],e.forEach((function(e,n){t[n]=tr(e)}));else if("object"==typeof e)if(e.nodeType&&"function"==typeof e.cloneNode)t=e.cloneNode(!0);else if(e.prototype)t=e;else if(e instanceof Date)t=new Date(e);else for(var n in t={},e)t[n]=tr(e[n]);else t=e;return t}function nr(e){var t=Ye(e);if(!t)return!1;if(function(e){var t;if(!e)return!0;var n=Tn.TEMP_A;if(null===(t=null==e?void 0:e.hasAttribute)||void 0===t?void 0:t.call(e,n))return!0;var i=e.nodeName.toLowerCase();return"html"===i||(new Date).getTime()-at.clickActionTime<p&&"a"!==i}(t))return!1;var n=Tn.DATA_MENU_ACTION,i=Tn.POPUP,r=Tn.DOM_TYPE,o=ir(t,n,i),a=o?r:"",l=function(e){var t=e&&e.getAttribute(Tn.DATA_MENU_ACTION);return t&&t===Tn.CLOSE_BUTTON}(a?ir(t,a):t)?[]:function(e,t){for(var n=at.trackEventList,i=[],r=[],o=t?ir(e,t,""):e,a=0;a<n.length;a++)try{for(var l=n[a],c=0;c<l.events.length;c++)for(var s=l.events[c],u=te(l.selector,it),p=0;p<u.length;p++)u[p]===o?i.push(s):0===i.length&&rr(u[p],o)&&r.push(s)}catch(e){}return 0===i.length&&r.length>0&&(i=r),tr(i).reduce((function(e,t){return e.push({eventName:t.eventName,eventType:"pti"===t.source?1:0,properties:t.properties}),e}),[])}(t,o?r:"");return{events:l,isPopup:o}}function ir(e,t,n){var i;if(!e||!t)return null;if(K(e))return ir(Q(e),t,n);if(null===(i=null==e?void 0:e.hasAttribute)||void 0===i?void 0:i.call(e,t)){if(!n)return e;if(e.getAttribute(t)===n)return e;if(e.parentNode&&"body"!==e.nodeName.toLowerCase())return ir(e.parentNode,t,n)}else if(e.parentNode&&"body"!==e.nodeName.toLowerCase())return ir(e.parentNode,t,n);return null}function rr(e,t){return!(!e||!t)&&(e===t||!(!t.parentNode||"body"===e.nodeName.toLowerCase())&&rr(e,t.parentNode))}function or(e){var t,n,i=e.srcElement,r=e.win,o=e.inlineActionConfig;if(o&&"link"===(null==o?void 0:o.clickActionType)&&!(null===(n=null===(t=null==o?void 0:o.clickActionConfig)||void 0===t?void 0:t.link)||void 0===n?void 0:n.openNewTab))return!0;var a=i.nodeName,l=i.getAttribute("target");return"A"===a&&!function(e){var t=e.target,n=e.win;return!("_self"===t||!t||"_parent"===t&&n.parent===n||"_top"===t&&n.top===n)}({target:l,win:r})}var ar=function(){function e(e){Object.defineProperty(this,"popupInstance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasClosedByManual",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBackList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allAction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pageClickCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.popupInstance=e,this.rollBackList=[],this.allAction=[],this.hasClosedByManual=!1;var t=this;this._pageClickCallback=function(e){t.popupInstance.popupWrap&&t.popupInstance.popupWrap.contains(e.target)&&t.applyAction(e.event,e.config)}}return Object.defineProperty(e.prototype,"_bindActionStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=Tn.DATA_ACTION_CONFIG,n=Tn.DOM_TYPE;this.allAction=function(e){var t=[];return e?([].slice.call(e.querySelectorAll("div["+Ji+"]")).forEach((function(e){var n=Ze(e,Ji);if(n)try{var i=JSON.parse(n);t.push({el:e,config:i})}catch(e){}})),t):t}(this.popupInstance.popupWrap);var i=this.popupInstance.popupWrap.querySelectorAll("div[data-engage-action]");[].slice.call(i).length>0&&[].slice.call(i).forEach((function(i){var r=ir(i,n),o=ir(i,t),a=e.allAction.find((function(e){return o===e.el})),l=r&&Xi({actionDom:r,actionConfig:null==a?void 0:a.config});l&&e.rollBackList.push(l)}))}}),Object.defineProperty(e.prototype,"removeActionEffect",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.rollBackList.forEach((function(e){return e()}))}}),Object.defineProperty(e.prototype,"_renderCodeMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;(this.popupInstance.popup.code||[]).forEach((function(t){var n=e.popupInstance,i=n.popup,a=n.experience,l=n.renderType;if("css"===t.type){var c="#engage_".concat(i.popupId),s=Dn(t.code,c);s&&$n(s,i.popupId,l)}else{var u={engage_id:a.engageId,popup_id:i.popupId};!function(e,t,n,i){if(void 0===i&&(i=it),Z()&&"body"!==t)try{var a=J(it);new Function("window",r,o,e).bind(a)(i,Fr,n)}catch(e){}else jn(e,n)}(t.code,l,u)}}))}}),Object.defineProperty(e.prototype,"_updateRootPageStyles",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(void 0===t&&(t=0),"update"===e){if(!document.body.getAttribute("ptx_stickybar_origin_top_value")){var n=window.getComputedStyle(document.body).getPropertyValue("top"),i="auto"===n?0:Number(n.replace("px",""));document.body.setAttribute("ptx_stickybar_origin_top_value",i.toString())}var r=Number(document.body.getAttribute("ptx_stickybar_origin_top_value"));document.body.style.position="relative",document.body.style.top=t+r+"px"}else"restore"===e&&(r=Number(document.body.getAttribute("ptx_stickybar_origin_top_value")),document.body.style.position="static",document.body.style.top=r+"px")}}),Object.defineProperty(e.prototype,"_getNodeActionType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n,i,r,o,a=Tn.DATA_BLOCK,l=Tn.DATA_BUTTON_TYPE,c=Tn.DATA_ACTION_CLICK,s=Tn.DATA_ACTION_CLOSE,u=Tn.DATA_ACTION_CONFIG,p=Tn.BUTTON_CLOSE,d=Tn.ICON_CLOSE,f=Tn.BUTTON_GOTO_WIDGET,h=Tn.BUTTON_FORM_SUBMIT,b=Tn.BUTTON_URL,v=Tn.DATA_URL_CLOSE_POPUP,m=Ye(e),g=Ye(e),y=null,w=null,_=!1,x=!1;try{do{y=(null===(t=null==g?void 0:g.getAttribute)||void 0===t?void 0:t.call(g,a))||"",w=null===(n=g.getAttribute)||void 0===n?void 0:n.call(g,l),x||(x=(null===(i=null==m?void 0:m.hasAttribute)||void 0===i?void 0:i.call(m,c))||(null===(r=null==m?void 0:m.hasAttribute)||void 0===r?void 0:r.call(m,s))||-1!==[p,d,f,h,b,v].indexOf(y))&&(g=m),_||(_=null===(o=null==m?void 0:m.hasAttribute)||void 0===o?void 0:o.call(m,u)),(!x||!_)&&(m=m.parentNode)}while(!(x&&_||m===this.popupInstance.popupWrap))}catch(e){Ct({module:"popup",message:"Popup check action node has error: "+e})}return{linkType:y,buttonType:w,interactiveNode:g,isActionNode:_,isInteractiveNode:x}}}),Object.defineProperty(e.prototype,"_triggerLink",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if("_blank"===e)try{it.open(t,"_blank")}catch(e){Ct({module:"popup",message:"not support to use window.open, error: "+e})}else it.location.href=t}}),Object.defineProperty(e.prototype,"_handleInteractiveNodeClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r){var o,a,l,c=this,s=Tn.BUTTON_CLOSE,u=Tn.ICON_CLOSE,p=Tn.BUTTON_GOTO_WIDGET,d=Tn.BUTTON_FORM_SUBMIT,f=Tn.BUTTON_URL,h=Tn.DATA_URL_CLOSE_POPUP,b=e.tagName.toUpperCase(),v=(e.textContent||b||"").trim()||"unknow target";if("image"===(null===(o=null==e?void 0:e.parentNode)||void 0===o?void 0:o.getAttribute("data-engage-block"))){var m=null===(a=e.querySelector("img"))||void 0===a?void 0:a.getAttribute("alt");m&&(v=m)}switch(t){case s:case u:return this.sendClose(r,e,i),void this.popupInstance.unmounted();case p:this._clear(),this.popupInstance.sendEngagePackage({type:"click",config:r,transport:i,properties:{target:v},clickTarget:e}),this.handleGotoWidgetClick(e);break;case d:this.popupInstance.popupForm.handleFormSubmit(i,e,r,(function(){c.handleGotoWidgetClick(e),c.popupInstance.updateCache("formSubmitted")}));break;default:this.popupInstance.sendEngagePackage({type:"click",config:r,transport:i,properties:{target:v},clickTarget:e})}var g=(null==e?void 0:e.href)||"",y=(null==e?void 0:e.target)||"";if(g&&!/^javascript:(void\(0\))?;?$/.test(g))if("submit"===n){var w="beacon";(null==r?void 0:r.events)&&r.events.length>0&&(w="xhr","_blank"===y&&(w="beacon")),this.popupInstance.popupForm.handleFormSubmit(w,e,r,(function(){c.popupInstance.updateCache("formSubmitted"),c._triggerLink(y,g)}))}else this._triggerLink(y,g);t===f&&(null===(l=e.getAttribute)||void 0===l?void 0:l.call(e,h))&&this.popupInstance.unmounted(),this.popupInstance.updateCache("hasClosed")}}),Object.defineProperty(e.prototype,"_clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n;this.popupInstance.widget&&("inject"===this.popupInstance.widget.widgetSettings.stickyMode&&this._updateRootPageStyles("restore"),(null===(e=this.popupInstance.widget)||void 0===e?void 0:e.widgetSettings.showMask)&&Cn(this.popupInstance.widget.widgetId),En("delete",this.popupInstance.widget.widgetSettings.position),this.popupInstance.popupWrap&&(null===(n=null===(t=this.popupInstance)||void 0===t?void 0:t.popupContainer)||void 0===n?void 0:n.hasChildNodes())&&this.popupInstance.popupContainer.contains(this.popupInstance.popupWrap)&&this.popupInstance.popupContainer.removeChild(this.popupInstance.popupWrap))}}),Object.defineProperty(e.prototype,"_setMaskStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(this.popupInstance.widget||{}).widgetSettings,t=this.popupInstance.popupWrap.querySelector('[data-engage-block="engage"]');t&&((null==e?void 0:e.showMask)?(null==e?void 0:e.showMask)&&(t.style.position="fixed"):(t.style.left="auto",t.style.right="auto",t.style.top="auto",t.style.bottom="auto"),"pos-sticky-top"===(null==e?void 0:e.position)&&"inject"===(null==e?void 0:e.stickyMode)&&this._updateRootPageStyles("update",null==e?void 0:e.height))}}),Object.defineProperty(e.prototype,"_renderHtmlCss",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(this.popupInstance.widget){var t=null!==(e=this.popupInstance.widget)&&void 0!==e?e:{},n=t.widgetNodes,i=t.version,r=n.css,o=n.html,a=n.commonStyle,l=void 0===a?"":a,c=this.popupInstance.widget.widgetSettings.position,s=i?function(e){switch(void 0===e&&(e="pos-center"),e){case"pos-center-top":return An(rn||(rn=B(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; left: 50%; top: 0 } 100% { opacity: 1 }",toLeave:"0% { opacity: 1 } 100% { opacity: 0; left: 50%; top: 0 }"});case"pos-sticky-top":return An(on||(on=B(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; transform: translate(-50%, -100%) } 100% { opacity: 1 }",toLeave:"0% { opacity: 1 } 100% { opacity: 0; transform: translate(-50%, -100%) }"});case"pos-right-bottom":return An(an||(an=B(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; right:0; bottom: 0 } 100% { opacity: 1 }",toLeave:"0% { opacity: 1 } 100% { opacity: 0; right:0; bottom: 0 }"});case"pos-right-center":return An(ln||(ln=B(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; right: 0; top: 50%; } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; right: 0; top: 50%; } 100% { opacity: 0 }"});case"pos-right-top":return An(cn||(cn=B(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; right: 0; top: 0; } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; right: 0; top: 0; } 100% { opacity: 0 }"});case"pos-center-bottom":return An(sn||(sn=B(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; left: 50%; bottom: 0; } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; left: 50%; bottom: 0; } 100% { opacity: 0 }"});case"pos-sticky-bottom":return An(un||(un=B(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; transform: translate(-50%, 100%) } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; transform: translate(-50%, 100%) } 100% { opacity: 0 }"});case"pos-left-bottom":return An(pn||(pn=B(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; left: 0; bottom: 0; } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; left: 0; bottom: 0; } 100% { opacity: 0 }"});case"pos-left-center":return An(dn||(dn=B(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; left: 0; top: 50%; } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; left: 0; top: 50%; } 100% { opacity: 0 }"});case"pos-left-top":return An(fn||(fn=B(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; left: 0; top: 0 } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; left: 0; top: 0 } 100% { opacity: 0 }"});case"pos-center":return An(hn||(hn=B(["",""],["",""])),{position:e,toEnter:"from { transform: translate(-50%, -50%) scale(.8) }",toLeave:"to { transform: scale(.8) }"});default:return""}}(c):"",u=Dn(l+r+s,"#engage_".concat(this.popupInstance.popup.popupId));if(u&&$n(u,this.popupInstance.popup.popupId+this.popupInstance.widget.widgetId,this.popupInstance.renderType),o&&(this.popupInstance.popupWrap.innerHTML=o),i){var p=this.popupInstance.popupWrap.querySelector('div[data-menu-action="insert.popup"]');p&&p.classList.add("animate-enter")}this.popupInstance.popupWrap.style.display="none"}}}),Object.defineProperty(e.prototype,"_checkEngageData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=Tn.DATA_SHOW_ENGAGE,n=(this.popupInstance.widget||{}).widgetSettings;if("false"===(null===(e=this.popupInstance.popupWrap)||void 0===e?void 0:e.getAttribute(t))&&n){var i=bn.get(gn)||[],r=i.indexOf(null==n?void 0:n.position);-1!==r&&(i.splice(r,1),bn.set(gn,i))}else;}}),Object.defineProperty(e.prototype,"_handlePopupClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this._getNodeActionType(e),r=i.linkType,o=i.buttonType,a=i.interactiveNode;i.isInteractiveNode&&a&&r&&(e.preventDefault(),this._handleInteractiveNodeClick(a,r,o||"",t,n))}}),Object.defineProperty(e.prototype,"handleGotoWidgetClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n=null===(t=null==e?void 0:e.getAttribute)||void 0===t?void 0:t.call(e,Tn.DATA_GOTO_WIDGET);"prev"===n?this.gotoPrev():"next"===n&&this.gotoNext(!0)}}),Object.defineProperty(e.prototype,"gotoPrev",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.popupInstance.widgetIndex-1;e>=0&&(this.popupInstance.updateInstanceState("widgetIndex",e),this.render())}}),Object.defineProperty(e.prototype,"gotoNext",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.popupInstance.popup.widgets.length-1,n=this.popupInstance.widgetIndex+1;if(n<=t){if(this.popupInstance.updateInstanceState("widgetIndex",n),e)try{En("delete",this.popupInstance.popup.widgets[this.popupInstance.widgetIndex].widgetSettings.position)}catch(e){}this.render()}}}),Object.defineProperty(e.prototype,"sendClose",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this.popupInstance.popupForm.checkElementHasNoPackageAttr(t),r={};t&&(r.target=((null==t?void 0:t.textContent)||(null==t?void 0:t.tagName.toUpperCase())||"").trim()||"unknow target"),this.popupInstance.isPreview||i||this.popupInstance.sendEngagePackage({type:"close",config:e,transport:n,properties:r}),this.popupInstance.updateCache("hasClosed")}}),Object.defineProperty(e.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._clear(),this.popupInstance.popupCountDown.clearCountDownFromPop(),this.popupInstance.shownByJs||Si.__deletePopupFromTheRenderList(this.popupInstance.experience.engageId,this.popupInstance.popup.popupId),In("delete",this.popupInstance.popup.popupId),ot.off(P.PAGE_ON_CLICK,this._pageClickCallback)}}),Object.defineProperty(e.prototype,"getTransport",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i="beacon";return(null==e?void 0:e.events)&&(null===(n=e.events)||void 0===n?void 0:n.length)>0&&(i="xhr",!1===t&&(i="beacon")),i}}),Object.defineProperty(e.prototype,"applyAction",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i,r,o,a,l,c=this,s=Tn.DATA_ACTION_CONFIG,u=Tn.DOM_TYPE,p=Tn.DATA_ACTION_CLOSE,d=Tn.DATA_BLOCK,f=Tn.BUTTON_FORM_SUBMIT,h=Tn.DATA_ACTION_CLICK,b=Ye(e),v=!(["input","select","option","radio","textarea","checkbox"].indexOf(b.tagName.toLocaleLowerCase())>-1),m=ir(b,u),g=ir(b,s),y=c.allAction.find((function(e){return g===e.el})),w=((null===(i=null===(n=null==y?void 0:y.config)||void 0===n?void 0:n.clickActionConfig)||void 0===i?void 0:i.link)||{}).openNewTab,_=this.getTransport(t,w);if(m)if((null===(r=m.hasAttribute)||void 0===r?void 0:r.call(m,p))||m.querySelector("a[".concat(d,"]"))||(null===(o=m.hasAttribute)||void 0===o?void 0:o.call(m,d))&&"A"===m.tagName)c._handlePopupClick(e,_,t);else{var x=function(){Ki(e,m,null==y?void 0:y.config,(function(e,n){c.popupInstance.popupAction.applyAction(e,n,t,_)}))};if(m.getAttribute(d)!==f){if(v&&y){if(Qi(b))return void c.popupInstance.popupForm.handleFormSubmit(_,m,t,x);if(null===(a=null==y?void 0:y.config)||void 0===a?void 0:a.enableClickAction)return void Ki(e,m,null==y?void 0:y.config,(function(e,n){c.popupInstance.popupAction.applyAction(e,n,t,_)}))}!this.popupInstance.isPreview&&v&&(!y||!y.config.enableClickAction)&&(null==t?void 0:t.events)&&(null===(l=t.events)||void 0===l?void 0:l.length)>0&&ai.track(L(L({},t),{params:{transport:_}}))}else ir(b,h)?c._handlePopupClick(e,_,t):c.popupInstance.popupForm.handleFormSubmit(_,m,t,x)}}}),Object.defineProperty(e.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n,i,r=this;this.popupInstance.updateInstanceState("widget",this.popupInstance.popup.widgets[this.popupInstance.widgetIndex]),this.popupInstance.widget&&(t=this.popupInstance.widget.widgetSettings.position,-1===(bn.get(gn)||[]).indexOf(t)&&this.popupInstance.widget&&(this._renderHtmlCss(),se()&&(null==(n=this.popupInstance.popupWrap)?void 0:n.querySelector('[data-menu-action="'.concat(Tn.DATA_COUNTDOWN,'"]')))?this.popupInstance.unmounted():(this.popupInstance.popupCountDown.init(),this.popupInstance.popupCountDown.checkCountDownExpired()?this.popupInstance.unmounted():(function(e){var t;if(e&&e.querySelectorAll('[data-ec-asset-type="video"]').length>0){var n,i=document.head.querySelector("script.ecVideoJs"),r=document.head.querySelector("link.ecVideoCss"),o=document.head.querySelector("script.ecYoutube");if(i||((n=document.createElement("script")).setAttribute("class","ecVideoJs"),n.src="https://ptxpublicres.ptengine.jp/scripts/video/ec-video.js",document.head.appendChild(n)),!r){var a=document.createElement("link");a.setAttribute("class","ecVideoCss"),a.href="https://ptxpublicres.ptengine.jp/styles/ec-video.css",a.rel="stylesheet",document.head.appendChild(a)}o||((n=document.createElement("script")).setAttribute("class","ecYoutube"),n.src="https://ptxpublicres.ptengine.jp/scripts/video/ec-youtube.js",document.head.appendChild(n));for(var l=e.querySelectorAll('[data-ec-asset-type="video"]'),c=function(e){var n=l[e],i=n.getAttribute("data-ec-asset")||"";if(!i)return{value:void 0};var r=JSON.parse(i),o=!0;r.video&&r.video.hideControls&&(o=!1);var a=r.videoUrl.videoType,c=n.querySelector("div.ecVideoBase"),s=n.querySelector("div.ecYoutube"),u=null==c?void 0:c.getAttribute("tip");if("url"===a&&""!==r.videoUrl.data){var p={controls:o,autoplay:r.video&&r.video.autoPlay||!1,loop:r.video&&r.video.loop||!1,poster:r.video&&r.video.poster||"",preload:"auto",fluid:!0,controlBar:{pictureInPictureToggle:!1,currentTimeDisplay:!0,timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!0,volumePanel:{inline:!1}},sources:[{src:r.videoUrl.data,type:"video/mp4"}]};p.autoplay&&(p.muted=!0,p.poster="");var d=setInterval((function(){if(window.videojs){clearInterval(d);var e=new window.videojs(null==c?void 0:c.querySelector(".ecVideoPlayer"),p);e.on("error",(function(){e.errorDisplay.contentEl_.innerHTML='<div style="background: rgb(9,30,66); width: 100%; height: 100%; position: relative; overflow: hidden;"><div style="width: 90%; padding: 0; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); display: flex; align-items: center; justify-content: center; font-size: 12px;"><img src="https://ptxpublicres.ptengine.jp/images/caution.svg" style="width: 2.8em; height: 2.8em; margin-right: 1em; color: rgb(255, 255, 255); opacity: 0.8;"/><p style="font-size: 12px; line-height: 20px; color: rgba(255, 255, 255, .8); margin: 0; text-align: left;">'.concat(u,"</p></div></div>")}));var t=n.querySelector(".vjs-big-play-button"),i=n.querySelector(".vjs-loading-spinner"),o=n.querySelector(".vjs-poster"),a=n.querySelector(".vjs-tech"),l=n.querySelector(".video-js");t&&i&&(t.style.transform="translate(-50%, -50%)",t.style.display="block",i.style.margin="-25px 0 0 -25px",t.style.margin="0",a.style.width="100%",a.style.height="100%",l.style.width="100%",l.style.height="100%",a.style.padding="0",l.style.padding="0",a.style.background="#000"),r.video&&r.video.poster&&o&&(o.style.backgroundSize="cover"),r.video&&r.video.autoPlay&&e.play(),e.on("play",(function(){t.style.display="none"}))}}),300)}if("youtube"===a&&""!==r.videoUrl.data){var f=r.videoUrl.data,h=function(e){var t;if(null===e)return!1;var n=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!n||11!==(null===(t=null==n?void 0:n[7])||void 0===t?void 0:t.length))&&(null==n?void 0:n[7])}(f),b=null===(t=n.querySelector("div.ecYoutubeBase"))||void 0===t?void 0:t.style,v=parseInt(b.width,10),m=parseInt(b.height,10);if(function(e){var t;if(null===e)return!1;var n=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!e.match(n)&&(null===(t=null==e?void 0:e.match(n))||void 0===t?void 0:t[1])}(f)&&h)var g=setInterval((function(){window.YT&&window.YT.Player&&(clearInterval(g),new window.YT.Player(s,{height:m,width:v,playerVars:{controls:o?1:0,autoplay:r.video&&r.video.autoPlay?1:0,loop:r.video&&r.video.loop?1:0,enablejsapi:1},videoId:h,events:{onReady:function(e){e.target.setVolume(0),r.video&&r.video.autoPlay&&e.target.playVideo()},onStateChange:function(e){r.video&&r.video.loop&&0===e.data&&e.target.playVideo()},onError:function(e){}}}))}),300);else{var y=n.querySelector("div.ecYoutubeBase");y&&(y.innerHTML='<div style="background: rgb(9,30,66); width: 100%; height: 100%; position: relative; overflow: hidden;"><div style="width: 90%; padding: 0; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); display: flex; align-items: center; justify-content: center; font-size: 12px;"><img src="https://ptxpublicres.ptengine.jp/images/caution.svg" style="width: 2.8em; height: 2.8em; margin-right: 1em; color: rgb(255, 255, 255); opacity: 0.8;"/><p style="font-size: 12px; line-height: 20px; color: rgba(255, 255, 255, .8); margin: 0; text-align: left;">'.concat(u,"</p></div></div>"))}}},s=0;s<l.length;s++){var u=c(s);if("object"==typeof u)return u.value}}}(this.popupInstance.popupWrap),null===(e=this.popupInstance.popupContainer)||void 0===e||e.appendChild(this.popupInstance.popupWrap),i=this.popupInstance.popupWrap,Array.prototype.slice.call(i.querySelectorAll("script")).forEach((function(e){jn(e.innerHTML)})),this._bindActionStyle(),ot.on(P.PAGE_ON_CLICK,this._pageClickCallback),this._renderCodeMode(),this.popupInstance.popupCountDown.startCountDown(),this.popupInstance.popupCountDown.countDownWorker.setClosePopup(this.popupInstance.popup.popupId,(function(){try{r.sendClose(),r.popupInstance.unmounted()}catch(e){}})),this._setMaskStyle(),En("add",this.popupInstance.widget.widgetSettings.position),this.popupInstance.popupForm.setFieldNameToAttribute(),this.popupInstance.popupWrap.style.display="block",0===this.popupInstance.widgetIndex&&(Si.__addPopupToRenderList(this.popupInstance.experience.engageId,this.popupInstance.popup.popupId,this.popupInstance),this.popupInstance.sendEngagePackage({type:"view",properties:{}}),this.popupInstance.updateCache("seenTimes"),In("add",this.popupInstance.popup.popupId)),function(e){var t,n;fe(it)===T.PC&&(function(e,t){var n;null===(n=e.querySelector('[data-menu-action="insert.popup"]'))||void 0===n||n.setAttribute("tabindex",String(100*Number(e.getAttribute("focusindex"))));var i=[];e.querySelectorAll('[data-engage-block] , [data-menu-action="insert.button"], [data-menu-action="insert.close"] , a , link , button , input , select , textarea').forEach((function(e){var n=e,r=e.getAttribute("data-engage-block");r&&!Object.keys(t).some((function(e){return t[e]===r}))||(0===i.length?i.push({dom:n,position:L({},bi(n))}):i.some((function(e){var t;return null===(t=e.dom)||void 0===t?void 0:t.contains(n)}))||i.push({dom:n,position:L({},bi(n))}))})),e.querySelectorAll("[data-engage-action]").forEach((function(e){var t=e;i.push({dom:t,position:L({},bi(t))})})),i.sort((function(e,t){return e.position.top!==t.position.top?e.position.top-t.position.top:e.position.left-t.position.left})),i.forEach((function(t,n){t.dom.setAttribute("tabindex",String(100*Number(e.getAttribute("focusindex"))+n+1))}))}(e.popupWrap,Tn),t=it.document.querySelector("pt-experience"),n=di("shadow-root"),t&&n.length&&t.setAttribute("tabindex",String(Number(n[0].getAttribute("tabindex"))-1)),function(e){var t,n;K(null===(n=null===(t=e.popupWrap)||void 0===t?void 0:t.parentNode)||void 0===n?void 0:n.parentNode)?fi("render","shadow-root"):hi()}(e))}(this.popupInstance),this.popupInstance.updateInstanceState("rendered",!0)))))}}),e}(),lr=function(){function e(e){Object.defineProperty(this,"render",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"condition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.render=e,this.condition="",this.validator=null,this.value=null}return Object.defineProperty(e.prototype,"setCondition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.condition=e}}),Object.defineProperty(e.prototype,"setValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.value=e}}),Object.defineProperty(e.prototype,"setValidator",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.validator=e}}),Object.defineProperty(e.prototype,"run",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;try{return null===(e=this.validator)||void 0===e?void 0:e.validate(this.render,this.value,this.condition)}catch(e){t=!1}return t}}),Object.defineProperty(e.prototype,"disable",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;try{return null===(e=this.validator)||void 0===e?void 0:e.disable()}catch(e){}}}),e}();function cr(e){return new lr(e)}var sr=function(){function e(){Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.enable=!0}return Object.defineProperty(e.prototype,"getLocalInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Bn(e.experience,e.version,e.popup),n=e.experience.engageId+"--"+e.popup.popupId;return JSON.parse(Mn(t,n)||"{}")}}),Object.defineProperty(e.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){throw new Error("validate method should be implement by ",e,t,n)}}),Object.defineProperty(e.prototype,"trigger",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.enable&&e&&"function"==typeof e&&e()}}),Object.defineProperty(e.prototype,"disable",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.enable=!1}}),e}(),ur=function(e){function t(){var t=e.call(this)||this;return Object.defineProperty(t,"currentTerminalType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t.currentTerminalType=Fn(it),t}return N(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=!1,r=this.currentTerminalType===T.PC?function(t){t.clientY<12&&!xe(it)&&(!e||i||e.deleted||(i=!0,e.mounted()))}:function(t){var n;"beforeunload"===(null===(n=t.state)||void 0===n?void 0:n.event)&&(!e||i||e.deleted||(i=!0,e.mounted()))};if(e.setLeaveHandler((function(){we(it.document,"mousemove",r)})),"=="===n&&t&&(this.currentTerminalType===T.PC&&setTimeout((function(){!e.deleted&&ye(it.document,"mousemove",r)}),5e3),(this.currentTerminalType===T.SMARTPHONE||this.currentTerminalType===T.TABLET)&&!xe(it))){var o=it.history;o.replaceState({event:"beforeunload"},"",null),o.pushState({event:"back"},"",null),ye(it,"popstate",r)}}}),t}(sr),pr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){switch(n){case"==":setTimeout((function(){!e.deleted&&e.mounted()}),1e3*+t);break;case">=":setTimeout((function(){!e.deleted&&e.mounted()}),1e3*(+t+1))}}}),t}(sr),dr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=null,i=!1,r=function(){n&&(clearTimeout(n),n=null),n=setTimeout((function(){i||e.deleted||(i=!0,e.mounted())}),1e3*+t)};r(),ye(it.document,"scroll",r),ye(it.document,"click",r)}}),t}(sr),fr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=+t.replace("%",""),i=!1,r=function(){setTimeout((function(){var t=parseInt(pe().toString(),10),r=it.document.documentElement.scrollTop||it.pageYOffset;isNaN(r)&&(r=0);var o,a=(parseFloat(r.toString())+parseInt((void 0===o&&(o=window),(o.document.doctype?o.document.documentElement:o.document.body).clientHeight).toString(),10))/t*100;!(Math.abs(a-n)<=2||a>=n)||i||e.deleted||(i=!0,e.mounted())}),50)};ye(it.document,"scroll",r),e.setLeaveHandler((function(){we(it.document,"scroll",r)}))}}),t}(sr),hr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=-1!==["POPUP","STICKY_BAR"].indexOf(e.experience.engageType)?e.experience.engageId:e.popup.popupId;ot.off("".concat(P.SHOW_POPUP,".").concat(t)),ot.on("".concat(P.SHOW_POPUP,".").concat(t),(function(){e.mounted(!0)}))}}),t}(sr),br=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this.getLocalInfo(e);">"===n&&(+i.seenTimes>=t?e.triggerGoNext=!1:e.triggerGoNext=!0)}}),t}(sr),vr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getLocalInfo(e),i=!n.hasClosed||+n.hasClosed<+t;e.triggerGoNext=i}}),t}(sr),mr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getLocalInfo(e);e.triggerGoNext=!n.session||!n.session[Ut()]||+n.session[Ut()].frequencySessionTimes<+t}}),t}(sr),gr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){!!this.getLocalInfo(e).formSubmitted===t?e.triggerGoNext=!1:e.triggerGoNext=!0}}),t}(sr),yr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this.getLocalInfo(e),r=null;switch(n){case"==":case"!=":r=!!i.hasClicked!==t}null!==r&&(e.triggerGoNext=r)}}),t}(sr);function wr(e){var t=bn.get(e);if(!t){switch(e){case"UserBlur":t=new ur;break;case"UserStay":t=new pr;break;case"UserStop":t=new dr;break;case"ScrollMatch":t=new fr;break;case"ShownByJs":t=new hr;break;case"ClickButton":t=new yr;break;case"SeenTimes":t=new br;break;case"CloseTimes":t=new vr;break;case"FormSubmitted":t=new gr;break;case"FrequencySessionTimes":t=new mr}bn.set(e,t)}return t}var _r,xr=function(){function e(e,t,n,i,r,o){var a=this;Object.defineProperty(this,"_leaveHandler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasFrequencyTrigger",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trigger",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"experience",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"terminal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupWrap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"createType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"triggerGoNext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"widget",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"widgetIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shownByJs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"deleted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rendered",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"variant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupRender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupCountDown",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupForm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupAction",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var l=i.widgets.some((function(e){return Boolean(e.widgetNodes.commonStyle)}))?"shadowDom":"body";this.experience=e,this.version=t,this.terminal=n,this.popup=i,this.isPreview=r,this.createType=o,this.triggerGoNext=!0,this._leaveHandler=[],this.renderType=l,this.popupContainer=this._getEngageContainerWrapper(l,this.popup.popupId),this.popupWrap=this._createEngageWrap(this._getEngageWrapperId(this.popup.popupId)),this.hasFrequencyTrigger=-1!==["POPUP","STICKY_BAR"].indexOf(this.experience.engageType),this.trigger=this.hasFrequencyTrigger?this.experience.trigger:this.popup.trigger,this.widget=null,this.widgetIndex=0,this.deleted=!1,this.rendered=!1,this.variant={formContent:"",fieldIDList:""},this.shownByJs=!1,this.popupRender=new ar(this),this.popupCountDown=new $i(this),this.popupForm=new zi(this),this.popupAction=new er(this),this._init(),ot.on("".concat(P.CLEAR_POPUP,".").concat(i.popupId),(function(){a.unmounted()}))}return Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._checkTrigger()||0!==(this.trigger.start||[]).length||this.mounted()}}),Object.defineProperty(e.prototype,"_createEngageWrap",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=it.document.getElementById(e);if(!t){(t=it.document.createElement("div")).setAttribute("id",e);var n=[].slice.call(it.document.querySelectorAll('[id^="ptxEngage_')),i=[].slice.call(ne('[id^="ptxEngage_'));"popup"===this.createType?t.setAttribute("focusindex",50-n.length-i.length+""):t.setAttribute("focusindex",100-n.length-i.length+"")}return t}}),Object.defineProperty(e.prototype,"_getEngageWrapperId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"engage_"+e}}),Object.defineProperty(e.prototype,"_getEngageContainerWrapper",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=it.document.getElementById(mn+"_"+t);return n||((n=it.document.createElement("div")).setAttribute("id",mn+"_"+t),function(e,t){Z()&&"body"!==t?X(e):it.document.body.appendChild(e)}(n,e)),n}}),Object.defineProperty(e.prototype,"_checkTrigger",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=Boolean(this.experience.heatmapVersion),t=!1;return!this.experience.triggerFlag&&!this.isPreview||e||(t=this._checkTriggerItem(this.trigger,"stop")),t||(t=this._checkTriggerItem(this.trigger,"start")),t||(t=this._checkPopupFrequencyTrigger()),t}}),Object.defineProperty(e.prototype,"_checkPopupFrequencyTrigger",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(!this.hasFrequencyTrigger)return!1;if("session"===(this.experience.trigger.frequency||{}).type&&(null===(e=this.experience.trigger.frequency)||void 0===e?void 0:e.times)){var t=cr(this);if(t.setValue(this.experience.trigger.frequency.times),t.setValidator(wr("FrequencySessionTimes")),t.run(),!this.triggerGoNext)return!0}return!1}}),Object.defineProperty(e.prototype,"_checkTriggerItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var n=e[t],i=!1,r=0;r<n.length;r++){var o=n[r],a=cr(this);if(a.setValue(o.value),a.setCondition(o.condition),a.setValidator(wr(o.type)),a.run(),"stop"===t&&!this.triggerGoNext){i=!0;break}}return i}}),Object.defineProperty(e.prototype,"_removeMask",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;(null===(e=this.widget)||void 0===e?void 0:e.widgetSettings.showMask)&&Cn(null===(t=this.widget)||void 0===t?void 0:t.widgetId)}}),Object.defineProperty(e.prototype,"_popupIsControlGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.popup.popupId===vn}}),Object.defineProperty(e.prototype,"updateInstanceState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this[e]=t}}),Object.defineProperty(e.prototype,"updateCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e){kn(Bn(this.experience,this.version,this.popup),e,this.experience.engageId+"--"+this.popup.popupId)}}),Object.defineProperty(e.prototype,"sendEngagePackage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.type,n=e.config,i=e.transport,r=e.properties,o=e.clickTarget;if(!this.isPreview){var a=L({creativeType:this.createType},r);this._popupIsControlGroup()||(a.creativeId=this.popup.popupId),ai.engage({engageAction:t,engageId:this.experience.engageId,engageVersionId:this.version.versionId,properties:a,config:n,transport:i});var l={experienceType:this.experience.engageType,experienceId:this.experience.engageId,versionId:this.version.versionId,experienceName:this.experience.engageName,versionName:this.version.versionName,clickTarget:o};"submit"!==t&&Kr.sendExperienceEventToGA(t,l)}}}),Object.defineProperty(e.prototype,"setLeaveHandler",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n;e&&-1!==(null===(t=this._leaveHandler)||void 0===t?void 0:t.indexOf(e))&&(null===(n=this._leaveHandler)||void 0===n||n.push(e))}}),Object.defineProperty(e.prototype,"submitCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this._removeMask(),this.isPreview||this.popupForm.sendSubmitPackage({formContent:null===(e=this.variant)||void 0===e?void 0:e.formContent,fieldIdList:this.variant.fieldIDList}),this.updateCache("formSubmitted")}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e&&(e=!1),e||!this.rendered)if(this._checkTriggerItem(this.trigger,"stop")||this._checkPopupFrequencyTrigger())this.unmounted();else{if(this._popupIsControlGroup())return this.sendEngagePackage({type:"view",transport:"beacon",properties:{creativeType:"controlGroup"}}),this.updateCache("seenTimes"),void this.unmounted();this.shownByJs=e,this.popupRender.render()}}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.deleted=!0,null===(e=this._leaveHandler)||void 0===e||e.forEach((function(e){return e()})),this.popupRender.removeActionEffect(),this.popupRender.close(),fe(it)===T.PC&&setTimeout((function(){return hi()}))}}),e}(),Or=function(){function e(){var e=this;Object.defineProperty(this,"mutationsList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),ot.on(P.ROUTER_CHANGE,(function(){e.clearObserveList()}))}return Object.defineProperty(e.prototype,"getMutationIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.mutationsList.findIndex((function(n){return n.selector===e&&n.changeType===t}))}}),Object.defineProperty(e.prototype,"clearObserveList",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.mutationsList.forEach((function(t){e.stopObserve(t)})),this.mutationsList=[]}}),Object.defineProperty(e.prototype,"startObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;"function"==typeof e.observerFn&&(e.changeCount=0,e.changeTime=0,e.changeTimer=setInterval((function(){e.changeCount++,e.changeTime>=3||e.changeCount>=1e3?t.stopObserve(e):e.observerFn()&&e.changeTime++}),200))}}),Object.defineProperty(e.prototype,"stopObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.changeTimer;t&&clearInterval(t)}}),Object.defineProperty(e.prototype,"addObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.selector,n=e.changeType,i=e.unique,r=e.resultElement,o=e.observerFn;if(!o)return null;var a=this.getMutationIndex(t,n);-1!==a&&i&&this.stopObserve(this.mutationsList[a]);var l={changeCount:0,changeTime:0,changeTimer:null,changeType:n,selector:t,unique:i,observerFn:o,resultElement:r};return this.startObserve(l),this.mutationsList.push(l),l}}),Object.defineProperty(e.prototype,"updateObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r=this.getObserve(e,t);r&&n in r&&(r[n]=i)}}),Object.defineProperty(e.prototype,"deleteObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getMutationIndex(e,t);-1!==n&&(this.stopObserve(this.mutationsList[n]),this.mutationsList.splice(n,1))}}),Object.defineProperty(e.prototype,"getObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getMutationIndex(e,t);if(-1!==n)return this.mutationsList[n]}}),Object.defineProperty(e.prototype,"getMutationsList",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.mutationsList}}),e}(),Tr=new Or,Pr=function(){function e(e,t){var n,i,r;Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"action",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__enableObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.action=t,this.selector=null!==(r=null===(i=null===(n=t.changeElementAction)||void 0===n?void 0:n.selector)||void 0===i?void 0:i.string)&&void 0!==r?r:"",this.__enableObserver=!!(null==t?void 0:t.__enableObserver),this.applyStartTime=Date.now(),this.rollBack=null}return Object.defineProperty(e.prototype,"_applyActionChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._selector(this.selector);if(!e)return!1;if("BODY"===e.nodeName)return!1;var t=(this.action.changeElementAction||{}).action;return this.rollBack=Xi({selector:this.selector,actionDom:e,actionConfig:null==t?void 0:t.object,clickFn:function(n){Ki(n,e,null==t?void 0:t.object)}}),this._applyCallback(),!0}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.selector){var t=this._selector(this.selector);t?(this._applyActionChange(),this.__enableObserver&&Tr.addObserve({selector:this.selector,changeType:"ACTION",unique:!0,resultElement:[t],observerFn:function(){return e._observeActionApply(e.selector)}})):this.inline.delay(this.applyStartTime,(function(){return e.apply()}))}}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"_selector",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?ee(e,it):null}}),Object.defineProperty(e.prototype,"_observeActionApply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=(Tr.getObserve(e,"ACTION")||{}).resultElement,n=t&&t.length>0&&!it.document.contains(t[0]),i=this._selector(this.selector),r=null==i?void 0:i.getAttribute(_n);if(i&&(!r||n)){var o=this._applyActionChange();return Tr.updateObserve(e,"ACTION","resultElement",[i]),o}return!1}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this.rollBack)||void 0===e||e.call(this)}}),e}(),Er=function(){function e(e,t){var n;Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attributeName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attributeValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inlineId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__enableObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.timer=null,this.applyStartTime=Date.now(),this.rollBack=null,this.inlineId=nt.partAntiFlicker?Ge():null,this.selector=t.changeElementAttribute.selector.string,this.attributeName=t.changeElementAttribute.attribute.string,this.attributeValue=null===(n=t.changeElementAttribute.value)||void 0===n?void 0:n.string,this.__enableObserver=!1!==t.__enableObserver}return Object.defineProperty(e.prototype,"_setAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i,r,o;if(!e)return null;var a="IMG"===e.tagName&&"src"===t,l=((i={})[t]=e.getAttribute(t),i),c=[];if((null===n||a)&&e.removeAttribute(t),null!==n&&e.setAttribute(t,n),a&&(["srcset","data-src","data-original"].forEach((function(t){l[t]=e.getAttribute(t),e.removeAttribute(t)})),"picture"===(null===(o=null===(r=e.parentElement)||void 0===r?void 0:r.tagName)||void 0===o?void 0:o.toLowerCase())))for(var s=e.parentElement.firstChild;s;)if(1===s.nodeType&&"source"===s.tagName.toLowerCase()){var u=s,p=s.nextSibling;c.push(u),e.parentElement.removeChild(u),s=p}else s=s.nextSibling;return nt.partAntiFlicker&&this.inlineId&&le(this.selector,this.inlineId),function(){Object.keys(l).forEach((function(t){var n=l[t];n&&e.setAttribute(t,n)})),c.forEach((function(t){ce(e.parentElement,t,e)}))}}}),Object.defineProperty(e.prototype,"_observeAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i,r,o=(Tr.getObserve(e,"ATTRIBUTE_"+t)||{}).resultElement,a=ee(e,it),l=(null==o?void 0:o[0])&&it.document.contains(o[0])?o[0]:a;return!!l&&!!(null===n&&(null===(i=l.hasAttribute)||void 0===i?void 0:i.call(l,t))||(null===(r=l.getAttribute)||void 0===r?void 0:r.call(l,t))!==n)&&(this.rollBack=this._setAttribute(l,t,n),Tr.updateObserve(e,"ATTRIBUTE_"+t,"resultElement",[l]),!0)}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n=this;if(this.selector&&void 0!==(null===(t=null===(e=null==it?void 0:it.document)||void 0===e?void 0:e.documentElement)||void 0===t?void 0:t.setAttribute)){nt.partAntiFlicker&&this.inlineId&&ae(this.selector,this.inlineId);var i=ee(this.selector,it);if(i){if("BODY"===i.nodeName)return;this.rollBack=this._setAttribute(i,this.attributeName,this.attributeValue),this._applyCallback(),this.__enableObserver&&Tr.addObserve({selector:this.selector,changeType:"ATTRIBUTE_"+this.attributeName,unique:!0,resultElement:[i],observerFn:function(){return n._observeAttribute(n.selector,n.attributeName,n.attributeValue)}})}else this.inline.delay(this.applyStartTime,(function(){return n.apply()}))}}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.timer&&clearInterval(this.timer),nt.partAntiFlicker&&this.inlineId&&le(this.selector,this.inlineId),null===(e=this.rollBack)||void 0===e||e.call(this),Tr.deleteObserve(this.selector,"ATTRIBUTE_"+this.attributeName)}}),e}(),Sr={REPLACE:0,INSERT:1,APPEND:2,BEFORE:3,AFTER:4};!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.BEFORE=2]="BEFORE",e[e.AFTER=3]="AFTER"}(_r||(_r={}));var Cr=function(){function e(e,t){Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modeTag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"html",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__enableObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__observerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inlineId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.content=t,this.rollBack=null,this.__observerId=null,this.inlineId=Ge(),this.applyStartTime=Date.now(),this.html=t.elementContent.html.string,this.selector=t.elementContent.selector.string,this.__enableObserver=!!(null==t?void 0:t.__enableObserver),this.modeTag=Object.keys(Sr).find((function(e){return Sr[e]===t.elementContent.mode}))||"REPLACE"}return Object.defineProperty(e.prototype,"_applyContentChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e){var t=e.nextSibling,n=function(e,t,n,i){var r;if(e){var o=null,a=null,l=e.ownerDocument||it.document;switch(n){case Sr.AFTER:o=e.parentNode,a=e.nextSibling;break;case Sr.INSERT:o=e,a=e.firstChild;break;case Sr.APPEND:o=e,a=null;break;case Sr.BEFORE:case Sr.REPLACE:o=e.parentNode,a=e}if(o){var c=function(e,t){var n=0,i="",r="",o=Pn[t.tagName];o&&(n=o[0],i=o[1],r=o[2]);var a=t.ownerDocument.createElement("div");a.innerHTML=i+(e||"")+r;for(var l=a;0<n;){var c=null==l?void 0:l.firstChild;if(null===(null==c?void 0:c.firstChild))return t.ownerDocument.createElement("div");l=c,n--}return l}(t,o);Qe(c,"SCRIPT"),Qe(c,"NOSCRIPT");var s=[];if(c.firstChild)for(var u=c.firstChild;u;){var p=u.nextSibling;null===(r=null==u?void 0:u.setAttribute)||void 0===r||r.call(u,xn,null!=i?i:""),s.push(u),ce(o,u,a),u=p}return n===Sr.REPLACE&&o.removeChild(e),{elementOwnerDocument:l,parentNode:o,insertedNodes:s}}}}(e,this.html,this.content.elementContent.mode,this.inlineId)||{},i=n.parentNode,r=n.insertedNodes,o=n.elementOwnerDocument;if(i&&r&&o){nt.partAntiFlicker&&this.inlineId&&le(this.selector,this.inlineId),this._applyCallback();var a=this;return this.rollBack=function(){var n,l;try{for(;r.length>0;){var c=r.pop();c&&c.remove()}}catch(c){}"REPLACE"===a.modeTag&&e&&!(null===(n=e.hasAttribute)||void 0===n?void 0:n.call(e,xn))&&!o.contains(e)&&o.contains(i)&&(t?(null==i?void 0:i.contains(t))&&ce(i,e,t):null===(l=null==i?void 0:i.appendChild)||void 0===l||l.call(i,e))},r}}}}),Object.defineProperty(e.prototype,"_selector",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&ee(e,it)}}),Object.defineProperty(e.prototype,"_applyContentBefore",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=Tr.getMutationsList()||[];if(n.length&&e){if("APPEND"!==this.modeTag&&"INSERT"!==this.modeTag&&"REPLACE"!==this.modeTag||Tr.getObserve(this.selector,"TEXT")&&Tr.deleteObserve(this.selector,"TEXT"),"REPLACE"===this.modeTag){var i=n.filter((function(t){return!(!(null==t?void 0:t.selector)||!e.querySelector(t.selector))}));i.length&&i.forEach((function(e){return Tr.deleteObserve(e.selector,e.changeType)}))}var r=n.filter((function(e){return(e.resultElement||[]).some((function(e){return 1===(null==e?void 0:e.nodeType)&&!!(null==e?void 0:e.querySelector(t.selector))}))}));r.length&&r.forEach((function(e){return Tr.deleteObserve(e.selector,e.changeType)}))}}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"_generateNodeHtml",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.reduce((function(e,t){return e+(8===t.nodeType?"\x3c!--".concat(t.nodeValue,"--\x3e"):3!==t.nodeType?t.outerHTML:t.textContent||t.nodeValue||"")}),"")}}),Object.defineProperty(e.prototype,"_observeContentChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n,i,r=(Tr.getObserve(e,"".concat(this.modeTag,"_").concat(this.__observerId))||{}).resultElement,o=(null==(i=r)?void 0:i.length)&&i.find((function(e){return 1===(null==e?void 0:e.nodeType)}))||null;if("REPLACE"===this.modeTag){var a=this._selector(e),l=o&&it.document.contains(o),c=l?o:a;if(!c)return!1;if(o&&!this._compareHtmlIsEqual(null!==(t=this._generateNodeHtml(l?r:[a]))&&void 0!==t?t:"",this.html)){var s=this._applyContentChange(c);return Tr.updateObserve(e,"".concat(this.modeTag,"_").concat(this.__observerId),"resultElement",s),Boolean(s&&s.length>0)}}else{if(!(a=this._selector(e)))return!1;if((!this.inlineId||!this._selector("[".concat(xn,'="').concat(this.inlineId,'"]')))&&(!r||0===(null==r?void 0:r.length)||(null==r?void 0:r.every((function(e){return!it.document.contains(e)})))))return null===(n=this.rollBack)||void 0===n||n.call(this),s=this._applyContentChange(a),Tr.updateObserve(e,"".concat(this.modeTag,"_").concat(this.__observerId),"resultElement",s),Boolean(s&&s.length>0)}return!1}}),Object.defineProperty(e.prototype,"_cleanCommonFactor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{return e.replace(/^<p([^>]*)>(?:<\/p>)?(.+?)(?:<p[^>]*>)?<\/p>$/s,(function(e,t,n){return"<p".concat(t,">").concat(n,"</p>")})).replace(/\s+pt-insert-element(?:=["'][^"']*["'])?/g,"").replace(/&amp;/g,"&")}catch(t){return console.error("Error cleaning common factor:",t),e}}}),Object.defineProperty(e.prototype,"_cleanActionChangeFactor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{return e.replace(/\s+pt-inline-action="[^"]*"/g,"").replace(/\s+(?:target|href)="[^"]*"/g,"")}catch(t){return console.error("Error cleaning action change factor:",t),e}}}),Object.defineProperty(e.prototype,"_cleanCrossDomainFactor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{return e.replace(/(<a[^>]+href=["'])([^"']+)(["'][^>]*>)/gi,(function(e,t,n,i){var r=Ue(n);return"".concat(t).concat(r).concat(i)}))}catch(t){return console.error("Error cleaning cross domain factor:",t),e}}}),Object.defineProperty(e.prototype,"_compareHtmlIsEqual",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._cleanCommonFactor(e),i=this._cleanCommonFactor(t);return n=this._cleanCrossDomainFactor(n),i=this._cleanCrossDomainFactor(i),-1!==n.indexOf(_n)||-1!==i.indexOf(_n)?this._cleanActionChangeFactor(n)===this._cleanActionChangeFactor(i):n===i}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this;"REPLACE"===this.modeTag&&nt.partAntiFlicker&&this.inlineId&&ae(this.selector,this.inlineId);var n=this._selector(this.selector);if(n){if("BODY"===n.nodeName)return;var i=!this.__enableObserver||-1!==(null!==(e=this.html)&&void 0!==e?e:"").indexOf("data-pt-disable-observe");i&&this._applyContentBefore(n);var r=this._applyContentChange(n);!i&&(this.__observerId=ze(),Tr.addObserve({selector:this.selector,changeType:"".concat(this.modeTag,"_").concat(this.__observerId),resultElement:r,observerFn:function(){return t._observeContentChange(t.selector)}}))}else this.inline.delay(this.applyStartTime,(function(){return t.apply()}))}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;nt.partAntiFlicker&&this.inlineId&&le(this.selector,this.inlineId),null===(e=this.rollBack)||void 0===e||e.call(this),Tr.deleteObserve(this.selector,"".concat(this.modeTag,"_").concat(this.__observerId)),this.__observerId=null}}),e}(),Ir=function(){function e(e,t){var n,i,r;Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentFirstCSSStyleSheet",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.style=t,this.selector=null!==(r=null===(i=null===(n=t.elementStyle)||void 0===n?void 0:n.selector)||void 0===i?void 0:i.string)&&void 0!==r?r:"",this.documentFirstCSSStyleSheet=null,this.applyStartTime=Date.now(),this.rollBack=null}return Object.defineProperty(e.prototype,"_applySelectorDomToStyleSheet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=e.cssRule,i=e.selectorDom,r=e.selectorString,o=e.propertyString,a=e.valueString,l=e.importantString,c=e.cssConditionalString;i?(this.rollBack=n?this._addStyleSheet(r,o,a,l,c):this._setStyleProperty(i,o,a,l),this._applyCallback()):this.inline.delay(this.applyStartTime,(function(){return t.apply()}))}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.style.elementStyle,n=t.property,i=t.value,r=t.selector,o=t.cssRule,a=t.important,l=t.cssConditional,c=n&&n.string,s=i&&i.string,u=a&&a.boolean,p=r&&r.string,d=l&&l.string;if(p)if(null==it?void 0:it.document){var f=ee(p,it);o?this.style.version?this._applySelectorDomToStyleSheet({cssRule:o,selectorDom:f,selectorString:p,propertyString:c,valueString:s,importantString:u,cssConditionalString:d}):(this.rollBack=this._addStyleSheet(p,c,s,u,d),this._applyCallback()):this._applySelectorDomToStyleSheet({cssRule:o,selectorDom:f,selectorString:p,propertyString:c,valueString:s,importantString:u,cssConditionalString:d})}else this.inline.delay(this.applyStartTime,(function(){return e.apply()}))}}),Object.defineProperty(e.prototype,"_getFirstCSSStyleSheet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.documentFirstCSSStyleSheet)return this.documentFirstCSSStyleSheet;for(var t=e.styleSheets.length-1;t>=0;t--){var n=e.styleSheets[t];if(!n.href){var i=n.ownerNode;if(i&&i.parentNode&&"HEAD"===i.parentNode.tagName)return this.documentFirstCSSStyleSheet=n}}return 0===e.styleSheets.length&&e.createStyleSheet(),this.documentFirstCSSStyleSheet=e.styleSheets[0]}}),Object.defineProperty(e.prototype,"_getNewStyleSheet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return ie(e)}}),Object.defineProperty(e.prototype,"_addStyleSheetToHead",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=t||it.document,i=n.getElementsByTagName("head")[0];i||(i=n.createElement("head"),ce(n.body.parentNode,i,n.body)),i.appendChild(e)}}),Object.defineProperty(e.prototype,"_addStyleSheet",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r){var o,a=e+"{"+t+": "+n+(i?" !important":"")+"}";if(r&&(a=r+"{"+a+"}"),null===(o=null==it?void 0:it.document)||void 0===o?void 0:o.createStyleSheet){var l=this._getFirstCSSStyleSheet(it.document),c=l.rules.length;return l.insertRule(a,c),function(){l.deleteRule?l.deleteRule(c):l.removeRule(c),l.insertRule("x {}",c)}}var s=this._getNewStyleSheet(a);this._addStyleSheetToHead(s,it.document);var u=s.parentNode;return function(){try{null==u||u.removeChild(s)}catch(e){}}}}),Object.defineProperty(e.prototype,"_setStyleProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){if(e.style.setProperty)try{var r=e.style.getPropertyValue(t),o=e.style.getPropertyPriority(t);return e.style.setProperty(t,n,i?"important":""),function(){e.style.setProperty(t,"",o),e.style.setProperty(t,r,o)}}catch(e){}var a=e.style.cssText;return e.style.cssText+=";"+t+": "+n+(i?" !important":"")+";",function(){e.style.cssText=a}}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this.rollBack)||void 0===e||e.call(this)}}),e}(),kr=function(){function e(e,t){Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textChange",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replaceHTML",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inlineId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__enableObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.textChange=t,this.applyStartTime=Date.now(),this.rollBack=null,this.selector=t.elementContent.selector.string,this.replaceHTML=this._getTextChangeHTML(this.textChange.elementContent.html.string),this.inlineId=nt.partAntiFlicker?Ge():null,this.__enableObserver=!1!==t.__enableObserver}return Object.defineProperty(e.prototype,"_selector",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?ee(e,it):null}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"_getTextChangeHTML",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=it.document.createElement("div");return t.innerHTML=e,1===t.childNodes.length&&t.firstChild?t.firstChild.innerHTML:t.innerHTML}}),Object.defineProperty(e.prototype,"_applyTextChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._selector(this.selector);if(!e)return!1;var t=e.innerHTML;return e.innerHTML=this.replaceHTML,nt.partAntiFlicker&&this.inlineId&&le(this.selector,this.inlineId),this._applyCallback(),this.rollBack=function(){try{e&&it.document.contains(e)&&(e.innerHTML=t)}catch(e){}},!0}}),Object.defineProperty(e.prototype,"_observeTextChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(Tr.getObserve(this.selector,"TEXT")||{}).resultElement,t=this._selector(this.selector),n=(null==e?void 0:e[0])&&it.document.contains(e[0])?e[0]:t;if(!n||n.innerHTML===this.replaceHTML)return!1;var i=this._applyTextChange();return Tr.updateObserve(this.selector,"TEXT","resultElement",[n]),i}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;nt.partAntiFlicker&&this.inlineId&&ae(this.selector,this.inlineId);var t=this._selector(this.selector);t?(this._applyTextChange(),this.__enableObserver&&Tr.addObserve({selector:this.selector,changeType:"TEXT",unique:!0,resultElement:[t],observerFn:function(){return e._observeTextChange()}})):this.inline.delay(this.applyStartTime,(function(){return e.apply()}))}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;nt.partAntiFlicker&&this.inlineId&&le(this.selector,this.inlineId),null===(e=this.rollBack)||void 0===e||e.call(this)}}),e}(),jr=function(){function e(e,t){var n,i,r;Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.text=t,this.selector=null!==(r=null===(i=null===(n=null==t?void 0:t.elementText)||void 0===n?void 0:n.selector)||void 0===i?void 0:i.string)&&void 0!==r?r:"",this.timer=null,this.applyStartTime=Date.now(),this.rollBack=null}return Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.text.elementText,n=t.selector,i=t.text,r=t.childIndex,o=this._selector(n.string);if(o){if("BODY"===o.nodeName)return;if(r.integer>=0&&r.integer<o.childNodes.length){var a=o.childNodes[r.integer];if(null!==a&&a.nodeType===Node.TEXT_NODE){var l=a.nodeValue;a.nodeValue=i.string,this._applyCallback(),this.rollBack=function(){try{a&&document.contains(a)&&(a.nodeValue=l)}catch(e){}}}}}else this.inline.delay(this.applyStartTime,(function(){return e.apply()}))}}),Object.defineProperty(e.prototype,"_observeText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this,r=0,o=0;this.timer=setInterval((function(){if(r++,o>=3)return i.timer&&clearInterval(i.timer),void i.inline.isPreview;if(r>=1e3)i.timer&&clearInterval(i.timer);else{var a=i._selector(e);if(a){var l=a.childNodes[n],c=l.nodeValue;c!==t&&(l.nodeValue=t,o++,i.rollBack=function(){try{l&&document.contains(l)&&(l.nodeValue=c)}catch(e){}})}}}),200)}}),Object.defineProperty(e.prototype,"_selector",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&ee(e,it)}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.timer&&clearInterval(this.timer),null===(e=this.rollBack)||void 0===e||e.call(this)}}),e}(),Ar=function(){function e(e,t){var n,i;Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"move",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"targetSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__enableObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.move=t,this.rollBack=null,this.applyStartTime=Date.now(),this.selector=t.elementMove.selector.string,this.targetSelector=t.elementMove.targetSelector.string,this.__enableObserver=!!t.__enableObserver,this.mode=null!==(i=null===(n=null==t?void 0:t.elementMove)||void 0===n?void 0:n.mode)&&void 0!==i?i:3}return Object.defineProperty(e.prototype,"_elementMoveToTarget",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=e.parentNode,r=e.nextSibling,o=e.ownerDocument||it.document,a=null;switch(n){case _r.BOTTOM:a=t,t.appendChild(e);break;case _r.TOP:a=t,ce(t,e,t.childNodes[0]||null);break;case _r.BEFORE:a=t.parentNode,ce(t.parentNode,e,t);break;case _r.AFTER:a=t.parentNode,ce(t.parentNode,e,t.nextSibling)}return this.rollBack=function(){ce(i,e,r)},{elementOwnerDocument:o,parentNode:a,insertedNodes:[e]}}}),Object.defineProperty(e.prototype,"_applyMoveChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(e&&t){var n=this._elementMoveToTarget(e,t,this.mode),i=n.elementOwnerDocument,r=n.parentNode,o=n.insertedNodes;if(i&&r&&(null==o?void 0:o.length))return this._applyCallback(),o}}}),Object.defineProperty(e.prototype,"_selector",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&ee(e,it)}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this._selector(this.selector),n=this._selector(this.targetSelector);if(t&&n){if("BODY"===t.nodeName||"BODY"===n.nodeName)return;var i=this._applyMoveChange(t,n);this.__enableObserver&&Tr.addObserve({selector:this.selector,changeType:this.mode,resultElement:i,observerFn:function(){return e._observeMoveChange()}})}else this.inline.delay(this.applyStartTime,(function(){return e.apply()}))}}),Object.defineProperty(e.prototype,"_observeMoveChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._selector(this.selector),t=this._selector(this.targetSelector),n=(Tr.getObserve(this.selector,this.mode)||{}).resultElement,i=!n||n.length<=0||n.some((function(e){return!it.document.contains(e)}));if(i&&e&&t){var r=this._applyMoveChange(e,t);return Tr.updateObserve(this.selector,this.mode,"resultElement",r),Boolean(r&&r.length>0)}if(!i&&e&&e!==n[0]){var o=e.parentNode;return o&&o.removeChild(e),!0}return!1}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this.rollBack)||void 0===e||e.call(this)}}),e}(),Dr=function(){function e(e,t,n,i){var r,o=this;Object.defineProperty(this,"experience",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasPageJumped",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasSendInlineView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inlineList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inlineRender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"terminal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.experience=e,this.isPreview=i,this.terminal=n,this.version=t,this.inlineList=this._actionFilter((null===(r=this.terminal)||void 0===r?void 0:r.inline)||[]),this.inlineRender=[],this.hasSendInlineView=!1,this.hasPageJumped=!1,this._init(),ot.on(P.ROUTER_CHANGE,(function(){o.hasPageJumped=!0}))}return Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._unique().forEach((function(t){e._mounted(t)}))}}),Object.defineProperty(e.prototype,"_unique",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return(this.inlineList||[]).sort((function(e,t){return(null==e?void 0:e.changeElementAction)&&!(null==t?void 0:t.changeElementAction)?1:!(null==e?void 0:e.changeElementAction)&&(null==t?void 0:t.changeElementAction)?-1:0})).reduce((function(t,n){return t.reduce((function(t,i,r){return e._isEqual(n,i)&&t.push(r),t}),[]).forEach((function(e){t.splice(e,1)})),t.push(n),t}),[])}}),Object.defineProperty(e.prototype,"_isEqual",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return"changeElementAction"in e?function(e,t){return"changeElementAction"in e&&"changeElementAction"in t&&e.changeElementAction.selector.string===t.changeElementAction.selector.string}(e,t):"changeElementAttribute"in e?function(e,t){return"changeElementAttribute"in e&&"changeElementAttribute"in t&&e.changeElementAttribute.selector.string===t.changeElementAttribute.selector.string&&e.changeElementAttribute.attribute.string===t.changeElementAttribute.attribute.string&&!1!==e.__enableObserver&&!1!==t.__enableObserver}(e,t):"elementContent"in e?e.elementContent.isTextChange?function(e,t){return"elementContent"in e&&"elementContent"in t&&!(!e.elementContent.isTextChange||!t.elementContent.isTextChange)&&e.elementContent.selector.string===t.elementContent.selector.string&&!1!==e.__enableObserver&&!1!==t.__enableObserver}(e,t):function(e,t){return"elementContent"in e&&"elementContent"in t&&e.elementContent.selector.string===t.elementContent.selector.string&&e.elementContent.isTextChange===t.elementContent.isTextChange&&e.elementContent.mode===Sr.REPLACE&&t.elementContent.mode===Sr.REPLACE}(e,t):"elementMove"in e?function(e,t){return"elementContent"in e&&"elementContent"in t&&e.elementMove.selector.string===t.elementMove.selector.string}(e,t):"elementText"in e&&function(e,t){return"elementText"in e&&"elementText"in t&&e.elementText.selector.string===t.elementText.selector.string&&e.elementText.mode===t.elementText.mode}(e,t)}}),Object.defineProperty(e.prototype,"_actionFilter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(e||[]).reduce((function(e,t){var n=t;return n&&(e=e.filter((function(e){var t,i=e.changeElementAttribute||{},r=i.selector,o=i.attribute;return(null==r?void 0:r.string)!==(null===(t=null==n?void 0:n.selector)||void 0===t?void 0:t.string)||"href"!==(null==o?void 0:o.string)}))),e.push(t),e}),[])}}),Object.defineProperty(e.prototype,"_mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;(null==e?void 0:e.changeElementAction)&&(t=new Pr(this,e)),e.elementStyle&&(t=new Ir(this,e)),e.changeElementAttribute&&(t=new Er(this,e)),e.elementContent&&(t=e.elementContent.isTextChange?new kr(this,e):new Cr(this,e)),e.elementMove&&(t=new Ar(this,e)),e.elementText&&(t=new jr(this,e)),t&&(null==t||t.mounted(),this.inlineRender.push(t))}}),Object.defineProperty(e.prototype,"delay",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this;void 0===n&&(n=200),this.hasPageJumped||Date.now()-e>12e4||setTimeout((function(){i.hasPageJumped||null==t||t()}),n)}}),Object.defineProperty(e.prototype,"renderCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.hasSendInlineView||this.isPreview||(this.hasSendInlineView=!0,ai.engage({engageId:this.experience.engageId,engageVersionId:this.version.versionId,engageAction:"view",properties:{creativeId:"",creativeType:"inline"}}),Kr.sendExperienceEventToGA("view",{experienceType:this.experience.engageType,experienceId:this.experience.engageId,versionId:this.version.versionId,experienceName:this.experience.engageName,versionName:this.version.versionName}))}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inlineRender.forEach((function(e){return e.unmounted()}))}}),e}(),Nr=function(){function e(e,t,n,i){var r=this;Object.defineProperty(this,"isPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"experience",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"terminal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isSendVersionEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"destroyed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderEngage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.isPreview=e,this.experience=t,this.version=n,this.terminal=i,this.isSendVersionEvent=!1,this.renderEngage=[],this.destroyed=!1,ot.on("".concat(P.CLEAR_EXPERIENCE,".").concat(t.engageId),(function(){r._handleClearExperience()}))}return Object.defineProperty(e.prototype,"_renderExperience",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this.terminal||{},n=t.popup,i=t.stickybar,r=t.inline,o=t.code,a=t.extraConfig;if((null==a?void 0:a.ptKit)&&Fr.initMethods(null==a?void 0:a.ptKit),n&&this._renderPopup("popup",n),i&&this._renderPopup("stickyBar",i),o&&this._renderCode(o,null===(e=this.experience)||void 0===e?void 0:e.productSocialProof),r)if("next"===nt.frameworkName&&"complete"!==it.document.readyState){var l=this,c=function(){"complete"===it.document.readyState&&(setTimeout((function(){!l.destroyed&&l._renderInline()}),150),we(it.document,"readystatechange",c))};ye(it.document,"readystatechange",c,!1)}else this._renderInline()}}),Object.defineProperty(e.prototype,"_renderPopup",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;void 0===t&&(t=[]),t.forEach((function(t){var i=new xr(n.experience,n.version,n.terminal,t,n.isPreview,e);n.renderEngage.push(i)}))}}),Object.defineProperty(e.prototype,"_renderCode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;void 0===t&&(t="");var i=new ki(e,t,(function(){n._sendViewPackage("code"),n._updateLocalCache("seenTimes")}));this.renderEngage.push(i)}}),Object.defineProperty(e.prototype,"_renderInline",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=new Dr(this.experience,this.version,this.terminal,this.isPreview);this.renderEngage.push(e),vt()&&("loading"===it.document.readyState?ye(it.document,"DOMContentLoaded",mt):mt())}}),Object.defineProperty(e.prototype,"_bodyReady",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;it.document.body?this._renderExperience():ye(it,"DOMContentLoaded",(function(){e._renderExperience()}))}}),Object.defineProperty(e.prototype,"_sendViewPackage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.isPreview){var t=this;ai.addCallbackToWaitList((function(){ai.engage({engageId:t.experience.engageId,engageVersionId:t.version.versionId,engageAction:"view",properties:{creativeId:"",creativeType:e}})})),Kr.sendExperienceEventToGA("view",{experienceType:this.experience.engageType,experienceId:this.experience.engageId,versionId:this.version.versionId,experienceName:this.experience.engageName,versionName:this.version.versionName})}}}),Object.defineProperty(e.prototype,"_updateLocalCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e){kn(this.version.versionId,e)}}),Object.defineProperty(e.prototype,"_controlGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(-1!==["POPUP","STICKY_BAR"].indexOf(this.experience.engageType))return this.terminal={popup:[{popupId:vn,popupHasError:!1,popupHasForm:!1,popupName:"CONTROL_GROUP",widgets:[]}]},void this._bodyReady();this._sendViewPackage("controlGroup"),this._updateLocalCache("seenTimes")}}),Object.defineProperty(e.prototype,"_handleRenderCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){Sn(this.version.versionId)}}),Object.defineProperty(e.prototype,"_handleClearExperience",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.renderEngage.length>0&&(this.renderEngage.forEach((function(e){var t;null===(t=null==e?void 0:e.unmounted)||void 0===t||t.call(e)})),this.renderEngage=[])}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(this.version){if(this.version.controlGroup)return this._controlGroup(),void this._handleRenderCallback();var t=!ii()&&(null===(e=this.terminal)||void 0===e?void 0:e.redirect)&&function(e){var t="";if(e){var n=e.condition,i=e.toValue;"=="===n&&i&&(t=i.indexOf(it.location.hostname)<0?tn(i):i)}return t}(this.terminal.redirect);if(t&&(it.__pt_inspectorMode?(to.showExperience(this.experience.engageId,this.version.versionId),setTimeout((function(){Wn(t)}),500)):Wn(t)),!this.terminal&&!it.PT_ENGAGE_IN_DEBUG)return this.unmounted(),void this._handleRenderCallback();this._bodyReady(),this._handleRenderCallback()}}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.destroyed=!0,this._handleClearExperience()}}),e}(),Lr=function(){function e(){var e=this;Object.defineProperty(this,"isPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.isPreview=!1,this.renderList=[],ot.on(P.ROUTER_CHANGE,(function(){e.clearRenderList(),Sn()}))}return Object.defineProperty(e.prototype,"clearRenderList",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.renderList.forEach((function(e){return e.unmounted()})),this.renderList=[]}}),Object.defineProperty(e.prototype,"setPreviewFlag",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.isPreview=e}}),Object.defineProperty(e.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if((this.isPreview||ti()||!nt.isExcess)&&(e.forEach((function(e){var n,i,r=e.matchedUrl,o=e.versions;if(!r||r===at.page){var a=o[0],l=(null===(n=null==a?void 0:a.terminals)||void 0===n?void 0:n.find((function(e){return e.type===Fn(it)})))||(null===(i=null==a?void 0:a.terminals)||void 0===i?void 0:i[0]);if((!t.isPreview||0!==(null==l?void 0:l.terminalStatus)&&0!==(null==l?void 0:l.status))&&(c=a.versionId,-1===(bn.get(yn)||[]).indexOf(c))){var c,s=new Nr(t.isPreview,e,a,l);s.mounted(),t.renderList.push(s)}}})),!this.isPreview)){var n=e.filter((function(e){return 1===e.enableABTest&&e.versions.length>0})).map((function(e){return e.versions[0].versionId}));Hn(nt.sid,n)}}}),e}(),Rr=new Lr,Mr=function(){function e(){var e=this;Object.defineProperty(this,"rollbackList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.rollbackList=[],ot.on(P.ROUTER_CHANGE,(function(){e.rollbackList.forEach((function(e){return"function"==typeof e&&e()})),e.rollbackList=[]}))}return Object.defineProperty(e.prototype,"initMethods",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e&&Object.keys(e).forEach((function(n){var i;!t[[n]]&&(null===(i=e[n])||void 0===i?void 0:i.startsWith("function"))&&(t[n]=new Function(r,"return ".concat(e[n]))(t))}))}}),e}(),Fr=new Mr;function Br(e){var t=history[e];return function(){var n=t.apply(this,arguments);try{var i=new Ti(e,{bubbles:!1,cancelable:!1,detail:{}});i&&(i.arguments=arguments,Pi(i,it))}catch(e){}return n}}function Ur(){return Ae(g,it)}function Hr(){return Ae(y)}var $r,Vr,Wr=function(){function e(){var e=this;Object.defineProperty(this,"pageSended",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"experienceInstance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageSended=!1,this.experienceInstance=null,ot.on(P.BEFORE_ROUTER_CHANGE,(function(){e._redirect()})),ot.on(P.ROUTER_CHANGE,(function(){e._inline()}))}return Object.defineProperty(e.prototype,"_isNV",{enumerable:!1,configurable:!0,writable:!0,value:function(){$t(),Dt("nid",1),at.multiLinkTag?Qt():(Dt("visitRef",V(at.ref,!1)),lt("isNV",!Vn()))}}),Object.defineProperty(e.prototype,"_isSearchEngine",{enumerable:!1,configurable:!0,writable:!0,value:function(){at.multiLinkTag?Qt():(Dt("visitRef",V(at.ref,!1)),lt("isNV",!Vn()))}}),Object.defineProperty(e.prototype,"_isReturnVisit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;at.multiLinkTag?Qt():(lt("isNV",!Vn()&&this._getIsNV()),Dt(["pvn","visitRef"],[at.isNV?0:null!==(e=Wt())&&void 0!==e?e:1,at.isNV?V(at.ref,!1):Gt()]))}}),Object.defineProperty(e.prototype,"_updateStates",{enumerable:!1,configurable:!0,writable:!0,value:function(){Dt("lastActionTime",at.multiLinkTag?qt():Lt())}}),Object.defineProperty(e.prototype,"_sendPage",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;ai.page(at.isNV?"pn":"pv",(function(){e.pageSended=!0}))}}),Object.defineProperty(e.prototype,"_getIsNV",{enumerable:!1,configurable:!0,writable:!0,value:function(){return e=qt(),+at.visitTime-+e>+at.silentTime||1===Mt();var e}}),Object.defineProperty(e.prototype,"_checkExecutionConditions",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!(xi()||ti()||Ur()||Hr()||ii()||nt.isExcess)}}),Object.defineProperty(e.prototype,"_redirect",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._checkExecutionConditions()&&function(){var e=(nt.experienceList||[]).filter((function(e){return"REDIRECT"===e.engageType})).map((function(e){return{experienceId:e.engageId,conditions:e.conditions,versions:e.versions.map((function(e){var t;return{controlGroup:e.controlGroup,rate:e.rate,versionId:e.versionId,redirect:null===(t=e.terminals)||void 0===t?void 0:t[0].redirect}}))}}));try{e.length&&it.__pt_inspectorMode&&to.setExperienceList({matchedList:nt.experienceList})}catch(e){}var t=function(e){for(var t,n,i=Un(nt.sid),r=null,o=0;o<e.length&&!r;o++){var a=e[o],l=a.versions.find((function(e){return i.includes(e.versionId)})),c=l&&0!==l.rate?l:a.versions[$(a.versions.map((function(e){return e.rate})))],s=c.redirect;if(s&&gt(Fe(it.location.href),(null===(n=null===(t=a.conditions)||void 0===t?void 0:t[0])||void 0===n?void 0:n.when)||[])){r={experienceId:a.experienceId,versionId:c.versionId,controlGroup:c.controlGroup,redirect:s};break}}return r}(e);if(!t)return!1;var n=t.controlGroup,i=t.experienceId,r=t.versionId,o=t.redirect;if(n)return ai.addCallbackToWaitList((function(){ai.engage({engageId:i,engageVersionId:r,engageAction:"view",properties:{creativeId:"",creativeType:"controlGroup"}}),Hn(nt.sid,[r]),kn(r,"seenTimes")})),!1;if(!o||!o.toValue||"=="!==o.condition)return!1;var a=Me(Fe(it.location.href),Fe(t.redirect.toValue));return!(!a||it.location.href===a||(Hn(nt.sid,[r]),ai.redirect({engageId:t.experienceId,engageVersionId:t.versionId,toUrl:a},(function(){var e=-1===a.indexOf(it.location.hostname)?tn(a):a;it.__pt_inspectorMode?(to.showExperience(t.experienceId,t.versionId),setTimeout((function(){Wn(e)}),500)):Wn(e)})),0))}()}}),Object.defineProperty(e.prototype,"_inline",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._checkExecutionConditions()&&!it.__pt_inspectorMode&&function(e){var t=function(e){for(var t,n,i=Un(nt.sid),r=0;r<e.length;r++){var o=e[r],a=o.versions.find((function(e){return i.includes(e.versionId)})),l=a&&0!==a.rate?a:o.versions[$(o.versions.map((function(e){return e.rate})))],c=gt(Fe(it.location.href),(null===(n=null===(t=o.conditions)||void 0===t?void 0:t[0])||void 0===n?void 0:n.when)||[]);o.versions=c?[l]:[]}return e}((tr(nt.experienceList)||[]).filter((function(e){return"INLINE"===e.engageType}))).map((function(e){return{enableABTest:e.enableABTest,engageName:e.engageName,engageType:e.engageType,engageId:e.engageId,versions:e.versions.map((function(e){return L({controlGroup:e.controlGroup,versionId:e.versionId},e.terminals&&{terminals:e.terminals.filter((function(e){return e.type===Fn(it)}))})}))}})).filter((function(e){return e.versions.length}));t.length>0&&e&&e.render(t)}(this.experienceInstance)}}),Object.defineProperty(e.prototype,"setExperience",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.experienceInstance=e}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){this[0===Vt()?"_isNV":"_isReturnVisit"](),this._updateStates(),this._redirect()||(this._inline(),this._sendPage(),at.multiDomainFlag&&("complete"===it.document.readyState?Zt():(ye(it,"DOMContentLoaded",(function(){Zt()})),ye(it,"load",(function(){Zt()})))),Gn(!0),function(){if(!nt.cancelWatchSPARouterChange){var e=it.history;e.pushState=Br("pushState"),e.replaceState=Br("replaceState");var t=function(){return nt.onlyWatchRouterPath?Ne(it,!1):nt.watchRouterHashChange?Ne(it):it.location.href};if("onpopstate"in it){var n=t(),i=z((function(){var i,r,o=t();"beforeunload"!==(null===(i=e.state)||void 0===i?void 0:i.event)&&"back"!==(null===(r=e.state)||void 0===r?void 0:r.event)&&n!==o&&(n=o,ot.emit(P.BEFORE_ROUTER_CHANGE),setTimeout((function(){ot.emit(P.ROUTER_CHANGE)}),200))}),200);we(it,"popstate",i),ye(it,"popstate",i),we(it,"pushState",i),ye(it,"pushState",i),we(it,"replaceState",i),ye(it,"replaceState",i),nt.watchRouterHashChange&&(we(it,"hashchange",i),ye(it,"hashchange",i))}}}(),function(){try{Oi()&&(window[j]=window[j]||["setAccount,".concat(nt.sid)],ue(it.document,_i+"/components/event/foreign/dest/event.js",!1))}catch(e){}}(),Ur()&&function(){var e;if(!window._ptLpoVisualEvent){window._ptLpoVisualEvent={};var t=(null===(e=it.location.href)||void 0===e?void 0:e.indexOf("isdev"))>-1?"localhost:8000":"pti.ptengine.com";ue(it.document,"".concat(location.protocol,"//").concat(t,"/event/event_entry.js"))}}(),ye(it,"onorientationchange",(function(){lt("rotationFlag",_e(it))})),"loading"!==it.document.readyState?ai.performance():ye(it,"DOMContentLoaded",(function(){ai.performance()})))}}),e}(),qr=new Wr,zr=function(){function e(){Object.defineProperty(this,"locked",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"touchmoveFlag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formElementTriggerEventType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastFocusDomQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"iframeValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allFocusType",{enumerable:!0,configurable:!0,writable:!0,value:["input","textarea","select","embed"]}),this.locked=!1,this.timer=null,this.touchmoveFlag=!1,this.formElementTriggerEventType=this._getFormElementTriggerEventType(),this.lastFocusDomQueue=[null,null],this.iframeValue=[0,0,""]}return Object.defineProperty(e.prototype,"_getFormElementTriggerEventType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return/windows|win32/i.test(it.navigator.userAgent)&&/msie|trident|edge/i.test(it.navigator.userAgent)||/(iPhone|iPad|iPod|iOS|Android)/.test(it.navigator.userAgent)?"click":"focus"}}),Object.defineProperty(e.prototype,"_bindEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this;ye(it.document,"click",(function(e){t._handleDocumentClick(e,it.document.documentElement),yi()}),!0),ye(it.document,"touchstart",(function(e){t._handleTouchstart(e)}),!0),ye(it.document,"touchmove",(function(){t._handleTouchmove()}),!0),ye(it.document,"touchend",(function(e){t._handleTouchend(e)}),!0),ye(it.document,"keydown",(function(t){e._handleKeydownListener(t)}),!0),ye(it.document,"keyup",(function(t){e._handleKeyupListener(t)}),!0);var n=it.document.readyState.toLowerCase();if("interactive"===n||"complete"===n)this._handleBindIframe();else{var i=function(){t._handleBindIframe(),we(it.document,"DOMContentLoaded",i)};ye(it.document,"DOMContentLoaded",i)}}}),Object.defineProperty(e.prototype,"_handleKeydownListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e){mi(e),vi("keydown",e)&&this._keyboardEnter(e)}}),Object.defineProperty(e.prototype,"_handleKeyupListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e){gi(e),vi("keyup",e)&&this._keyboardEnter(e)}}),Object.defineProperty(e.prototype,"_handleTouchstart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){lt(["srcElement","mouseCoo"],[Ye(e),Xe(e)])}}),Object.defineProperty(e.prototype,"_handleBindIframe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(function(){var e;return"true"===(null===(e=et("setIframe"))||void 0===e?void 0:e[1])}()||"7f21ceb9"===nt.sid)for(var t=it.document.getElementsByTagName("iframe"),n=0;n<t.length;n++)t[n].onload=function(n){var i,r=t[n].querySelectorAll("script"),o=t[n].querySelectorAll("iframe");r.forEach((function(e){return e.remove()})),o.forEach((function(e){return e.remove()}));var a=null===(i=t[n].contentWindow)||void 0===i?void 0:i.document;return function(){a.onclick=function(i){var r=Je(t[n]);e.iframeValue[0]=r.left,e.iframeValue[1]=r.top;var o="";try{o=Ke(t[n],nt.selectorIgnoreId)}catch(e){}e.iframeValue[2]=encodeURIComponent(o),e._handleDocumentClick(i,a)}}}(n)}}),Object.defineProperty(e.prototype,"_handleTouchmove",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.touchmoveFlag=!0}}),Object.defineProperty(e.prototype,"_handleTouchend",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.touchmoveFlag?this.touchmoveFlag=!1:at.mouseCoo.x<=0||at.mouseCoo.y<=0||(this._onClick(e),this.locked=!0,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.locked=!1}),500))}}),Object.defineProperty(e.prototype,"_handleDocumentClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!Gi(Ye(e))){var n=function(e,t){var n,i,r=parseInt((e.clientX+Number((n=t,i=(null==n?void 0:n.scrollLeft)||window.pageXOffset,i=isNaN(i)?0:i,parseInt(i.toString(),10)))).toString(),10),o=parseInt((e.clientY+Number(Oe(t))).toString(),10);return{x:r=isNaN(r)?0:r,y:o=isNaN(o)?0:o}}(e,t);n.x=n.x+this.iframeValue[0],n.y=n.y+this.iframeValue[1],lt("mouseCoo",n),this.locked||this._onClick(e)}}}),Object.defineProperty(e.prototype,"_useFocusEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if("focus"===this.formElementTriggerEventType){var t=it.document.readyState.toLowerCase();if("interactive"===t||"complete"===t)this._bindFocusEvent(),this._formTagBindFocus();else{var n=function(){e._bindFocusEvent(),e._formTagBindFocus(),we(it.document,"DOMContentLoaded",n)};ye(it.document,"DOMContentLoaded",n)}}}}),Object.defineProperty(e.prototype,"_bindFocusEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;ye(it,"focus",(function(){e.lastFocusDomQueue[1]!==this&&(e.lastFocusDomQueue.push(this),e.lastFocusDomQueue.shift())}))}}),Object.defineProperty(e.prototype,"_isFireFocus",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return"Chrome"!==function(e){void 0===e&&(e=window);var t=e.navigator.userAgent,n=-1!==t.indexOf("Firefox"),i=void 0!==window.opr,r=-1!==t.indexOf("Chrome")&&window.chrome,o=-1!==t.indexOf("Safari")&&-1!==t.indexOf("Version");return se()?"IE":n?"Firefox":i?"Opera":r?"Chrome":o?"Safari":"Unkown"}()||t[0]!==e&&t[0]!==it||t[1]!==it}}),Object.defineProperty(e.prototype,"_formTagBindFocus",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.allFocusType.forEach((function(t){[].slice.call(it.document.getElementsByTagName(t)).forEach((function(t){ye(t,"focus",(function(n){if(e._isFireFocus(this,e.lastFocusDomQueue)){var i=nr(n).events;i&&(null==i?void 0:i.length)>0&&ai.track({events:i}),lt(["srcElement","clickActionTime"],[Ye(n),(new Date).getTime()])}e.lastFocusDomQueue.push(t),e.lastFocusDomQueue.shift()}))}))}))}}),Object.defineProperty(e.prototype,"_applyAutoEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(nt.autoEvent&&0!==nt.autoEvent.length){var t=function(e,t,n){var i=function(e){for(;e&&"body"!==e.nodeName.toLowerCase();){if("a"===(null==e?void 0:e.nodeName.toLowerCase()))return e;e=K(t=e)?Q(t):t.parentNode}var t;return null}(e);if(i){var r="",o="object"==typeof i.href?i.href.animVal:i.href,a=V(o,!1).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\./g,"%2E"),l=/\.(msi|pdf|apk|ipa|jar|umd|jad|epub|mobi|iso|tar|zip|rar|gzip|gz|dmg|doc|docx|xls|xlsx|csv|ppt|pptx|exe|txt|pdf|key|numbers|pages)/,c=o.match(/mailto:/)?"mailSendings":o.toLowerCase().match(l)?"fileDownloads":0===o.toLowerCase().indexOf("http")?"outboundLinks":"";if(c&&-1!==t.indexOf(c)){if("mailSendings"===c&&(r="Mail_Mailto_".concat(a.toLowerCase())),"fileDownloads"===c){var s=o.toLowerCase().match(l)[1];a=a.replace(/(^https?:\/\/)([^/]+)/i,(function(e){return e.toLowerCase()})),r="Downloads_".concat(s,"_").concat(a)}if("outboundLinks"===c){for(var u=!0,p=0;p<n.length;p++)if(o.toLowerCase().indexOf(n[p])>0){u=!1;break}u&&(a=a.replace(/(^https?:\/\/)([^/]+)/i,(function(e){return e.toLowerCase()})),r="Outbound%20Links_Exit_".concat(a))}}return r}}(e,nt.autoEvent,at.domainSet);if(t){var n={events:[{eventName:t,eventType:0}]};or({srcElement:e,win:it})&&(n.params={transport:"beacon"}),ai.track(n)}}}}),Object.defineProperty(e.prototype,"_onClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n,i=(new Date).getTime();Yn(i)&&Jn();var r=Kn(i);r&&Dt("lastActionTime",i);var o=Ye(e);if(o){var a=(null===(t=null==o?void 0:o.nodeName)||void 0===t?void 0:t.toLowerCase())||"";if("html"!==a&&!(at.srcElement===o&&i-at.clickActionTime<p)){var l=Je(o);lt(["srcElement","srcElementAbsLeft","srcElementAbsTop"],[o,l.left,l.top]);var c=ut(Mt(),i,qt()),s=nr(e);this._applyAutoEvent(o),Dt("pageList",Yt()),lt("clickActionTime",i),Dt("lastActionTime",i),!r&&qn(),st();var u=function(e,t){var n,i=null==e?void 0:e.nodeName.toLowerCase(),r=null===(n=null==e?void 0:e.getAttribute)||void 0===n?void 0:n.call(e,"type"),o="input"===i&&("submit"===r||"image"===r||"button"===r),a=Boolean(e.onclick);return{elementType:-1!==["a","input","select","embed","object","textarea","button"].indexOf(i)||a||0!==t?1:0===e.childNodes.length||1===e.childNodes.length&&1!==e.childNodes[0].nodeType?2:0,interactionType:-1!==["a","button"].indexOf(i)||o||a||2===t?1:0}}(o,Zi(o)),d=u.elementType,f=u.interactionType,h=d+this.iframeValue[2]+V(Ke(o,nt.selectorIgnoreId),!1).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\./g,"%2E");if(s&&ot.emit(P.PAGE_ON_CLICK,{event:e,target:o,config:{events:s.events,cssSelector:h,stayTime:c,interactionType:f}}),s&&0!==(null===(n=s.events)||void 0===n?void 0:n.length)){if("focus"===this.formElementTriggerEventType&&-1!==this.allFocusType.indexOf(a))return;if(!s.isPopup){var b={events:s.events,cssSelector:h,stayTime:c,interactionType:f};try{var v=o.closest("[".concat(_n,"]")),m=v&&JSON.parse(v.getAttribute(_n));or({srcElement:o,win:it,inlineActionConfig:m})&&(b.params={transport:"beacon"})}catch(e){}finally{ai.track(b)}}}else ai.click({cssSelector:h,stayTime:c,interactionType:f}),setTimeout((function(){lt(["srcElementAbsLeft","srcElementAbsTop"],[0,0])}))}}}}),Object.defineProperty(e.prototype,"_keyboardEnter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!Gi(Ye(e))){var t=Ye(e).getBoundingClientRect();t.left,t.right,t.left,t.top,t.bottom,t.top,document.body.scrollLeft||document.documentElement.scrollLeft,document.body.scrollTop||document.documentElement.scrollTop,this.locked||this._onClick(e)}}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){ot.on(P.ROUTER_CHANGE,(function(){lt("trackEventList",pt())})),this._bindEvent(),this._useFocusEvent()}}),e}(),Gr=new zr,Yr=new(function(){function e(){Object.defineProperty(this,"timeB",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tmpTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scrollTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.timeB=at.visitTime,this.timeN=0,this.tmpTime=0,this.scrollTimer=0}return Object.defineProperty(e.prototype,"_bindEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;ye(it,"scroll",(function(t){return e._handleScroll(t)}),!0)}}),Object.defineProperty(e.prototype,"_scrollDomBindEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;te("[pt-scroll-el]",it).forEach((function(t){t&&ye(t,"scroll",(function(t){return e._handleScroll(t)}),!0)}))}}),Object.defineProperty(e.prototype,"_isScrolling",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n=!0;return(0===it.document.body.clientHeight||Oe(e)<=1||Oe(e)+1>=(t=parseInt(e.scrollHeight.toString(),10),isNaN(t)?0:t))&&(n=!1),n}}),Object.defineProperty(e.prototype,"_handleScroll",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Ye(e),n=(null==t?void 0:t.documentElement)||t,i=(new Date).getTime();Yn(i)&&Jn();var r,o=Kn(i);if(o&&Dt("lastActionTime",i),lt("scrolledFlag",!0),this.timeN=i,this.tmpTime=this.timeN-this.timeB,this.tmpTime<1e3)return this.timeB=this.timeN,this.scrollTimer&&clearTimeout(this.scrollTimer),void(this.scrollTimer=setTimeout((function(){r=ut(Mt(),i,qt()),st(n),ai.scroll(r,!0)}),1e3));r=ut(Mt(),i,qt()),Dt("lastActionTime",i),Dt("pageList",Yt()),!o&&qn(),st(n),this._isScrolling(n)&&ai.scroll(r),this.timeB=this.timeN}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.timeB=Lt(),this._bindEvent(),-1!==["interactive","complete"].indexOf(it.document.readyState.toLowerCase())?this._scrollDomBindEvent():ye(it.document,"DOMContentLoaded",this._scrollDomBindEvent)}}),e}()),Jr=new(function(){function e(){Object.defineProperty(this,"_ver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultArr",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastTrackEventTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._ver="1.0.1",this._defaultArr=[],this.lastTrackEventTime=(new Date).getTime()-1e4}return Object.defineProperty(e.prototype,"_checkTrackEventTime",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(new Date).getTime();return!(this.lastTrackEventTime+1e3>e||(e-this.lastTrackEventTime>1e4?(this.lastTrackEventTime=e-9e3,0):(this.lastTrackEventTime+=1e3,0)))}}),Object.defineProperty(e.prototype,"_addPVN",{enumerable:!1,configurable:!0,writable:!0,value:function(){Dt("pvn",+Wt()+1)}}),Object.defineProperty(e.prototype,"_handlePush",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=e.split(",");switch(n[0]){case"setPVTag":this._setPTTag(n);break;case"setCustomEvent":this._setCustomEvent(t);break;case"setTrackEvent":this._setTrackEvent(n);break;case"setCrossDomainLink":this._setCrossDomainLink(n[1])}}}),Object.defineProperty(e.prototype,"_setPTTag",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{var t="";if("replace"===e[2])t=e[1];else{var n=e[1]?e[1]:"";t=at.initPage+"#"+n}zt(t),lt("page",t),ai.page("vpv")}catch(e){}}}),Object.defineProperty(e.prototype,"_setCustomEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{var t=e.eventName?e.eventName:"";if(!t)return;this._addPVN(),ai.track({events:[{eventName:t,eventType:0}]})}catch(e){}}}),Object.defineProperty(e.prototype,"_setTrackEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{if("string"==typeof e[6]&&!it.location.href.replace(/\/$/,"").match(new RegExp(e[6].replace(/^\//,"").replace(/[\\]?[\\]?\/[\.]?[\*]?[\$]?$/,""))))return;void 0===e[3]&&(e[3]=""),void 0===e[4]&&(e[4]="0"),e[4]=e[4].replace(/\./g,"e");for(var t=1;t<5;t++)e[t]=Fe(e[t]);for(e[1]=e[1].substring(0,200),e[2]=e[2].substring(0,200),e[3]=e[3].substring(0,500),e[4]=e[4].substring(0,10),t=1;t<5;t++)if(e[t]=V(e[t]).replace(/\./g,"%2E"),e[t].indexOf(".")>-1){var n=e[t].split(".");e[t]=n.join("%2E")}if("string"==typeof e[7]);else{if(!this._checkTrackEventTime())return;this._addPVN();var i=e[3];i&&ai.track({events:[{eventName:i,eventType:0}]})}}catch(e){}}}),Object.defineProperty(e.prototype,"_setCrossDomainLink",{enumerable:!1,configurable:!0,writable:!0,value:function(e){lt("crossDomainLink","allManual"===e?"allManual":"halfManual"===e&&"halfManual")}}),Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this._defaultArr.length>0)for(var e=0,t=this._defaultArr.length;e<t;e++)if(this._defaultArr[e]&&"object"==typeof this._defaultArr[e]&&this._defaultArr[e-1])this._defaultArr[e]="";else{var n=this._defaultArr[e].indexOf(",");this._execPrc(this._defaultArr[e].slice(0,n),this._defaultArr[e].slice(n+1))}}}),Object.defineProperty(e.prototype,"_execPrc",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){switch(e){case"setCamParam":lt("camParamAry",t.split(","));break;case"setURL":lt("urlMark",t);break;case"setVPV":lt("vUrl",t.toLowerCase().split(",")[0]),lt("page",ft()),lt("initPage",ft());break;case"setVPT":lt("vTitle",t);break;case"setCrossDomainLink":this._setCrossDomainLink(t)}}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;window[j]||(window[j]=["setAccount,".concat(nt.sid)]),this._defaultArr=(window[j]||[]).map((function(e){return/setpvtag/i.test(e)&&(e=e.replace(/setpvtag/i,"setVPV")),e})),window[j].push=function(t,n){return e._handlePush(t,n)},this._init()}}),e}()),Xr=function(){function e(){var e=this;Object.defineProperty(this,"enableIntegrationGA4",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"waitList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gaIntervalID",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gaWarn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"GA_BUTTON_NAME_MAX_LENGTH",{enumerable:!0,configurable:!0,writable:!0,value:50}),this.enableIntegrationGA4=!1,this.sendCache={},this.waitList=[],this.gaIntervalID=null,this.gaWarn=!1,ot.on(P.ROUTER_CHANGE,(function(){e.sendCache={}})),this._init()}return Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.enableIntegrationGA4=nt.integration&&-1!==(null===(e=nt.integration.find((function(e){return"GA4"===e.platform})))||void 0===e?void 0:e.properties.indexOf("experience"))}}),Object.defineProperty(e.prototype,"_hasGA4",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n=!!it.gtag&&"function"==typeof it.gtag,i=!!it.dataLayer&&-1===(null===(t=null===(e=it.dataLayer)||void 0===e?void 0:e.push)||void 0===t?void 0:t.toString().indexOf("[native code]"));return!n||i||this.gaWarn||(this.gaWarn=!0),n&&i}}),Object.defineProperty(e.prototype,"_sendGAEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;this._hasGA4()?it.gtag("event",e,t):-1!==this.gaIntervalID&&(this.waitList.push({type:"ga4",eventName:e,properties:t}),null===this.gaIntervalID&&(this.gaIntervalID=this._generatorInterval({checkFn:function(){return n._hasGA4()},callbackFn:function(){return n._consumptionGaWaitingQueue()},rejectFn:function(){n.gaIntervalID=-1,n.waitList=[]}})))}}),Object.defineProperty(e.prototype,"_consumptionGaWaitingQueue",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this.waitList.length-1;e>=0;e--){var t=this.waitList[e],n=t.type,i=t.eventName,r=t.properties;"ga4"===n&&(this._sendGAEvent(i,r),this.waitList.splice(e,1))}}}),Object.defineProperty(e.prototype,"_checkHasCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i,r,o,a,l;return(null===(r=null===(i=this.sendCache)||void 0===i?void 0:i[e])||void 0===r?void 0:r[t])&&-1!==(null===(l=null===(a=null===(o=this.sendCache)||void 0===o?void 0:o[e])||void 0===a?void 0:a[t])||void 0===l?void 0:l.indexOf(n))}}),Object.defineProperty(e.prototype,"_addCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i,r;(null===(i=this.sendCache)||void 0===i?void 0:i[e])||(this.sendCache[e]={}),(null===(r=this.sendCache[e])||void 0===r?void 0:r[t])||(this.sendCache[e][t]=[]),-1===this.sendCache[e][t].indexOf(n)&&this.sendCache[e][t].push(n)}}),Object.defineProperty(e.prototype,"_generatorInterval",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n,i=0,r=null!==(t=e.delay)&&void 0!==t?t:200,o=null!==(n=e.maxWaitTime)&&void 0!==n?n:3e4,a=setInterval((function(){var t;e.checkFn()?(e.callbackFn(),clearInterval(a)):i>o&&(null===(t=e.rejectFn)||void 0===t||t.call(e),clearInterval(a)),i+=r}),r);return a}}),Object.defineProperty(e.prototype,"sendExperienceEventToGA",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=t.experienceType,i=t.experienceId,r=t.versionId,o=t.experienceName,a=t.versionName;if(this.enableIntegrationGA4&&"REDIRECT"!==n&&!this._checkHasCache(i,r,e)){var l="",c={};"view"===e&&(l="pt_experience_impression",c={pt_experience_name:o,pt_experience_version_name:a}),"close"===e&&(l="pt_experience_close",c={pt_experience_name:o,pt_experience_version_name:a}),"click"===e&&(l="pt_experience_click",c={pt_experience_name:o,pt_experience_version_name:a}),l&&(this._sendGAEvent(l,c),this._addCache(i,r,e))}}}),e}(),Kr=new Xr,Qr=function(){function e(){Object.defineProperty(this,"area",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"widgetScript",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.area="en",this.widgetScript=null}return Object.defineProperty(e.prototype,"getWidgetLocalData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[];try{var t=Tt(O);t&&(e=JSON.parse(t))}catch(e){}return e}}),Object.defineProperty(e.prototype,"getWidgetSessionData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[];try{var t=sessionStorage.getItem(O);t&&(e=JSON.parse(t))}catch(e){}return e}}),Object.defineProperty(e.prototype,"setWidgetFlagToLocalStorage",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getWidgetLocalData(),i=this.getLocalDataSidIndex(n),r=i.index,o=i.position;if("add"===e){var a=t&&this.checkPositionDataIsValid(t)?t:"l",l="".concat(nt.sid,"-").concat(a);-1===r?n.push(l):t&&t!==o&&n.splice(r,1,l)}else-1!==r&&n.splice(r,1);Ot(O,JSON.stringify(n))}}),Object.defineProperty(e.prototype,"setWidgetCloseFlagToSessionStorage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{var t=this.getWidgetSessionData(),n=t.indexOf(nt.sid);"add"===e?-1===n&&t.push(nt.sid):-1!==n&&t.splice(n,1),sessionStorage.setItem(O+"_close",JSON.stringify(t))}catch(e){}}}),Object.defineProperty(e.prototype,"loadWidgetScript",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.widgetScript||(this.widgetScript=ue(it.document,"".concat(location.protocol,"//pteglobalstatic.ptengine.com/assistant/inject.js?area=").concat(this.area,"&sid=").concat(nt.sid),!0,"ptengine-assistant-inject"))}}),Object.defineProperty(e.prototype,"getLocalDataSidIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n=e||this.getWidgetLocalData(),i=n.findIndex((function(e){return e&&e.startsWith(nt.sid)})),r=null===(t=n[i])||void 0===t?void 0:t.split("-")[1];return{index:i,position:this.checkPositionDataIsValid(r)?r:void 0}}}),Object.defineProperty(e.prototype,"checkPositionDataIsValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return["l","r"].includes(e)}}),Object.defineProperty(e.prototype,"openWidget",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.loadWidgetScript(),this.setWidgetFlagToLocalStorage("add",e),this.setWidgetCloseFlagToSessionStorage("remove")}}),Object.defineProperty(e.prototype,"closeWidget",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"local"===e?this.setWidgetFlagToLocalStorage("remove"):this.setWidgetCloseFlagToSessionStorage("add")}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(e){xi()||ti()||Ur()||Hr()||ii()||(this.area=Ee(e),-1!==this.getLocalDataSidIndex().index&&(this.loadWidgetScript(),this.setWidgetFlagToLocalStorage("add")))}}),e}(),Zr=new Qr,eo=function(){function e(){var e=this;Object.defineProperty(this,"experienceDisplayCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.experienceDisplayCache=new Set,ot.on(P.ROUTER_CHANGE,(function(){e.experienceDisplayCache.clear()}))}return Object.defineProperty(e.prototype,"_postMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){it.postMessage({command:e,message:t,tabId:it.__pt_inspector_tabId,urlId:it.__pt_currentUrlId},"*")}}),Object.defineProperty(e.prototype,"_parseResponseFromApi",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{var t=e?JSON.parse(e):{};if("success"===t.status)return t}catch(e){return}}}),Object.defineProperty(e.prototype,"execResponseFromApi",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._parseResponseFromApi(e)){var t=this._parseResponseFromApi(e),n=t.conversion,i=t.goal,r=t.content,o=t.unMatchedEngage,a=t.pvLimited,l=t.eventLimited,c=t.exclude;this.setExperienceList({matchedList:r,unMatchedList:o}),this._postMessage("SendPageInfo",{type:"API_RESPONSE",detail:{pvLimited:a,eventLimited:l,exclude:c,conversion:n,goal:i,sid:nt.sid},timestamp:Date.now()})}}}),Object.defineProperty(e.prototype,"setExperienceList",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.matchedList,n=void 0===t?[]:t,i=e.unMatchedList,r=void 0===i?[]:i;this._postMessage("SetExperienceList",{matchedList:n,unMatchedList:null!=r?r:[]})}}),Object.defineProperty(e.prototype,"showExperience",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.experienceDisplayCache.has(t)||(this._postMessage("SendPageInfo",{type:"EXPERIENCE",detail:{engageId:e,versionId:t},timestamp:Date.now()}),this.experienceDisplayCache.add(t))}}),Object.defineProperty(e.prototype,"sendTrackEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){void 0===n&&(n="");var i=null==e?void 0:e.reduce((function(e,t){return e.push(t.eventName),e}),[]),r=t&&function(e){if(!e)return"";var t=["input","select","textarea","button"],n=e.split(">").map((function(e){var n;t.some((function(t){return 0===e.indexOf(t+":input[name=")}))&&(e=e.split(":input").join(""));var i=null===(n=e.match(/\:eq\(\d+\)/))||void 0===n?void 0:n[0];if(i){var r=e.split(i)[0],o=i.replace(/[^0-9]/gi,"");r&&void 0!==o&&(e=/(#.+)/.test(r)?'[id="'.concat(r.replace("#",""),'"]').concat(Number(o)>0?":nth-of-type(".concat(Number(o)+1,")"):""):"".concat(r,":nth-of-type(").concat(Number(o)+1,")"))}else/(#.+)/.test(e)&&(e='[id="'.concat(e.replace("#",""),'"]'));return e})).join(">");return n.replace(/\\u/g,"\\\\u")}(W(t.slice(1)));this._postMessage("SendPageInfo",{type:"EVENT",detail:{eventNames:i,selector:null!=r?r:"",text:n},timestamp:Date.now()})}}),Object.defineProperty(e.prototype,"sendSdkInterruptedReason",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._postMessage("SendPageInfo",{type:"INTERRUPTED",detail:{reason:e},timestamp:Date.now()})}}),e}(),to=new eo;if(ai.setExperience(Rr),qr.setExperience(Rr),Array.prototype.find||(Array.prototype.find=function(e){return e&&(this.filter(e)||[])[0]}),function(){var e,t,n,i,r,o,a=Te(it,it.document.documentElement),l=_e(it),c=function(){var e,t=[],n="",i=nt.domain&&nt.domain.length>1,r=function(e){for(var t=e.split(".").reverse(),n=[],i=1;i<t.length;i++){var r=t.slice(0,i+1).reverse().join(".");n.push(r)}return n}(it.location.hostname);nt.domain.sort((function(e,t){return e.replace(/^https?:\/\//,"").length>t.replace(/^https?:\/\//,"").length?1:-1}));for(var o=0;o<nt.domain.length;o++)t.push(nt.domain[o].replace(/^https?:\/\//,"")),nt.domain[o].match(/https?:\/\//)&&(null===(e=nt.domain[o].match(/https?:\/\//))||void 0===e?void 0:e[0])!==it.location.protocol+"//"||-1!==r.indexOf(nt.domain[o].replace(/^https?:\/\//,""))&&(n=nt.domain[o].replace(/^https?:\/\//,""));return(nt.crossAnyDomain&&!n||tt())&&(n=function(e){var t=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,n=e.split("."),i=n[n.length-1];(i.length>4||"com"===i||"org"===i)&&(t=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i);var r=e.match(t);return r?r[0]:""}(it.location.hostname),t.push(n)),{domain:n,domainSet:t,multiDomainFlag:i}}(),s=c.domain,u=c.domainSet,p=c.multiDomainFlag;lt("domain",s),lt("page",ft()),lt("initPage",ft()),lt("domainSet",u),lt("multiDomainFlag",p),lt("silentTime",function(){var e,t,n,i,r=fe();return 1e3*(r===T.PC||r===T.TABLET?null!==(t=null===(e=nt.silentTimes)||void 0===e?void 0:e.pc)&&void 0!==t?t:30:null!==(i=null===(n=nt.silentTimes)||void 0===n?void 0:n.mobile)&&void 0!==i?i:5)*60}()),lt("trackEventList",pt()),lt("visualEventSelectors",(e=[],nt.ptiEventList.forEach((function(t){var n=Pe(W(t.isOnly?t.selfSelector:t.sameSelector));e.find((function(e){return e===n}))||e.push(n)})),e)),lt("ref",dt(t=it.document.referrer)?"":t),lt("terminalType",fe(it)),lt("rotationFlag",l),lt("yMax",a),lt("yMaxP",1===l?a:0),lt("yMaxM",1!==l?a:0),lt("visitTime",rt.getTime()),lt("multiLinkTag",(n=it.location.href,i=new RegExp(x),(null==(r=n.match(i))?void 0:r[2])||"")),lt("sandboxFlag",((null==(o=document.currentScript)?void 0:o.getAttribute("src"))||"").includes("sandbox")),ct()}(),Ii.preInspection(),Ii.ready&&!Ii.interrupted){var no=bt();ni(),Zr.start(document.currentScript),Jr.start(),Si.init({antiFlickerObj:no,scriptElement:document.currentScript}),$r=Xt(nt.sid),Vr=rt.getTime(),jt.profileId=nt.sid,jt.deviceId=$t(),jt.sessionId=Ut(),jt.accountId=Ht()||"",jt.pageId=at.sandboxFlag&&$r.pageId||zt(at.page),jt.pageViewId=at.sandboxFlag&&$r.pageViewId||Bt(!0),jt.pageList=Ft()||"",jt.vn=Number($r.vn)||0,jt.pvn=Number($r.pvn)||0,jt.lastActionTime=Number($r.lastActionTime)||Vr,jt.nid=Number($r.nid)||0,jt.toFlag=0,jt.visitRef=Gt(),jt.preSessionId=$r.preSessionId||"",jt.preSessionLastSendTime=Number($r.preSessionLastSendTime)||0,Kt(),kt=!0,at.sandboxFlag||(Gr.start(),Yr.start(),qr.start())}}();
